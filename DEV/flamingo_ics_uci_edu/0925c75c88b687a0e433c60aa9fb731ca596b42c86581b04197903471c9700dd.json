{"url": "http://flamingo.ics.uci.edu/releases/3.0/src/topk/example.cc", "content": "/*\n  $Id: example.cc 5026 2010-02-17 20:25:03Z rares $\n\n  Copyright (C) 2007 by The Regents of the University of California\n \n  Redistribution of this file is permitted under the terms of the BSD\n  license\n\n  Date: 02/16/2010\n  Author: Rares Vernica <rares (at) ics.uci.edu>\n*/\n\n#include \"topk.h\"\n\nusing namespace std;\n\nint main()\n{\n  /*\n   * -- - Data - --\n   */\n  string data[]    = {\"ab\", \"abc\", \"xab\", \"axbc\", \"bc\"};\n  float  weights[] = {  .1,    .2,    .4,     .2,   .3};\n  string que = \"abc\";\n  uint n = 5, k = 3;\n\n  cout << \"Data:\" << endl << \"---\" << endl;\n  for (uint i = 0; i < n; i++) {\n    cout << data[i] << \"\\t\" << weights[i] << endl;\n  }\n  cout << endl;\n\n  /*\n   * -- - Index - --\n   */\n  GramGenFixedLen gramGen(2);   // gram length 2\n  Topk::Index topkIndex;\n  topkIndex.build(data, data + n, gramGen);\n  // topkIndex.save(\"index.bin\");\n  // topkIndex.load(\"index.bin\");\n\n  /*\n   * -- - Query - --\n   */\n  SimMetricEd simMetric(gramGen); // edit distance\n  Query query(que, simMetric, k);\n  Topk::IndexQuery topkIndexQuery(topkIndex, query);\n\n  uint topk[k];\n  Topk::Heap::getTopk(data, weights, topkIndex, query, topkIndexQuery, topk);\n\n  cout << \"Query: \" << query.str << \", k:\" << k << endl << endl;\n  cout << \"Results:\" << endl << \"---\" << endl;\n  for (uint i = 0; i < k; i++) {\n    cout << i + 1 << \" \" << data[topk[i]] << endl;\n  }\n\n  return 0;\n}\n", "encoding": "ascii"}