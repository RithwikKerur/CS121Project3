{"url": "http://flamingo.ics.uci.edu/releases/3.0/src/filtertree/statsgen.cc", "content": "/*\n  $Id: statsgen.cc 5146 2010-03-24 23:05:57Z abehm $\n\n  Copyright (C) 2010 by The Regents of the University of California\n\t\n  Redistribution of this file is permitted under\n  the terms of the BSD license.\n    \n  Date: 04/04/2008\n  Author: Alexander Behm <abehm (at) ics.uci.edu>\n*/\n\n#include \"statsgen.h\"\n#include \"util/input.h\"\n#include \"util/misc.h\"\n\nStatsGenConfig::\nStatsGenConfig() {\n  gramGen = NULL;\n  simMetric = NULL;\n  simThresh = 0.0f;\n\n  dictSizeStart = 0;\n  dictSizeStop = 0;\n  dictSizeStep = 0;  \n  fanout = 0;\n  maxStrLen = 0;\n  autoPartFilter = false;\n\n  numberQueries = 0;  \n  distinctQueries = 0;\n  queriesDistrib = QD_UNIFORM;\n  zipfSkew = 1;\n  numberRuns = 1;  \n\n  csfOpts = CSF_NONE;\n\n  outputFlags = OF_WORKLOADSTATS | OF_QUERYRESULTS | OF_QUERYSTATS;  \n  outputFilePrefix = string(\"output\");\n  \n  reductionStart = 0;\n  reductionStop = 0;\n  reductionStep = 1;\n  dictSamplingFrac = 0;\n  queriesSamplingFrac = 0;\n  sampleRatioCost = false;\n  \n  dropCachesBeforeEachQuery = false;\n  dropCachesBeforeBuildingIndex = false;\n  disableStreamBuffer = false;  \n  runBuffer = 500000;\n  scatteredOrg = false;\n  pho = PHO_NONE;\n  partSize = 0;\n  clusters = 0;  \n  avgStrLen = 0;\n  bufferSlots = 0;\n}\n\nvoid \nStatsGenConfig::\nclearFilters() { \n  for(unsigned i = 0; i < filterTypes.size(); i++) {\n    AbstractFilter* f = filterTypes.at(i);\n    if(f) delete f;\n  }\n  filterTypes.clear();\n}  \n\ntemplate<>\nStringContainerVector*\ncreateDefaultStringContainer(StatsGenConfig* config) {\n  return new StringContainerVector(config->autoPartFilter); \n}\n\ntemplate<>\nStringContainerRM*\ncreateDefaultStringContainer(StatsGenConfig* config) {\n  StringContainerRM* container = new StringContainerRM(config->pho, config->partSize, config->clusters, config->autoPartFilter);\n  container->createContainer(\"default.rm\", 4096, config->avgStrLen);\n  container->openContainer(\"default.rm\", config->disableStreamBuffer);\n  return container;\n}\n", "encoding": "ascii"}