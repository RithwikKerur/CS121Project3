{"url": "http://flamingo.ics.uci.edu/releases/4.0/src/sepia/src/perftest.cc", "content": "/*\n  $Id: perftest.cc 5767 2010-10-19 05:52:31Z abehm $\n\n  Copyright (C) 2007 by The Regents of the University of California\n\n  Redistribution of this file is permitted under the terms of the \n  BSD license\n\n  Date: 27/03/2007\n  Author: Rares Vernica <rares (at) ics.uci.edu>\n*/\n\n#include <sys/time.h>\n\n#include <iostream>\n\n#include \"sepia.h\"\n#include \"util/src/input.h\"\n\nusing namespace std;\n\nint main() \n{\n  const string \n    filenameDataset = \"dataset.txt\";\n\n  vector<string> data;\n  readString(data, filenameDataset);\n\n  Sepia sepia = Sepia(data, 2, 3);\n  \n  sepia.build();\n\n  string s = \"delmare\";\n  unsigned ed = 3;\n  float f, err;\n  unsigned r, time;\n  struct timeval tv1, tv2;\n  struct timezone tz;\n  \n  gettimeofday(&tv1, &tz);\n  f = sepia.getEstimateSelectivity(s,ed);\n  gettimeofday(&tv2, &tz);\n  time = (tv2.tv_sec - tv1.tv_sec) * 1000000 + (tv2.tv_usec - tv1.tv_usec);\n  r = sepia.getRealSelectivity(s, ed);\n  \n  if (r)\n    err = (f - r) / r;\n  else\n    err = f;\n\n  cout << f << \" \" << r << \" \" << err << \" \" << time / 1000 << \"ms\" << endl;\n}\n\n\n\n\n\n", "encoding": "ascii"}