{"url": "http://flamingo.ics.uci.edu/releases/4.1/src/filtertree/src/statsgen.cc", "content": "/*\n  $Id: statsgen.cc 5765 2010-10-19 04:36:20Z abehm $\n\n  Copyright (C) 2010 by The Regents of the University of California\n\t\n  Redistribution of this file is permitted under\n  the terms of the BSD license.\n    \n  Date: 04/04/2008\n  Author: Alexander Behm <abehm (at) ics.uci.edu>\n*/\n\n#include \"statsgen.h\"\n#include \"util/src/input.h\"\n#include \"util/src/misc.h\"\n\nStatsGenConfig::\nStatsGenConfig() {\n  gramGen = NULL;\n  simMetric = NULL;\n  simThresh = 0.0f;\n\n  dictSizeStart = 0;\n  dictSizeStop = 1;\n  dictSizeStep = 0;  \n  fanout = 0;\n  maxStrLen = 0;\n  autoPartFilter = false;\n  \n  numberQueries = 0;  \n  distinctQueries = 0;\n  queriesDistrib = QD_UNIFORM;\n  zipfSkew = 1;\n  numberRuns = 1;  \n\n  qt = QueryRange;\n  \n  pmf = PMF_NONE;\n\n  lcCharNum = 0;\n  hcBuckets = 0;\n\n  outputFlags = OF_WORKLOADSTATS | OF_QUERYRESULTS | OF_QUERYSTATS;  \n  outputFilePrefix = string(\"output\");\n  \n  reductionStart = 0;\n  reductionStop = 0;\n  reductionStep = 1;\n  dictSamplingFrac = 0;\n  queriesSamplingFrac = 0;\n  sampleRatioCost = false;\n  \n  dropCachesBeforeEachQuery = false;\n  dropCachesBeforeBuildingIndex = false;\n  disableStreamBuffer = false;  \n  runBuffer = 500000;\n  scatteredOrg = false;\n  pho = PHO_NONE; \n  avgStrLen = 0;\n  bufferSlots = 0; \n}\n\nvoid \nStatsGenConfig::\nclearFilters() { \n  for(unsigned i = 0; i < filterTypes.size(); i++) {\n    AbstractFilter* f = filterTypes.at(i);\n    if(f) delete f;\n  }\n  filterTypes.clear();\n}  \n\ntemplate<>\nStringContainerVector*\ncreateDefaultStringContainer(StatsGenConfig* config) {\n  return new StringContainerVector(config->pho, true); \n}\n\ntemplate<>\nStringContainerVector*\nopenStringContainer(StatsGenConfig* config) {\n  cout << \"ERROR: cannot open existing StringContainerVector\" << endl;\n  return new StringContainerVector(config->pho, true);\n}\n\ntemplate<>\nStringContainerRM*\ncreateDefaultStringContainer(StatsGenConfig* config) {\n  StringContainerRM* container = new StringContainerRM(config->pho, true);\n  container->createContainer(\"default.rm\", 8192, config->avgStrLen);\n  container->openContainer(\"default.rm\", config->disableStreamBuffer);\n  return container;\n}\n\n\ntemplate<>\nStringContainerRM*\nopenStringContainer(StatsGenConfig* config) {\n  StringContainerRM* strContainer = new StringContainerRM(false);\n  strContainer->openContainer(config->existingStringContainer.c_str(), config->disableStreamBuffer);\n  return strContainer;\n}\n", "encoding": "ascii"}