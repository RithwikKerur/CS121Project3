{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs122b-2018-spring-project3?version=18", "content": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  \n  \n\n\n  <head>\n    <title>\n      cs122b-2018-spring-project3 \u2013 Public\n    </title>\n      <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n      <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <!--[if IE]><script type=\"text/javascript\">\n      if (/^#__msie303:/.test(window.location.hash))\n        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));\n    </script><![endif]-->\n        <link rel=\"search\" href=\"/wiki/public/search\" />\n        <link rel=\"help\" href=\"/wiki/public/wiki/TracGuide\" />\n        <link rel=\"alternate\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3?version=18&amp;format=txt\" type=\"text/x-trac-wiki\" title=\"Plain Text\" />\n        <link rel=\"up\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3\" title=\"View latest version\" />\n        <link rel=\"next\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3?version=19\" title=\"Version 19\" />\n        <link rel=\"start\" href=\"/wiki/public/wiki\" />\n        <link rel=\"stylesheet\" href=\"/wiki/public/chrome/common/css/trac.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/wiki/public/chrome/common/css/wiki.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/wiki/public/chrome/tracwysiwyg/wysiwyg.css\" type=\"text/css\" />\n        <link rel=\"tracwysiwyg.stylesheet\" href=\"/wiki/public/chrome/common/css/trac.css\" /><link rel=\"tracwysiwyg.stylesheet\" href=\"/wiki/public/chrome/tracwysiwyg/editor.css\" />\n        <link rel=\"tracwysiwyg.base\" href=\"/wiki/public\" />\n        <link rel=\"prev\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3?version=17\" title=\"Version 17\" />\n        <link rel=\"shortcut icon\" href=\"/wiki/public/chrome/site/favicon.ico\" type=\"image/x-icon\" />\n        <link rel=\"icon\" href=\"/wiki/public/chrome/site/favicon.ico\" type=\"image/x-icon\" />\n    <style id=\"trac-noscript\" type=\"text/css\">.trac-noscript { display: none !important }</style>\n    <script type=\"text/javascript\">\n      var _tracwysiwyg={};\n    </script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/common/js/jquery.js\"></script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/common/js/babel.js\"></script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/common/js/trac.js\"></script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/common/js/search.js\"></script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/common/js/folding.js\"></script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/tracwysiwyg/wysiwyg.js\"></script>\n    <script type=\"text/javascript\">\n      jQuery(\"#trac-noscript\").remove();\n      jQuery(document).ready(function($) {\n        $(\".trac-autofocus\").focus();\n        $(\".trac-target-new\").attr(\"target\", \"_blank\");\n        setTimeout(function() { $(\".trac-scroll\").scrollToTop() }, 1);\n        $(\".trac-disable-on-submit\").disableOnSubmit();\n      });\n    </script>\n    <meta name=\"ROBOTS\" content=\"NOINDEX, NOFOLLOW\" />\n    <script type=\"text/javascript\">\n      jQuery(document).ready(function($) {\n        $(\"#content\").find(\"h1,h2,h3,h4,h5,h6\").addAnchor(_(\"Link to this section\"));\n        $(\"#content\").find(\".wikianchor\").each(function() {\n          $(this).addAnchor(babel.format(_(\"Link to #%(id)s\"), {id: $(this).attr('id')}));\n        });\n        $(\".foldable\").enableFolding(true, true);\n      });\n    </script>\n  </head>\n  <body>\n    <div id=\"banner\">\n      <div id=\"header\">\n        <a id=\"logo\" href=\"http://www.ics.uci.edu/\"><img src=\"/wiki/public/chrome/site/ics.jpg\" alt=\"ICS Logo\" height=\"67\" width=\"128\" /></a>\n      </div>\n      <form id=\"search\" action=\"/wiki/public/search\" method=\"get\">\n      </form>\n      <div id=\"metanav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/wiki/public/login\">Login</a></li><li><a href=\"/wiki/public/prefs\">Preferences</a></li><li class=\"last\"><a href=\"/wiki/public/about\">About Trac</a></li>\n    </ul>\n  </div>\n    </div>\n    <div id=\"mainnav\" class=\"nav\">\n  </div>\n    <div id=\"main\">\n      <div id=\"pagepath\" class=\"noprint\">\n  <a class=\"pathentry first\" title=\"View WikiStart\" href=\"/wiki/public/wiki\">wiki:</a><a class=\"pathentry\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3\" title=\"View cs122b-2018-spring-project3\">cs122b-2018-spring-project3</a>\n</div>\n      <div id=\"ctxtnav\" class=\"nav\">\n        <h2>Context Navigation</h2>\n        <ul>\n          <li class=\"first\"><span>&larr; <a class=\"prev\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3?version=17\" title=\"Version 17\">Previous Version</a></span></li><li><a href=\"/wiki/public/wiki/cs122b-2018-spring-project3\" title=\"View latest version\">View Latest Version</a></li><li class=\"last\"><span><a class=\"next\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3?version=19\" title=\"Version 19\">Next Version</a> &rarr;</span></li>\n        </ul>\n        <hr />\n      </div>\n    <div id=\"content\" class=\"wiki\">\n        <br />\n        <table id=\"info\" summary=\"Revision info\">\n          <tr><th scope=\"row\">Version 18 (modified by chenli, <a class=\"timeline\" href=\"/wiki/public/timeline?from=2018-05-08T09%3A43%3A28-07%3A00&amp;precision=second\" title=\"See timeline at May 8, 2018 9:43:28 AM\">17 months ago</a>)\n             (<a href=\"/wiki/public/wiki/cs122b-2018-spring-project3?action=diff&amp;version=18\">diff</a>)</th></tr>\n          <tr><td class=\"message\">\n            <p>\n--\n</p>\n\n          </td></tr>\n        </table>\n      <div class=\"wikipage searchable\">\n        \n          <div id=\"wikipage\" class=\"trac-content\"><p>\n</p><div class=\"wiki-toc\">\n<ol>\n  <li>\n    <a href=\"#CS122BProject3:reCaptchaHTTPSStoredProcedureXMLParsing\">CS122B Project 3: reCaptcha, HTTPS, Stored Procedure, XML Parsing</a>\n  </li>\n  <li>\n    <a href=\"#Tasks\">Tasks</a>\n    <ol>\n      <li>\n        <a href=\"#Task1Optional:RegisteradomainnameforFabflix\">Task 1 (Optional): Register a domain name for Fabflix</a>\n      </li>\n      <li>\n        <a href=\"#ImprovethesecurityoftheFabflixwebsite\">Improve the security of the Fabflix website</a>\n      </li>\n      <li>\n        <a href=\"#Task2:AddingreCAPTHAtoProject2\">Task 2: Adding reCAPTHA to Project 2</a>\n      </li>\n      <li>\n        <a href=\"#Task3:AddingHTTPStoProject2\">Task 3: Adding HTTPS to Project 2</a>\n      </li>\n      <li>\n        <a href=\"#Task4:Usepreparedstatementsinyourservercodewhensendingaquery\">Task 4: Use prepared statements in your server code when sending a query</a>\n      </li>\n      <li>\n        <a href=\"#Task5:UpdateuserpasswordindatabasefromplaintexttoEncryptedpassword\">Task 5: Update user password in database from plain text to Encrypted \u2026</a>\n      </li>\n      <li>\n        <a href=\"#Task6:ImplementingaDashboardusingStoredProcedure\">Task 6: Implementing a Dashboard using Stored Procedure</a>\n        <ol>\n          <li>\n            <a href=\"#Remarks:\">Remarks:</a>\n          </li>\n        </ol>\n      </li>\n      <li>\n        <a href=\"#Task7:ImportinglargeXMLdatafilesintotheFabflixdatabase\">Task 7: Importing large XML data files into the Fabflix database</a>\n        <ol>\n          <li>\n            <a href=\"#Requirements:\">Requirements:</a>\n          </li>\n          <li>\n            <a href=\"#Remarks:1\">Remarks:</a>\n          </li>\n        </ol>\n      </li>\n      <li>\n        <a href=\"#DeploymentOnAWSandSubmissions\">Deployment On AWS and Submissions</a>\n      </li>\n      <li>\n        <a href=\"#DemonstrationandGradingCriteria\">Demonstration and Grading Criteria</a>\n      </li>\n    </ol>\n  </li>\n</ol>\n</div><p>\n</p>\n<h1 id=\"CS122BProject3:reCaptchaHTTPSStoredProcedureXMLParsing\">CS122B Project 3: reCaptcha, HTTPS, Stored Procedure, XML Parsing</h1>\n<p>\n<strong>Due: Week 7 Thursday, 05/17/2018 11:45 pm. Due on Github.</strong>\n</p>\n<h1 id=\"Tasks\">Tasks</h1>\n<ol><li>(Optional) <a class=\"wiki\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3#RegisterDomain\">Register a domain name for Fabflix</a>\n</li><li><a class=\"wiki\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3#reCAPTCHA\">Adding reCAPTCHA to Project 2</a>\n</li><li><a class=\"wiki\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3#HTTPS\">Adding HTTPS to Project 2</a>\n</li><li><a class=\"wiki\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3#PreparedStatement\">Use PreparedStatement in the query</a>\n</li><li><a class=\"wiki\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3#Encryption\">Update Encrypted password in database</a>\n</li><li><a class=\"wiki\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3#Dashboard\">Implementing a Dashboard using Stored Procedure</a>\n</li><li><a class=\"wiki\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3#XMLParsing\">Importing large XML data files into the Fabflix database</a>\n</li></ol><hr />\n<p>\n<span id=\"RegisterDomain\"></span>\n</p>\n<h2 id=\"Task1Optional:RegisteradomainnameforFabflix\">Task 1 (Optional): Register a domain name for Fabflix</h2>\n<p>\nIf you are tired of using an IP address to visit your AWS instance and want to make it \"real,\" you can register a domain name from a registrar company such as <a class=\"ext-link\" href=\"http://godaddy.com\"><span class=\"icon\">\u200b</span>Godaddy</a>. Then use the AWS instance to do the hosting.  Now we are open for real business!\n</p>\n<hr />\n<h2 id=\"ImprovethesecurityoftheFabflixwebsite\">Improve the security of the Fabflix website</h2>\n<p>\nA real business needs to treat security issues seriously. In the following 4 tasks, you will improve the security of your website in project 2 in various ways: \n</p>\n<ul><li>reCAPTCHA enhances security by preventing bots and only allowing real human users. \n</li><li>HTTPS enhances security by securing the process when the client sends sensitive information to the server.\n</li><li>Encrypting the password improves security in the case of your database gets attacked, the hacker won't be able to get the real sensitive information, such as password.\n</li><li>Use prepared statements can help prevent a very common kind of attack: SQL injection attack.\n</li></ul><p>\n<span id=\"reCAPTCHA\"></span>\n</p>\n<h2 id=\"Task2:AddingreCAPTHAtoProject2\">Task 2: Adding reCAPTHA to Project 2</h2>\n<p>\nImprove the user-authentication process of project 2 by adding a module that verifies real users and blocks bots.\n</p>\n<ol><li>Go to <a class=\"ext-link\" href=\"https://github.com/UCI-Chenli-teaching/project3-recaptcha-example\"><span class=\"icon\">\u200b</span>project3-recaptcha-example</a>,  follow the README instructions on the Github Page the code.\n</li><li>Get a <a class=\"ext-link\" href=\"https://www.google.com/recaptcha/intro/index.html\"><span class=\"icon\">\u200b</span>reCAPTCHA</a> from Google. Add <tt> public IP of your AWS instance </tt> and <tt> localhost </tt> to the domain.  You will get a <em>secret key</em> and a <em>site key</em>.\n</li><li>Test the page <a class=\"ext-link\" href=\"http://localhost:8080/project3-recaptcha-example\"><span class=\"icon\">\u200b</span>http://localhost:8080/project3-recaptcha-example</a> to see if reCAPTHA works.\n</li><li>Apply the same logic to your project 2 by making the necessary changes on the login frontend and backend logic.\n</li></ol><p>\nNote that if you AWS instance is restarted, the public IP will change, and you need to add the new IP to Google reCAPTHA console as well.\n</p>\n<p>\n<span id=\"HTTPS\"></span>\n</p>\n<h2 id=\"Task3:AddingHTTPStoProject2\">Task 3: Adding HTTPS to Project 2</h2>\n<p>\nHTTPS makes your website substantially more secure from hacking and other security breaches. HTTPS makes sure that the client can safely send sensitive data to your server without the risk of leaking the data in the transfer process.\n</p>\n<p>\nSee this <a class=\"ext-link\" href=\"http://tecadmin.net/configure-ssl-certificate-in-tomcat/\"><span class=\"icon\">\u200b</span>reference</a> on how to configure Tomcat to enable HTTPS connections.\n</p>\n<p>\nStep 1: On your AWS instance, use the following command to create a keystore to be used by Tomcat. Remember what password you use for the keystore. Our example uses \"changeit\".\n</p>\n<p>\nIn the following steps, \"/home/ubuntu/tomcat\" is an example of your tomcat installation directory on AWS. You need to replace it with your own directory.\n</p>\n<pre class=\"wiki\">sudo keytool -genkey -alias fabflix -keyalg RSA -keystore /home/ubuntu/tomcat/keystore\n\n</pre><p>\nStep 2: Uncomment the <tt>Connector</tt> tag in <tt>/home/ubuntu/tomcat/conf/server.xml</tt>, which has port=\"8443\" and defines an SSL HTTP/1.1 connector. Modify it and use the following configuration:\n</p>\n<pre class=\"wiki\">&lt;Connector port=\"8443\" \n protocol=\"HTTP/1.1\"\n connectionTimeout=\"20000\"\n redirectPort=\"8443\"\n SSLEnabled=\"true\"\n scheme=\"https\"\n secure=\"true\"\n sslProtocol=\"TLS\"\n keystoreFile=\"/home/ubuntu/tomcat/keystore\"\n keystorePass=\"changeit\" /&gt;\n</pre><p>\nStep 3: Restart tomcat:\n</p>\n<pre class=\"wiki\">go to your tomcat directory. Do \"./bin/shutdown.sh\" then \"./bin/startup.sh\"\n</pre><p>\nAt this point, <a class=\"ext-link\" href=\"https://[YOUR_IP]:8443/manager/html\"><span class=\"icon\">\u200b</span>https://[YOUR_IP]:8443/manager/html</a> should also an entry point to Tomcat. Note that it uses the secure kind of http (https) and a different port, which is 8443 by default. Make sure to open the port 8443 on your AWS instance.\n</p>\n<p>\nStep 4: Limit a Tomcat application to HTTPS only. Currently, <a class=\"ext-link\" href=\"http://YOUR_IP:8080/manager/html\"><span class=\"icon\">\u200b</span>http://YOUR_IP:8080/manager/html</a> entry (which uses HTTP) is still open. In order to disable HTTP and enable HTTPS only, change your TomcatFormReCaptcha application's web.xml by adding the following code before the \"&lt;/web-app&gt;\" tag:\n</p>\n<pre class=\"wiki\">&lt;security-constraint&gt;\n &lt;web-resource-collection&gt;\n    &lt;web-resource-name&gt;HTTPSOnly&lt;/web-resource-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n &lt;/web-resource-collection&gt;\n &lt;user-data-constraint&gt;\n    &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\n &lt;/user-data-constraint&gt;\n&lt;/security-constraint&gt;\n</pre><p>\nThis setting will force all HTTP requests to this application to get redirected to the corresponding HTTPS URL. Reload the application to see if the redirection works for the URL <a class=\"ext-link\" href=\"http://YOUR_IP:8080/TomcatFormReCaptcha/\"><span class=\"icon\">\u200b</span>http://YOUR_IP:8080/TomcatFormReCaptcha/</a>. Read this <a class=\"ext-link\" href=\"http://www.itworld.com/article/2769041/development/how-to-configure-tomcat-to-always-require-https.html\"><span class=\"icon\">\u200b</span>reference</a> on more details about how to configure Tomcat to always require HTTPS.\n</p>\n<p>\nStep 5: Make necessary changes to your project 2 to use HTTPS always with HTTP disabled.\n</p>\n<p>\n<span id=\"PreparedStatement\"></span>\n</p>\n<h2 id=\"Task4:Usepreparedstatementsinyourservercodewhensendingaquery\">Task 4: Use prepared statements in your server code when sending a query</h2>\n<p>\nPreviously, we generate the SQL query by concatenating the parameter value with a template string, then it will be passed to the database to be compiled and executed. This string manipulation approach leaves us very vulnerable to <a class=\"ext-link\" href=\"https://www.wordfence.com/learn/how-to-prevent-sql-injection-attacks/\"><span class=\"icon\">\u200b</span>SQL Injection Attack</a>. We can prevent this by using <tt> PreparedStatement </tt>. PreparedStatement  pre-compiles the sql template and when database executes the query, it treats the parameters as values, without messing it with the SQL query itself.\n</p>\n<p>\nYou can learn PreparedStatement  at <a class=\"ext-link\" href=\"https://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html\"><span class=\"icon\">\u200b</span>Using Prepared Statements</a> and <a class=\"ext-link\" href=\"http://tutorials.jenkov.com/jdbc/preparedstatement.html\"><span class=\"icon\">\u200b</span>JDBC: PreparedStatement - Jenkov Tutorials</a>\n</p>\n<p>\nChange all the queries in your project 2 involving specifying any parameter from user input to use  <tt> PreparedStatement </tt>.\n</p>\n<p>\n<span id=\"Encryption\"></span>\n</p>\n<h2 id=\"Task5:UpdateuserpasswordindatabasefromplaintexttoEncryptedpassword\">Task 5: Update user password in database from plain text to Encrypted password</h2>\n<p>\nThis task will show you how update the plain text password to encrypted password and store it in the database. The client (frontend) will still pass the plain text password to the server, (this is okay because we have HTTPS), the server will then compare the plain text password with the encrypted password stored in the database.\n</p>\n<p>\nThe current moviedb.customers table stores plain text password. We have provided you a Java program you can directly run to update them with the encrypted password. We use <a class=\"ext-link\" href=\"http://www.jasypt.org/\"><span class=\"icon\">\u200b</span>Java Simplified Encryption</a> library to do the encryption. \n</p>\n<ol><li>Go to <a class=\"ext-link\" href=\"https://github.com/UCI-Chenli-teaching/project3-encryption-example\"><span class=\"icon\">\u200b</span>project3-encryption-example</a> to download and deploy the project.\n</li><li>On your local machine, import the project into Eclipse, and run <tt> UpdateSecurePassword.java </tt> This program will read all the passwords from the existing moviedb.customers table, encrypt them, and update the table with the encrypted passwords. \n</li><li>One AWS, also run <tt> UpdateSecurePassword.java </tt> to update the database on AWS. Note that you should only run this program <strong>once</strong>. If you need to re-run it, you need to re-populate the customers table with the plain text password.\n</li><li><tt> VerifyPassword.java </tt> shows you how to verify the user's email and password against the encrypted password stored in the database.\n</li><li>Change your login modules in project 2 to verify user email/password based on the encrypted password.\n</li></ol><p>\nIf you are interested in how the encryption process is done, read <a class=\"ext-link\" href=\"http://www.jasypt.org/howtoencryptuserpasswords.html\"><span class=\"icon\">\u200b</span>How to encrypt user passwords</a>. For more in-depth discussion about how to store password properly, you can read <a class=\"ext-link\" href=\"https://crackstation.net/hashing-security.htm\"><span class=\"icon\">\u200b</span>Salted Password Hashing - Doing it Right</a>\n</p>\n<hr />\n<p>\n<span id=\"Dashboard\"></span>\n</p>\n<h2 id=\"Task6:ImplementingaDashboardusingStoredProcedure\">Task 6: Implementing a Dashboard using Stored Procedure</h2>\n<p>\nStep 1: To store information about Fabflix's employees, create a new table called <strong>  employees</strong>   with the following attributes:\n</p>\n<pre class=\"wiki\">email varchar(50) primary key\npassword varchar(20) not null\nfullname varchar(100)\n</pre><p>\nStep 2: Insert an employee with <strong>classta@<em>email.edu</em></strong>, <strong>classta</strong>, and <strong>TA CS122B</strong> as its email, password, and fullname respectively. Use the same technique in the encrypted password section to encrypt the password here.\n</p>\n<p>\nStep 3: Setup an entry point <a class=\"ext-link\" href=\"https://YOUR_IP:8443/fabflix/_dashboard\"><span class=\"icon\">\u200b</span>https://YOUR_IP:8443/fabflix/_dashboard</a>   that uses HTTPS. It allows employees to login with a valid email and password to access a dashboard.\n</p>\n<p>\nStep 4: Allow a logged-in employee to do the following operations using this dashboard.  (You can reuse part of your code in Project 1.)\n</p>\n<ul><li>Inserting a new star into the database. Star name is required, birth year is optional.\n</li><li>Providing the metadata of the database; in particular, show the name of each table and, for each table, each attribute and its type.\n</li></ul><p>\nStep 5: Write a stored procedure called <em>  add_movie</em>  .  Its arguments include all the required fields of the movie, a <em>  single</em>   star (star name) and a <em>  single</em>   genre (genre name). (The reason we don't want to pass multiple stars and genres is  that the current MySQL implementation doesn't allow stored procedures to  take an array argument.) \n</p>\n<p>\nStep 6: In the dashboard implemented in Step 4, add one more feature that allows an employee to add information related to a movie, including a single star and a single genre.  The UI should allow the employee to provide the information, and the backend should call the stored procedure <em> add_movie</em>  created above.\n</p>\n<h3 id=\"Remarks:\">Remarks:</h3>\n<ol><li>The added new stars and movies should be accessible and searchable from the project 2 webpage. \n</li></ol><ol start=\"2\"><li>When adding a new star, if there's an existing star with the same name and birth year, you can treat them as a new person and create a new record.\n</li></ol><ol start=\"3\"><li>When adding a new movie:\n<ul><li>If the star or genre already exists, you should link them to the movie. In the case of two star records with the same name, you can link any of them.\n</li><li>If the star or genre doesn't exist, you should create it and then link it to to the movie. (star birth year is optional and can be leaved to null)\n</li><li>All necessary <tt> stars_in_movies </tt> and <tt> genres_in_movies </tt> records should also be created. The procedure should output informative status messages to the user as it performs the task\n</li><li>A movie is identified by (title, year, director). For example, a movie with same title and year, but not same director is considered as a different movie.\n</li><li>If the movie already exists, you should show a corresponding message, and no changes to the database are made.\n</li></ul></li></ol><ol start=\"4\"><li>The user does not provide an ID for star, movie, or genre. Those ids should be managed by your stored procedure. To implement this in your store procedure, you could: \n<ul><li>Use \"select max(id) from TABLE\" to get the \"largest id\" according to the alphabetic order, then \"parse\" it and use it to generate a unique id;\n</li><li> Use a new \"helper table\" to store the next available integer and increment it each time for the next unique id;\nChanging the table schema to implement this feature is not allowed.\n</li></ul></li></ol><hr />\n<p>\n<span id=\"XMLParsing\"></span>\n</p>\n<h2 id=\"Task7:ImportinglargeXMLdatafilesintotheFabflixdatabase\">Task 7: Importing large XML data files into the Fabflix database</h2>\n<p>\nThe goal of this task is to use a new source of data to increase the content size of the Fabflix movie database.\n</p>\n<p>\nYou can find the raw version of this new data source in <a class=\"attachment\" href=\"/wiki/public/attachment/wiki/cs122b-2018-winter-project3/stanford-movies.tar.gz\" title=\"Attachment 'stanford-movies.tar.gz' in cs122b-2018-winter-project3\">this package</a><a class=\"trac-rawlink\" href=\"/wiki/public/raw-attachment/wiki/cs122b-2018-winter-project3/stanford-movies.tar.gz\" title=\"Download\">\u200b</a>. The main source of these files is <a class=\"ext-link\" href=\"http://infolab.stanford.edu/pub/movies/dtd.html\"><span class=\"icon\">\u200b</span>here</a>. Before starting to use these files, it is highly recommended to check the main source and read <a class=\"ext-link\" href=\"http://infolab.stanford.edu/pub/movies/doc.html\"><span class=\"icon\">\u200b</span>its documentation</a> to get a better understanding of this dataset.\n</p>\n<p>\nA DTD File is a special XML file that describes the structure of an XML file. Use these DTD files to locate the information you're looking for in the XML files. A good introduction to DTD files can be found at <a class=\"ext-link\" href=\"https://www.xmlfiles.com/dtd/dtd-intro/\"><span class=\"icon\">\u200b</span>https://www.xmlfiles.com/dtd/dtd-intro/</a>.\n</p>\n<p>\nFor example a <tt>&lt;dirid /&gt;</tt> tag will be defined as <tt>&lt;!ELEMENT dirid &gt;</tt>  in the DTD file. The comments along with the DTD declarations are very useful to identify what field is used for. Try to find relations between the XML files and correlate the entities together with the help of the DTD files.\n</p>\n<p>\nParticularly, you are required to parse the files <tt>mains243.xml</tt> and <tt>casts124.xml</tt> to add new <tt>movies</tt>, <tt>stars</tt>, and <tt>genres</tt> to the Fabflix database (i.e., on top of what you already have in the database). If needed, the <tt>stars_in_movies</tt> and <tt>genres_in_movies</tt> tables should also be updated accordingly. Also, for each XML file in this package, there is a DTD file to be used to understand/validate the structure of that XML file.\n</p>\n<p>\nPlease note that in this project it is expected that, if needed, you make reasonable decisions on how to use this new data source. The files are not clean and you may find inconsistencies in them. In such cases, do not be surprised. Make reasonable decisions. Such issues are very common in many real applications.  You can use the following high-level description regarding the mapping of the XML tag attributes to the Fabflix database schema that was given in <a href=\"https://grape.ics.uci.edu/wiki/public/wiki/cs122b-2018-winter-project1\">project 1</a>.\n</p>\n<p>\nAs shown in Figure 1, the root tag in the file <tt>mains243.xml</tt> is <tt>&lt;movies&gt;</tt>, which consists of several instances of the tag <tt>&lt;directorfilms&gt;</tt>. Each <tt>&lt;directorfilms&gt;</tt> contains the information of a director, along with his/her movies, each movie being an instance of the tag <tt>&lt;film&gt;</tt>. It is clear where to find the values of all the columns of the movies table. Furthermore, each &lt;film&gt; has a list of <em>assigned categories </em>in a <tt>&lt;cats&gt;</tt> tag (i.e., each category as a <tt>&lt;cat&gt;</tt> tag). The value of the <tt>&lt;cat&gt;</tt> tag corresponds to the genre name in the <tt>genres</tt> table of the Fabflix database. If a <tt>&lt;cat&gt;</tt> does not exist in the <tt>genres</tt> table, a new genre must be added, and the <tt>genres_in_movies</tt> table must be updated accordingly.\n</p>\n<p>\n<a style=\"padding:0; border:none\" href=\"/wiki/public/attachment/wiki/cs122b-2018-winter-project3/films_structure.png\"><img src=\"/wiki/public/raw-attachment/wiki/cs122b-2018-winter-project3/films_structure.png\" /></a>  <strong>Figure 1.</strong>\n</p>\n<p>\nFor updating the <tt>stars</tt> and <tt>stars_in_movies</tt> tables, you should use the content of the file <tt>casts124.xml</tt>, which is shown in a high-level view in Figure 2.\n</p>\n<p>\n<a style=\"padding:0; border:none\" href=\"/wiki/public/attachment/wiki/cs122b-2018-winter-project3/casts_structure.png\"><img src=\"/wiki/public/raw-attachment/wiki/cs122b-2018-winter-project3/casts_structure.png\" /></a> <strong>Figure 2.</strong>\n</p>\n<p>\nSimilar to the <tt>&lt;movies&gt;</tt> tag, the content of the <tt>&lt;casts&gt;</tt> tag, which is the root of the file <tt>casts124.xml</tt>, is also grouped by the movie directors. You can find the information of the star-movie connections in the instances of the <tt>&lt;m&gt;</tt> tag. In this tag, the film is identified using the <tt>&lt;f&gt;</tt> tag, which links to the <tt>&lt;fid&gt; </tt>tag of the <tt>&lt;film&gt;</tt> tag in the main file. Tag <tt>&lt;m&gt;</tt> also gives you the <tt>stagename</tt> of the actor of this relation in a tag called <tt>&lt;a&gt;</tt>. The <tt>stagename</tt> helps you connect this <tt>stars_in_movies</tt> record to the right star record. The stars to be added to the <tt>stars</tt> table are parsed out of the file <tt>actors63.xml</tt>.\n</p>\n<p>\nAlthough there are many libraries for parsing XML, there are two main approaches towards this problem: (1) SAX: event-based XML parsing and (2) DOM: using a tree-based object model for parsing XML. In SAX, the library <strong>moves</strong> through the XML tags and makes calls to <em>event-handler functions</em> that are implemented by the developer. In DOM, the developer is free to move on <em>a tree of objects</em> that is made available by the library, each object corresponding to an <em>entity</em> in the XML tree (e.g., a tag). You are free to choose between either of SAX or DOM approaches to parse the document. For examples, look <a class=\"ext-link\" href=\"http://totheriver.com/learn/xml/code/SAXParserExample.java\"><span class=\"icon\">\u200b</span>here for SAX</a> and <a class=\"ext-link\" href=\"http://totheriver.com/learn/xml/code/DomParserExample.java\"><span class=\"icon\">\u200b</span>here for DOM</a>. You can find <a class=\"ext-link\" href=\"http://totheriver.com/learn/xml/xmltutorial.html#7\"><span class=\"icon\">\u200b</span>here</a>, the instructions and files needed to run these examples.\n</p>\n<h3 id=\"Requirements:\">Requirements:</h3>\n<ul><li><strong>XML parsing</strong>: You should write a Java program to parse the XML files and insert the new data to the existing moviedb database. The new movie data should be searchable in the project 2 search page.\n</li><li><strong>Performance Tuning</strong>: A naive implementation of your program is expected to be slow. Come up with at least two optimization techniques to reduce the running time of your program. Write an itemized, brief report accessible to describe your optimizations, and the corresponding time reductions. Put this optimization report in your Github repository in a text format, such as plain text (.txt), markdown (.md), or PDF.\n</li></ul><p>\n<br />\n</p>\n<h3 id=\"Remarks:1\">Remarks:</h3>\n<ul><li>In case of inconsistencies between the provided data with respect to the relational schema, make sure your program does not crash. The inconsistent data must be reported to the user (print the element name and node value) and your program should resume processing.\n</li><li>Use NULL for missing values when inserting records into the database.\n</li><li>For inconsistent values with the schema (like non-integer values for volume or roman numbers ) you can treat them as NULL.\n</li><li>For entries with multiple ISBN/publishers/etc, only use one of them.\n</li><li>Keep track of duplicate entries like multiple occurrences of same movies/actors and insert them only once.\n</li><li>Make sure the encoding of your parser is ISO-8859-1. You can ignore any special character that cannot be handled with this encoding.\n</li></ul><hr />\n<p>\n<span id=\"DeploymentOnAWS\"></span>\n</p>\n<h2 id=\"DeploymentOnAWSandSubmissions\">Deployment On AWS and Submissions</h2>\n<p>\nThe same as before, use Github for your project 3 code and deploy on AWS.\n</p>\n<hr />\n<p>\n<span id=\"Grading\"></span>\n</p>\n<h2 id=\"DemonstrationandGradingCriteria\">Demonstration and Grading Criteria</h2>\n<p>\nThe same ss before, <strong>You are required to demonstrate  this project</strong>, and time is <strong>15 minutes</strong> per team. Please refer to this [Grading Rubric TBA] for detailed criteria.\n</p>\n</div>\n          \n          \n        \n        \n      </div>\n      \n    <div id=\"attachments\">\n        <h3 class=\"foldable\">Attachments <span class=\"trac-count\">(4)</span></h3>\n        <div>\n          <ul>\n              <li>\n    <a href=\"/wiki/public/attachment/wiki/cs122b-2018-spring-project3/employees.xml\" title=\"View attachment\">employees.xml</a><a href=\"/wiki/public/raw-attachment/wiki/cs122b-2018-spring-project3/employees.xml\" class=\"trac-rawlink\" title=\"Download\">\u200b</a>\n       (<span title=\"450 bytes\">450 bytes</span>) -\n      added by <em>chenli</em> <a class=\"timeline\" href=\"/wiki/public/timeline?from=2018-05-09T22%3A15%3A29-07%3A00&amp;precision=second\" title=\"See timeline at May 9, 2018 10:15:29 PM\">17 months ago</a>.\n                <q>XML file</q>\n              </li>\n              <li>\n    <a href=\"/wiki/public/attachment/wiki/cs122b-2018-spring-project3/Employee.java\" title=\"View attachment\">Employee.java</a><a href=\"/wiki/public/raw-attachment/wiki/cs122b-2018-spring-project3/Employee.java\" class=\"trac-rawlink\" title=\"Download\">\u200b</a>\n       (<span title=\"1094 bytes\">1.1 KB</span>) -\n      added by <em>chenli</em> <a class=\"timeline\" href=\"/wiki/public/timeline?from=2018-05-09T22%3A15%3A44-07%3A00&amp;precision=second\" title=\"See timeline at May 9, 2018 10:15:44 PM\">17 months ago</a>.\n              </li>\n              <li>\n    <a href=\"/wiki/public/attachment/wiki/cs122b-2018-spring-project3/DomParserExample.java\" title=\"View attachment\">DomParserExample.java</a><a href=\"/wiki/public/raw-attachment/wiki/cs122b-2018-spring-project3/DomParserExample.java\" class=\"trac-rawlink\" title=\"Download\">\u200b</a>\n       (<span title=\"4471 bytes\">4.4 KB</span>) -\n      added by <em>chenli</em> <a class=\"timeline\" href=\"/wiki/public/timeline?from=2018-05-09T22%3A15%3A58-07%3A00&amp;precision=second\" title=\"See timeline at May 9, 2018 10:15:58 PM\">17 months ago</a>.\n                <q>DOM Parser</q>\n              </li>\n              <li>\n    <a href=\"/wiki/public/attachment/wiki/cs122b-2018-spring-project3/SAXParserExample.java\" title=\"View attachment\">SAXParserExample.java</a><a href=\"/wiki/public/raw-attachment/wiki/cs122b-2018-spring-project3/SAXParserExample.java\" class=\"trac-rawlink\" title=\"Download\">\u200b</a>\n       (<span title=\"2921 bytes\">2.9 KB</span>) -\n      added by <em>chenli</em> <a class=\"timeline\" href=\"/wiki/public/timeline?from=2018-05-09T22%3A16%3A10-07%3A00&amp;precision=second\" title=\"See timeline at May 9, 2018 10:16:10 PM\">17 months ago</a>.\n                <q>SAX parser</q>\n              </li>\n          </ul>\n          <p>\n            Download all attachments as: <a rel=\"nofollow\" href=\"/wiki/public/zip-attachment/wiki/cs122b-2018-spring-project3/\">.zip</a>\n          </p>\n        </div>\n    </div>\n\n    </div>\n    <div id=\"altlinks\">\n      <h3>Download in other formats:</h3>\n      <ul>\n        <li class=\"last first\">\n          <a rel=\"nofollow\" href=\"/wiki/public/wiki/cs122b-2018-spring-project3?version=18&amp;format=txt\">Plain Text</a>\n        </li>\n      </ul>\n    </div>\n    </div>\n    <div id=\"footer\" lang=\"en\" xml:lang=\"en\"><hr />\n      <a id=\"tracpowered\" href=\"http://trac.edgewall.org/\"><img src=\"/wiki/public/chrome/common/trac_logo_mini.png\" height=\"30\" width=\"107\" alt=\"Trac Powered\" /></a>\n      <p class=\"left\">Powered by <a href=\"/wiki/public/about\"><strong>Trac 1.0.13</strong></a><br />\n        By <a href=\"http://www.edgewall.org/\">Edgewall Software</a>.</p>\n      <p class=\"right\">Visit the Trac open source project at<br /><a href=\"http://trac.edgewall.org/\">http://trac.edgewall.org/</a></p>\n    </div>\n  </body>\n</html>", "encoding": "utf-8"}