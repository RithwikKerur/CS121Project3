{"url": "https://grape.ics.uci.edu/wiki/public/wiki/cs221-2019-spring-project2?version=1", "content": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\n  \n  \n\n\n  <head>\n    <title>\n      cs221-2019-spring-project2 \u2013 Public\n    </title>\n      <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n      <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\n    <!--[if IE]><script type=\"text/javascript\">\n      if (/^#__msie303:/.test(window.location.hash))\n        window.location.replace(window.location.hash.replace(/^#__msie303:/, '#'));\n    </script><![endif]-->\n        <link rel=\"search\" href=\"/wiki/public/search\" />\n        <link rel=\"help\" href=\"/wiki/public/wiki/TracGuide\" />\n        <link rel=\"alternate\" href=\"/wiki/public/wiki/cs221-2019-spring-project2?version=1&amp;format=txt\" type=\"text/x-trac-wiki\" title=\"Plain Text\" />\n        <link rel=\"up\" href=\"/wiki/public/wiki/cs221-2019-spring-project2\" title=\"View latest version\" />\n        <link rel=\"next\" href=\"/wiki/public/wiki/cs221-2019-spring-project2?version=2\" title=\"Version 2\" />\n        <link rel=\"start\" href=\"/wiki/public/wiki\" />\n        <link rel=\"stylesheet\" href=\"/wiki/public/chrome/common/css/trac.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/wiki/public/chrome/common/css/wiki.css\" type=\"text/css\" /><link rel=\"stylesheet\" href=\"/wiki/public/chrome/tracwysiwyg/wysiwyg.css\" type=\"text/css\" />\n        <link rel=\"tracwysiwyg.stylesheet\" href=\"/wiki/public/chrome/common/css/trac.css\" /><link rel=\"tracwysiwyg.stylesheet\" href=\"/wiki/public/chrome/tracwysiwyg/editor.css\" />\n        <link rel=\"tracwysiwyg.base\" href=\"/wiki/public\" />\n        <link rel=\"shortcut icon\" href=\"/wiki/public/chrome/site/favicon.ico\" type=\"image/x-icon\" />\n        <link rel=\"icon\" href=\"/wiki/public/chrome/site/favicon.ico\" type=\"image/x-icon\" />\n    <style id=\"trac-noscript\" type=\"text/css\">.trac-noscript { display: none !important }</style>\n    <script type=\"text/javascript\">\n      var _tracwysiwyg={};\n    </script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/common/js/jquery.js\"></script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/common/js/babel.js\"></script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/common/js/trac.js\"></script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/common/js/search.js\"></script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/common/js/folding.js\"></script>\n      <script type=\"text/javascript\" charset=\"utf-8\" src=\"/wiki/public/chrome/tracwysiwyg/wysiwyg.js\"></script>\n    <script type=\"text/javascript\">\n      jQuery(\"#trac-noscript\").remove();\n      jQuery(document).ready(function($) {\n        $(\".trac-autofocus\").focus();\n        $(\".trac-target-new\").attr(\"target\", \"_blank\");\n        setTimeout(function() { $(\".trac-scroll\").scrollToTop() }, 1);\n        $(\".trac-disable-on-submit\").disableOnSubmit();\n      });\n    </script>\n    <meta name=\"ROBOTS\" content=\"NOINDEX, NOFOLLOW\" />\n    <script type=\"text/javascript\">\n      jQuery(document).ready(function($) {\n        $(\"#content\").find(\"h1,h2,h3,h4,h5,h6\").addAnchor(_(\"Link to this section\"));\n        $(\"#content\").find(\".wikianchor\").each(function() {\n          $(this).addAnchor(babel.format(_(\"Link to #%(id)s\"), {id: $(this).attr('id')}));\n        });\n        $(\".foldable\").enableFolding(true, true);\n      });\n    </script>\n  </head>\n  <body>\n    <div id=\"banner\">\n      <div id=\"header\">\n        <a id=\"logo\" href=\"http://www.ics.uci.edu/\"><img src=\"/wiki/public/chrome/site/ics.jpg\" alt=\"ICS Logo\" height=\"67\" width=\"128\" /></a>\n      </div>\n      <form id=\"search\" action=\"/wiki/public/search\" method=\"get\">\n      </form>\n      <div id=\"metanav\" class=\"nav\">\n    <ul>\n      <li class=\"first\"><a href=\"/wiki/public/login\">Login</a></li><li><a href=\"/wiki/public/prefs\">Preferences</a></li><li class=\"last\"><a href=\"/wiki/public/about\">About Trac</a></li>\n    </ul>\n  </div>\n    </div>\n    <div id=\"mainnav\" class=\"nav\">\n  </div>\n    <div id=\"main\">\n      <div id=\"pagepath\" class=\"noprint\">\n  <a class=\"pathentry first\" title=\"View WikiStart\" href=\"/wiki/public/wiki\">wiki:</a><a class=\"pathentry\" href=\"/wiki/public/wiki/cs221-2019-spring-project2\" title=\"View cs221-2019-spring-project2\">cs221-2019-spring-project2</a>\n</div>\n      <div id=\"ctxtnav\" class=\"nav\">\n        <h2>Context Navigation</h2>\n        <ul>\n          <li class=\"first\"><span class=\"missing\">&larr; Previous Version</span></li><li><a href=\"/wiki/public/wiki/cs221-2019-spring-project2\" title=\"View latest version\">View Latest Version</a></li><li class=\"last\"><span><a class=\"next\" href=\"/wiki/public/wiki/cs221-2019-spring-project2?version=2\" title=\"Version 2\">Next Version</a> &rarr;</span></li>\n        </ul>\n        <hr />\n      </div>\n    <div id=\"content\" class=\"wiki\">\n        <br />\n        <table id=\"info\" summary=\"Revision info\">\n          <tr><th scope=\"row\">Version 1 (modified by zuozhi, <a class=\"timeline\" href=\"/wiki/public/timeline?from=2019-04-17T16%3A39%3A24-07%3A00&amp;precision=second\" title=\"See timeline at Apr 17, 2019 4:39:24 PM\">6 months ago</a>)\n             (<a href=\"/wiki/public/wiki/cs221-2019-spring-project2?action=diff&amp;version=1\">diff</a>)</th></tr>\n          <tr><td class=\"message\">\n            <p>\n--\n</p>\n\n          </td></tr>\n        </table>\n      <div class=\"wikipage searchable\">\n        \n          <div id=\"wikipage\" class=\"trac-content\"><h1 id=\"CS221:Project2-II:Invertedindexbooleansearch\">CS221: Project 2 - II: Inverted index, boolean search</h1>\n<p>\n<strong>Test Cases Due:     Week 4 Tu. (Apr 23), Due on Github as Pull Requests</strong><br />\n<strong>Review Due:           Week 4, Fri. (Apr 26),  Due on Github as Pull Requests Comments</strong><br />\n<strong>Final Code Due:     Week 5, Sun. (May. 5),  Due on Github.</strong><br />\n</p>\n<h1 id=\"Overview\">Overview</h1>\n<h2 id=\"CodingTasks\">Coding Tasks</h2>\n<ol><li>Implement LSM-like disk-based inverted index that supports insertions. (7 points)\n</li><li>Implement merge of inverted index segments. (4 points)\n</li><li>Implement keyword search, boolean AND search, and boolean OR search. (6 points)\n</li><li>(Optional) Extra Credit: Implement a dynamic-programming-based Chinese or Japanese tokenizer. (3 points)\n</li></ol><h2 id=\"TestingTasks\">Testing Tasks</h2>\n<ol><li>Write at least 2 test cases for a task (3 points)\n</li><li>Review the test cases of two teams (2 points)\n</li></ol><p>\nTotal: 17 points  (+ 3 extra credits)\n</p>\n<p>\nProject 2: Implement an disk-based inverted index.\nIn this project, you'll be implementing a disk-based inverted index and the search operations.\n</p>\n<p>\nOn a high level, inverted index stores the mapping from keywords to the documents they appear in.\nA simple in-memory structure could be <tt>Map&lt;String, List&lt;Integer&gt;&gt;</tt>, where each key is a keyword token (also called term),\nand each value is a list of (often sorted) document IDs (also called postings).\n</p>\n<p>\nIn this project, the disk-based index structure is similar to the idea of LSM (Log-Structured Merge tree).\nA general idea will be described. The details should follow what Professor says in the lecture.\n</p>\n<p>\nThe inverted index consists of multiple index segments, where each segment is only created and then appended.\nOnce each segment is written to disk, it becomes immutable and is never changed again.\n</p>\n<p>\nEach index segment is a fully searchable inverted index,\nit contains the inverted index structure as well the document store (map from documentID to actual document),\nthe document ID of each segment is local to the segment itself and it is invisible to the user.\n</p>\n<p>\nWhen searching a keyword, all segments are searched, and the result documents from each segment are combined.\n</p>\n<p>\nExample:\n</p>\n<p>\nAdd documents \"cat dog\" and \"cat elephant\", then flush to write Segment0.\nSegment0:\n</p>\n<hr />\n<p>\n<a class=\"forbidden wiki\" title=\"no permission to view this wiki page\">InvertIndex</a>: {\"cat\": [0, 1], \"dog\": <a class=\"missing changeset\" title=\"No changeset 0 in the repository\">[0]</a>, \"elephant\": <a class=\"missing changeset\" title=\"No permission to view changeset 1 on (default)\">[1]</a>}\n<a class=\"forbidden wiki\" title=\"no permission to view this wiki page\">DocStore</a>: {0: \"cat dog\", 1: \"cat elephant\"}\n</p>\n<hr />\n<p>\nThen add documents \"cat dog\" and \"wolf dog\", and flush to write a new Segment, Segment1.\nSegment1:\n</p>\n<hr />\n<p>\n<a class=\"forbidden wiki\" title=\"no permission to view this wiki page\">InvertIndex</a>: {\"cat\": <a class=\"missing changeset\" title=\"No changeset 0 in the repository\">[0]</a>, \"dog\": [0, 1], \"wolf\": <a class=\"missing changeset\" title=\"No permission to view changeset 1 on (default)\">[1]</a>}\n<a class=\"forbidden wiki\" title=\"no permission to view this wiki page\">DocStore</a>: {0: \"cat dog\", 1: \"wolf dog\"}\n</p>\n<hr />\n<p>\nWhen searching the word \"cat\", first search Segment0 and get [\"cat dog\", \"cat elephant\"],\nthen search Segment1 and get <a class=\"forbidden wiki\" title=\"no permission to view this wiki page\">cat dog</a>, then combine results to get [\"cat dog\", \"cat elephant\", \"cat dog\"]\n</p>\n<p>\nTask 1: Implement LSM-like disk-based inverted index that supports insertions.\n</p>\n<p>\nIn this task, you'll implement the disk file structure of an inverted index segment.\nWhen a document is added via <tt>addDocument()</tt>, it should be first stored in the in-memory buffer.\nWhenever the number of documents reached default_flush_threshold, or function <tt>flush()</tt> is called,\nyou should create a new inverted index segment with the documents in the buffer.\n</p>\n<p>\nThe specific format of the inverted lists should in general follow what Professor says in lecture.\nYou also have freedom to design the format to make it more efficient to store or search.\nIn principle, the terms can be loaded into memory, but all the posting lists cannot be entirely loaded into memory.\n</p>\n<p>\nFunctions to implement, see each function signature to check the details:\n{@link this#addDocument};\n{@link this#flush};\n{@link this#documentIterator};\n{@link this#getNumSegments};\n{@link this#getIndexSegment};\n</p>\n<p>\nTask 2: Implement merge of inverted index segments.\n</p>\n<p>\nIn this task, you'll implement merging index segments. We cannot let number of segments grow infinitely because it\nwould mean searching a keyword needs to go through a lot of documents.\n</p>\n<p>\nWhenever the number of segments has reached the default_merge_threshold, or <tt>mergeAllSegments()</tt> is called,\nyou need to merge *all* segments in the inverted index pair-wise.\nYou could assume merging only happens when you have an even number of segments.\n</p>\n<p>\nWhen merging two segments into one, since each segment has its own local document ID, you need to bump up all\ndocument IDs in one of the segments.\nAs an example, Segment0 contains local docID 1-100, Segment1 contains local docID 1-100,\nfirst find the max docID in Segment0, which is 100, then bump up Segment1's docIDs to become 101-200, then do the merge.\n</p>\n<p>\nFunctions to implement:\n{@link this#mergeAllSegments}\n</p>\n<p>\nTask 3: Implement keyword search, boolean AND search, and boolean OR search.\n</p>\n<p>\nIn this task, you'll implement searching on top of the inverted index.\nYou could assume all documents are flushed to disk index segments when doing search.\n</p>\n<p>\nFor a query keyword, you need to first analyze it using the analyzer.\nYou could assume after tokenization and stemming, the result only has 1 token, or is empty (such as the query is a stop ord).\nIf the query is empty, searching should not return any results.\n</p>\n<p>\nFunctions to implement:\n{@link this#searchQuery}\n{@link this#searchAndQuery}\n{@link this#searchOrQuery}\n</p>\n<p>\nTask 4 (Optional Extra Credit): Implement deletions.\n</p>\n<p>\nIn our LSM-like index structure, deletion is implemented by maintaining a separate deletion marks per segment.\nThe document is not actually deleted in the inverted index nor document store.\nWhen reading or searching, the docID is checked with the deletion mark to see if the document is deleted.\n</p>\n<p>\nThe document should be deleted when merging two index segments.\n</p>\n<p>\nFunctions to implement:\n{@link this#deleteDocuments}\n</p>\n<p>\nTask 5 (Optional Extra Credit): Implement compression\n</p>\n</div>\n          \n          \n        \n        \n      </div>\n      \n    <div id=\"attachments\">\n        <h3 class=\"foldable\">Attachments <span class=\"trac-count\">(2)</span></h3>\n        <div>\n          <ul>\n              <li>\n    <a href=\"/wiki/public/attachment/wiki/cs221-2019-spring-project2/Team2StressTest.txt\" title=\"View attachment\">Team2StressTest.txt</a><a href=\"/wiki/public/raw-attachment/wiki/cs221-2019-spring-project2/Team2StressTest.txt\" class=\"trac-rawlink\" title=\"Download\">\u200b</a>\n       (<span title=\"725060 bytes\">708.1 KB</span>) -\n      added by <em>zuozhi</em> <a class=\"timeline\" href=\"/wiki/public/timeline?from=2019-04-30T05%3A40%3A56-07%3A00&amp;precision=second\" title=\"See timeline at Apr 30, 2019 5:40:56 AM\">6 months ago</a>.\n              </li>\n              <li>\n    <a href=\"/wiki/public/attachment/wiki/cs221-2019-spring-project2/Team3StressTest.txt\" title=\"View attachment\">Team3StressTest.txt</a><a href=\"/wiki/public/raw-attachment/wiki/cs221-2019-spring-project2/Team3StressTest.txt\" class=\"trac-rawlink\" title=\"Download\">\u200b</a>\n       (<span title=\"8761 bytes\">8.6 KB</span>) -\n      added by <em>zuozhi</em> <a class=\"timeline\" href=\"/wiki/public/timeline?from=2019-04-30T07%3A33%3A06-07%3A00&amp;precision=second\" title=\"See timeline at Apr 30, 2019 7:33:06 AM\">6 months ago</a>.\n              </li>\n          </ul>\n          <p>\n            Download all attachments as: <a rel=\"nofollow\" href=\"/wiki/public/zip-attachment/wiki/cs221-2019-spring-project2/\">.zip</a>\n          </p>\n        </div>\n    </div>\n\n    </div>\n    <div id=\"altlinks\">\n      <h3>Download in other formats:</h3>\n      <ul>\n        <li class=\"last first\">\n          <a rel=\"nofollow\" href=\"/wiki/public/wiki/cs221-2019-spring-project2?version=1&amp;format=txt\">Plain Text</a>\n        </li>\n      </ul>\n    </div>\n    </div>\n    <div id=\"footer\" lang=\"en\" xml:lang=\"en\"><hr />\n      <a id=\"tracpowered\" href=\"http://trac.edgewall.org/\"><img src=\"/wiki/public/chrome/common/trac_logo_mini.png\" height=\"30\" width=\"107\" alt=\"Trac Powered\" /></a>\n      <p class=\"left\">Powered by <a href=\"/wiki/public/about\"><strong>Trac 1.0.13</strong></a><br />\n        By <a href=\"http://www.edgewall.org/\">Edgewall Software</a>.</p>\n      <p class=\"right\">Visit the Trac open source project at<br /><a href=\"http://trac.edgewall.org/\">http://trac.edgewall.org/</a></p>\n    </div>\n  </body>\n</html>", "encoding": "utf-8"}