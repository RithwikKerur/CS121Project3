{"url": "http://scale.ics.uci.edu/dashboard/map.html", "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\t<title>SCALE - Dashboard - Map View</title>\n\t<link rel=\"icon\" type=\"image/png\" href=\"img/SCALE_transparent.png\">\n\n\t<!--some meta tags I do not understand-->\n\t<meta charset=\"utf-8\">\n\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\t<meta name=\"description\" content=\"\">\n\t<meta name=\"author\" content=\"\">\n\n\t<!--link rel=\"stylesheet/less\" href=\"less/bootstrap.less\" type=\"text/css\" /-->\n\t<!--link rel=\"stylesheet/less\" href=\"less/responsive.less\" type=\"text/css\" /-->\n\t<!--script src=\"js/less-1.3.3.min.js\"></script-->\n\t<!--append \u2018#!watch\u2019 to the browser URL, then refresh the page. -->\n\n\t<!--link to css-->\n\t<link href=\"css/bootstrap.min.css\" rel=\"stylesheet\">\n\t<link href=\"css/style.css\" rel=\"stylesheet\">\n\n\t<!--jquery and bootstrap javscript-->\n\t<script type=\"text/javascript\" src=\"js/jquery.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"js/bootstrap.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"js/scripts.js\"></script>\n\t<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->\n\t<!--[if lt IE 9]>\n\t\t<script src=\"js/html5shiv.js\"></script>\n\t<![endif]-->\n\n\t<!-- Fav and touch icons -->\n\t<!-- <link rel=\"apple-touch-icon-precomposed\" sizes=\"144x144\" href=\"img/apple-touch-icon-144-precomposed.png\">\n\t<link rel=\"apple-touch-icon-precomposed\" sizes=\"114x114\" href=\"img/apple-touch-icon-114-precomposed.png\">\n\t<link rel=\"apple-touch-icon-precomposed\" sizes=\"72x72\" href=\"img/apple-touch-icon-72-precomposed.png\">\n\t<link rel=\"apple-touch-icon-precomposed\" href=\"img/apple-touch-icon-57-precomposed.png\">\n\t<link rel=\"shortcut icon\" href=\"img/favicon.png\"> -->\n\n\t<!--google map initialization-->\n\t<style>\n\t\t#map_canvas\n\t\t{\n\t\t\twidth: 100%;\n\t\t\theight: 1000px;\n\t\t}\n\t</style>\n\n\t<script src=\"https://maps.googleapis.com/maps/api/js\"></script>\n\t<!--This is the google map script. Input lat/long and it places marker on map (image)-->\n\t<script>\n\t\tvar address;\n\t\tvar map;\n\n\t\tvar fire =\n\t\t{\n\t\t\turl:'img/temperature.png',\n\t\t\tsize: new google.maps.Size(614, 460),\n\t\t\torigin: new google.maps.Point(0, 0),\n\t\t\tanchor: new google.maps.Point(17, 34),\n\t\t\tscaledSize: new google.maps.Size(50, 50)\n\t\t};\n\t\tvar earthquake =\n\t\t{\n\t\t\turl: 'img/earthquake.png',\n\t\t\tsize: new google.maps.Size(614, 460),\n\t\t\torigin: new google.maps.Point(0,0),\n\t\t\tanchor: new google.maps.Point(17,34),\n\t\t\tscaledSize: new google.maps.Size(50,50)\n\t\t};\n\t\tvar gas =\n\t\t{\n\t\t\turl: \"img/gas.png\",\n\t\t\tsize: new google.maps.Size(614, 460),\n\t\t\torigin: new google.maps.Point(0,0),\n\t\t\tanchor: new google.maps.Point(17,34),\n\t\t\tscaledSize: new google.maps.Size(50,50)\n\t\t};\n\t\tvar light =\n\t\t{\n\t\t\turl: \"img/light.png\",\n\t\t\tsize: new google.maps.Size(614, 460),\n\t\t\torigin: new google.maps.Point(0,0),\n\t\t\tanchor: new google.maps.Point(17,34),\n\t\t\tscaledSize: new google.maps.Size(50,50)\n\t\t};\n\t\tvar flood =\n\t\t{\n\t\t\turl: \"img/flood.png\",\n\t\t\tsize: new google.maps.Size(614, 460),\n\t\t\torigin: new google.maps.Point(0,0),\n\t\t\tanchor: new google.maps.Point(17,34),\n\t\t\tscaledSize: new google.maps.Size(50,50)\n\t\t};\n\t\tvar movement =\n\t\t{\n\t\t\turl: \"img/movement.png\",\n\t\t\tsize: new google.maps.Size(614, 460),\n\t\t\torigin: new google.maps.Point(0,0),\n\t\t\tanchor: new google.maps.Point(17,34),\n\t\t\tscaledSize: new google.maps.Size(50,50)\n\t\t};\n\t\tvar question =\n\t\t{\n\t\t\turl: \"img/question.png\",\n\t\t\tsize: new google.maps.Size(614, 460),\n\t\t\torigin: new google.maps.Point(0,0),\n\t\t\tanchor: new google.maps.Point(17,34),\n\t\t\tscaledSize: new google.maps.Size(50,50)\n\t\t};\n\t\tvar heartbeat =\n\t\t{\n\t\t\turl: \"img/heartbeat.png\",\n\t\t\tsize: new google.maps.Size(614, 460),\n\t\t\torigin: new google.maps.Point(0,0),\n\t\t\tanchor: new google.maps.Point(17,34),\n\t\t\tscaledSize: new google.maps.Size(50,50)\n\t\t};\n\n\n\t\tfunction initialize()\n\t\t{\n\t\t\tvar map_canvas = document.getElementById('map_canvas');\n\t\t\tvar map_options =\n\t\t\t{\n\t\t\t\tcenter: new google.maps.LatLng(44.5403, -78.5463),\n\t\t\t\tzoom: 8,\n\t\t\t\tmapTypeId: google.maps.MapTypeId.ROADMAP\n\t\t\t}\n\t\t\tmap = new google.maps.Map(map_canvas, map_options)\n\t\t}\n\n\t\tfunction showPos()\n\t\t{\n\t\t\tvar citylat = document.getElementById('lat').value;\u3000\n\t\t\tvar citylon = document.getElementById('lon').value;\u3000\n\n\t\t\tif(citylat == '')\n\t\t\t{\n\t\t\t\twindow.alert('no lat');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if(citylon == '')\n\t\t\t{\n\t\t\t\twindow.alert('no lon');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar point = new google.maps.LatLng(citylat,citylon);\n\t\t}\n\n\t\tfunction clearMarkers()\n\t\t{\n\t\t\tsetAllMap(null);\n\t\t}\n\n\n\t\tfunction addMarker(parsedPayLoad)\n\t\t{\n\t\t\tvar image;\n\t\t\tvar propertyList = Object.getOwnPropertyNames(parsedPayLoad);\n\n\t\t\tif (propertyList.indexOf(\"event\")>=0 && propertyList.indexOf(\"geotag\")>=0)\n\t\t\t{\n\t\t\t\tif (parsedPayLoad.event === \"temperature\" ||\n\t\t\t\t\tparsedPayLoad.event === \"SCALE_Temp_sheeva\" ||\n\t\t\t\t\tparsedPayLoad.event === \"SCALE_raw_Temp_Sheeva\" ||\n\t\t\t\t\tparsedPayLoad.event === \"SCALE_cold_temp_Sheeva\" ||\n\t\t\t\t\tparsedPayLoad.event === \"SCALE_high_heat_Sheeva\" ||\n\t\t\t\t\tparsedPayLoad.event === \"SCALE_potentialfire _Sheeva\" )\n\t\t\t\t{\n\t\t\t\t\timage = fire;\n\t\t\t\t}\n\t\t\t\telse if\n\t\t\t\t\t(parsedPayLoad.event === \"seismic\" ||\n\t\t\t\t\t\tparsedPayLoad.event === \"SCALE_Seismic_sheeva\" ||\n\t\t\t\t\t\tparsedPayLoad.event === \"SCALE_raw_Seismic_Sheeva\" ||\n\t\t\t\t\t\tparsedPayLoad.event === \"SCALE_small_shake_Sheeva\" ||\n\t\t\t\t\t\tparsedPayLoad.event === \"SCALE_large_shake_Sheeva\" ||\n\t\t\t\t\t\tparsedPayLoad.event === \"SCALE_small_aftershock_Sheeva\" ||\n\t\t\t\t\t\tparsedPayLoad.event === \"SCALE_large_aftershock_Sheeva\")\n\n\t\t\t\t{\n\t\t\t\t\timage = earthquake;\n\t\t\t\t}\n\t\t\t\telse if (\n\t\t\t\t\tparsedPayLoad.event === \"explosive_gas\" ||\n\t\t\t\t\tparsedPayLoad.event === \"SCALE_gas_detected_RPi\")\n\t\t\t\t{\n\t\t\t\t\timage = gas;\n\t\t\t\t}\n\t\t\t\telse if (\n\t\t\t\t\tparsedPayLoad.event === \"light\" ||\n\t\t\t\t\tparsedPayLoad.event === \"SCALE_dark_environment_RPi\")\n\t\t\t\t{\n\t\t\t\t\timage = light;\n\t\t\t\t}\n\t\t\t\telse if (\n\t\t\t\t\tparsedPayLoad.event === \"motion\" ||\n\t\t\t\t\tparsedPayLoad.event === \"SCALE_motion_detected_RPi\")\n\t\t\t\t{\n\t\t\t\t\timage = movement;\n\t\t\t\t}\n\t\t\t\telse if (parsedPayLoad.event === \"heartbeat\")\n\t\t\t\t{\n\t\t\t\t\timage = heartbeat;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\timage = question;\n\t\t\t\t}\n\n\t\t\t\tvar point = new google.maps.LatLng(parsedPayLoad.geotag.lat,parsedPayLoad.geotag.lon);\n\t\t\t\tvar marker = new google.maps.Marker(\n\t\t\t\t{\n\t\t\t\t\tposition: point,\n\t\t\t\t\tmap: map,\n\t\t\t\t\ttitle: parsedPayLoad.event,\n\t\t\t\t\ticon: image});\n\t\t\t\tmarker.setMap(map);\n\t\t\t\t//map.setCenter(point, parseFloat(4));\n\t\t\t}\n\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tgoogle.maps.event.addDomListener(window, 'load', initialize);\n\t</script>\n\n\t<script type=\"text/javascript\">\n\t\tvar low = 0;\n\t\tvar\tmedium = 0;\n\t\tvar\thigh = 0;\n\t\t//put n in front to indicate number...used some of the variables before for images\n\t\tvar ntemperature = 0;\n\t\tvar nseismic = 0;\n\t\tvar ngas = 0;\n\t\tvar nlight = 0;\n\t\tvar nmotion = 0;\n\t\tvar nflood = 0;\n\n\t\tfunction updateAlertNumber(parsedPayLoad,topicString)\n\t\t{\n\t\t\tvar propertyList = Object.getOwnPropertyNames(parsedPayLoad);\n\t\t\tif(propertyList.indexOf(\"prio_class\")>=0)\n\t\t\t{\n\t\t\t\tnow = moment();\n\n\t\t\t\tif (parsedPayLoad.prio_class == \"low\") {\n\t\t\t\t\tlow = low+1;\n\t\t\t\t}else if(parsedPayLoad.prio_class == \"medium\"){\n\t\t\t\t\tmedium = medium+1;\n\t\t\t\t}else if(parsedPayLoad.prio_class == \"high\"){\n\t\t\t\t\thigh = high+1;\n\t\t\t\t}else{\n\t\t\t\t\tconsole.log(\"No priority detected\");\n\t\t\t\t\tconsole.log(parsedPayLoad);\n\t\t\t\t}\n\t\t\t\t$(\"#lowCount\").text(low);\n\t\t\t\t$(\"#mediumCount\").text(medium);\n\t\t\t\t$(\"#highCount\").text(high);\n\t\t\t}\n\n\t\t}\n\n\t\t//just a dummy name for the numbers on the drop downs\n\t\tfunction updateAlertNumber2(parsedPayLoad,topicString)\n\t\t{\n\n\t\t\tnow = moment();\n\n\t\t\tif (parsedPayLoad.event == \"SCALE_cold_temp_Sheeva\" || parsedPayLoad.event == \"SCALE_high_heat_Sheeva\" || parsedPayLoad.event == \"SCALE_potentialfire _Sheeva\"|| parsedPayLoad.event == \"temperature\" ){\n\n\t\t\t\tntemperature++;\n\t\t\t}\n\t\t\telse if (parsedPayLoad.event == \"SCALE_raw_Seismic_Sheeva\" || parsedPayLoad.event == \"SCALE_small_shake_Sheeva\" || parsedPayLoad.event == \"SCALE_large_shake_Sheeva\" || parsedPayLoad.event == \"SCALE_small_aftershock_Sheeva\" || parsedPayLoad.event == \"SCALE_large_aftershock_Sheeva\"\n\t\t\t\t|| parsedPayLoad.event == \"seismic\" )\n\t\t\t{\n\t\t\t\tnseismic++;\n\t\t\t}\n\t\t\telse if (parsedPayLoad.event == \"SCALE_gas_detected_RPi\" || parsedPayLoad.event == \"explosive_gas\" )\n\t\t\t{\n\t\t\t\tngas++;\n\t\t\t}\n\t\t\telse if (parsedPayLoad.event == \"SCALE_dark_environment_RPi\" || parsedPayLoad.event == \"light\" )\n\t\t\t{\n\t\t\t\tnlight++;\n\t\t\t}\n\t\t\telse if (parsedPayLoad.event == \"SCALE_motion_detected_RPi\"|| parsedPayLoad.event == \"motion\" )\n\t\t\t{\n\t\t\t\tnmotion++;\n\t\t\t}\n\t\t\telse if (parsedPayLoad.event == \"SCALE_Flood_Arduino\")\n\t\t\t{\n\t\t\t\tnflood++;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$(\"#temperatureCount\").text(ntemperature);\n\t\t\t$(\"#seismicCount\").text(nseismic);\n\t\t\t$(\"#gasCount\").text(ngas);\n\t\t\t$(\"#lightCount\").text(nlight);\n\t\t\t$(\"#motionCount\").text(nmotion);\n\t\t\t$(\"#floodCount\").text(nflood);\n\t\t}\n\n\t\tfunction clearRawTable(nothing)\n\t\t{\n\t\t\tmaxRows = 0;\n\t\t\t$('#rawEvents > tr').remove();\n\t\t}\n\n\t\tfunction calcTimeDiff(timestamp)\n\t\t{\n\t\t\tvar updatedDate = new Date(timestamp*1000);\n\t\t\tvar now = new Date();\n\t\t\tvar timeAgo = now.getTime() - timestamp;\n\t\t\tvar hh = Math.floor(timeAgo / 1000 / 60 / 60);\n\t\t\ttimeAgo -= hh * 1000 * 60 * 60;\n\t\t\tvar mm = Math.floor(timeAgo / 1000 / 60);\n\t\t\ttimeAgo -= mm * 1000 * 60;\n\t\t\tvar ss = Math.floor(timeAgo / 1000);\n\t\t\ttimeAgo -= ss * 1000;\n\t\t\treturn (hh + \"h\" + mm + \"m\" + ss + \"s\");\n\t\t\t//document.write(updatedDate + \" (\" + hh + \"h\" + mm + \"m\" + ss + \"s ago)\");\n\t\t}\n\n\t\tfunction specificOnConnectionLoss()\n\t\t{\n\t\t\tconsole.log(\"Clearing table...\");\n\t\t\tclearRawTable();\n\t\t}\n\n\t\tfunction updateChart()\n\t\t{\n\t\t\t$(function ()\n\t\t\t{\n\t\t\t\t$('#container').highcharts(\n\t\t\t\t{\n\t\t\t\t\tchart:\n\t\t\t\t\t{\n\t\t\t\t\t\tplotBackgroundColor: null,\n\t\t\t\t\t\tplotBorderWidth: 5,//null,\n\t\t\t\t\t\tplotShadow: false\n\t\t\t\t\t},\n\t\t\t\t\ttitle:\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: ''\n\t\t\t\t\t},\n\t\t\t\t\ttooltip:\n\t\t\t\t\t{\n\t\t\t\t\t\tpointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n\t\t\t\t\t},\n\t\t\t\t\tplotOptions:\n\t\t\t\t\t{\n\t\t\t\t\t\tpie:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tallowPointSelect: true,\n\t\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\t\tdataLabels:\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tenabled: true,\n\t\t\t\t\t\t\t\tformat: '<b>{point.name}</b>: {point.percentage:.1f} %',\n\t\t\t\t\t\t\t\tstyle:\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcolor: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tseries:\n\t\t\t\t\t[{\n\t\t\t\t\t\ttype: 'pie',\n\t\t\t\t\t\tname: 'Browser share',\n\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t[\"High\",   high/(high+medium+low)],\n\t\t\t\t\t\t['Medium',\t  medium/(high+medium+low)],\n\t\t\t\t\t\t['Low',\tlow/(high+medium+low)],\n\t\t\t\t\t\t]\n\t\t\t\t\t}]\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t</script>\n\n\t<script type=\"text/javascript\" src=\"https://www.google.com/jsapi\"></script>\n\n\t<script type=\"text/javascript\">\n\t\t// Load the Visualization API and the piechart package.\n\t\tgoogle.load('visualization', '1.0', {'packages':['corechart']});\n\n\t\t// Set a callback to run when the Google Visualization API is loaded.\n\t\tgoogle.setOnLoadCallback(drawChart);\n\n\t\t// Callback that creates and populates a data table,\n\t\t// instantiates the pie chart, passes in the data and\n\t\t// draws it.\n\n\t\tfunction drawChart()\n\t\t{\n\n\t\t\t// Create the data table.\n\t\t\tvar data = new google.visualization.DataTable();\n\t\t\tdata.addColumn('string', 'Alert Priority');\n\t\t\tdata.addColumn('number', 'Number');\n\t\t\tdata.addRows\n\t\t\t([\n\t\t\t\t['high', high],\n\t\t\t\t['medium', medium],\n\t\t\t\t['low', low],\n\t\t\t\t]);\n\n\t\t\t// Set chart options\n\t\t\tvar options = {'title':'Alerts Percentage',\n\t\t\t\"backgroundColor\": \"white\",\n\t\t\t'pieHole': 0.4,\n\t\t\t'slices': {\n\t\t\t\t0: { 'color': 'red' },\n\t\t\t\t1: { 'color': 'orange' },\n\t\t\t\t2: { 'color': 'green' }\n\t\t\t}\n\t\t};\n\n\t\t\t// Instantiate and draw our chart, passing in some options.\n\t\t\tvar chart = new google.visualization.PieChart(document.getElementById('chart_div'));\n\t\t\tchart.draw(data, options);\n\t\t}\n\t</script>\n\n\t<script src=\"js/moment.min.js\"></script>\n\t<script src=\"js/mqttws31.js\"></script>\n\t<!--Sets up MQTT subscription to Charles' data-->\n\t<script>\n\t\tfunction getRandomInt (min, max)\n\t\t{\n\t\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\n\t\t}\n\n\t\t$('.dropdown-menu').append('<li id=\"mqttStatus\"><a onClick=\"connect()\"><span class=\"glyphicon glyphicon-question-sign\"></span>&nbsp; MQTT Status</a></li>');\n\n\t\tvar clientId = \"client\"+getRandomInt(0,1000000);\n\t\t// MQTT client\n\t\tvar server = \"iqueue.ics.uci.edu\"; //akerue.me\n\t\tvar port = 8000;\n\t\tvar topic = \"iot-1/d/+/evt/#\";\n\t\t//topic = \"iot-1/d/801f02da69bc/evt/light/json\";\t\t//THIS IS A DEBUG TOPIC\n\n\t\tvar client = new Messaging.Client(server, port, clientId);\n\n\t\tfunction connect()\n\t\t{\n\t\t\t//Use this trick to only load this when the DOM is ready since the processMessage function can be partial specific which will be loaded after the navbar where the MQTT template (this page) is loaded\n\n\t\t\t$( document ).ready(function()\n\t\t\t{\n\t\t\t\tclient.onMessageArrived = processMessage;\n\t\t\t});\n\n\t\t\tclient.onConnectionLoss = function()\n\t\t\t{\n\t\t\t\tconsole.log(\"Lost connection to the MQTT broker\");\n\t\t\t\t$(\"#mqttStatus\").html('<a onClick=\"connect();\"><span class=\"glyphicon glyphicon-remove-circle\"></span>&nbsp; Connection lost</a>');\n\t\t\t\tspecificOnConnectionLoss();\t   //Allow for specific functions to be defined on the connection loss.\n\t\t\t\tconsole.log(\"Reconnecting to broker in 2 seconds\");\n\t\t\t\twindow.setTimeout('connect()',2000);\n\t\t\t}\n\n\t\t\tconsole.log(\"Attempting connection to \" + server + \":\" + port + \" with client id: \" + clientId);\n\t\t\tclient.connect(\n\t\t\t{\n\n\t\t\t\tonSuccess: function()\n\t\t\t\t{\n\t\t\t\t\tconsole.log(\"Connected to the MQTT broker\");\n\t\t\t\t\t$(\"#mqttStatus\").html('<a onClick=\"disconnect()\"><span class=\"glyphicon glyphicon-ok-circle\"></span>&nbsp; Connected</a>');\n\t\t\t\t\tclient.subscribe(topic);\n\t\t\t\t},\n\t\t\t\tonFailure: function()\n\t\t\t\t{\n\t\t\t\t\tconsole.log(\"Could not connect to the MQTT broker\");\n\t\t\t\t\t$(\"#mqttStatus\").html('<a onClick=\"connect();\"><span class=\"glyphicon glyphicon-remove-circle\"></span>&nbsp; Not Connected</a>');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction publish(message)\n\t\t{\n\t\t\tvar msgBody = JSON.stringify(message);\n\t\t\tvar msgObj = new Messaging.Message(msgBody);\n\t\t\tmsgObj.destinationName = topic;\n\t\t\tclient.send(msgObj);\n\t\t\tconsole.log(\"Sent message \" + msgBody + \" to topic \"+ topic);\n\t\t}\n\n\t\tfunction parsePacket(payload)\n\t\t{\n\t\t\tpayload = JSON.parse(payload);\n\t\t\treturn payload.d;\n\t\t}\n\n\t\tvar numAlerts =0;\n\t\tvar initAlerts =5;\n\t\tvar listAlerts = [];\n\t\tvar minPriority = 0;\n\n\t\tfunction initAlert()\n\t\t{\n\t\t\tfor(var j = 0;  j<initAlerts; j++ )\n\t\t\t{\n\t\t\t\tlistAlerts.push(JSON.parse('{\"prio_value\": 0, \"event\": \"init\"}'));\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tfunction addAlert(parsedPayLoad,topicString)\n\t\t{\n\t\t\tvar numInsert = 0;\n\t\t\tif (parsedPayLoad.prio_value===null || parsedPayLoad.event===null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (parsedPayLoad.prio_value <= minPriority)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (listAlerts.length > initAlerts)\n\t\t\t\t{\n\t\t\t\t\tlistAlerts.splice(5,1);\n\t\t\t\t}\n\n\t\t\t\t//add a check to see if it has reached the efnd of the array\n\t\t\t\t//store the value of the former element before replace and rest of the list\n\n\n\t\t\t\tfor (var i = 0; i<listAlerts.length; i++)\n\t\t\t\t{\n\n\t\t\t\t\tif(parsedPayLoad.prio_value>listAlerts[i].prio_value)\n\t\t\t\t\t{\n\t\t\t\t\t\tlistAlerts.splice(i,0,parsedPayLoad);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//listAlerts[numAlerts] = parsedPayLoad;\n\t\t\t\tnumAlerts++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction alertName(elementNum)\n\t\t{\n\t\t\treturn listAlerts[elementNum].event;\n\t\t}\n\n\t\tfunction alertValue(elementNum)\n\t\t{\n\t\t\treturn listAlerts[elementNum].prio_value;\n\t\t}\n\n\t\tfunction clearAlertText(parsedPayLoad,topicString)\n\t\t{\n\t\t\tnow = moment();\n\n\t\t\t$(\"#alert1\").text(\" \");\n\t\t\t$(\"#alert2\").text(\" \");\n\t\t\t$(\"#alert3\").text(\" \");\n\t\t\t$(\"#alert4\").text(\" \");\n\t\t\t$(\"#alert5\").text(\" \");\n\t\t}\n\n\t\tfunction updateAlertText()\n\t\t{\n\n\t\t\tnow = moment();\n\n\t\t\t$(\"#alert1\").text(listAlerts[0].prio_value +\": \"+listAlerts[0].event);\n\t\t\t$(\"#alert2\").text(listAlerts[1].prio_value +\": \"+listAlerts[1].event);\n\t\t\t$(\"#alert3\").text(listAlerts[2].prio_value +\": \"+listAlerts[2].event);\n\t\t\t$(\"#alert4\").text(listAlerts[3].prio_value +\": \"+listAlerts[3].event);\n\t\t\t$(\"#alert5\").text(listAlerts[4].prio_value +\": \"+listAlerts[4].event);\n\t\t}\n\n\n\t\tfunction calcTimeDiff(timestamp)\n\t\t{\n\t\t\tvar updatedDate = new Date(timestamp*1000);\n\t\t\tvar now = new Date();\n\t\t\tvar timeAgo = now.getTime() - timestamp;\n\t\t\tvar hh = Math.floor(timeAgo / 1000 / 60 / 60);\n\t\t\ttimeAgo -= hh * 1000 * 60 * 60;\n\t\t\tvar mm = Math.floor(timeAgo / 1000 / 60);\n\t\t\ttimeAgo -= mm * 1000 * 60;\n\t\t\tvar ss = Math.floor(timeAgo / 1000);\n\t\t\ttimeAgo -= ss * 1000;\n\t\t\treturn (hh + \"h\" + mm + \"m\" + ss + \"s\");\n\t\t\t//document.write(updatedDate + \" (\" + hh + \"h\" + mm + \"m\" + ss + \"s ago)\");\n\t\t}\n\n\t\tfunction processMessage(msg)\n\t\t{\n\t\t\t//console.log(\"RAW Message: \");\n\t\t\t//console.log(msg);\n\t\t\tconsole.log(\"processMessage\");\n\t\t\tvar parsedPayLoad = parsePacket(msg.payloadString);\n\t\t\tvar topicString = msg.destinationName;\n\n\t\t\tupdateAlertNumber(parsedPayLoad,topicString);\n\t\t\tupdateAlertNumber2(parsedPayLoad,topicString);\n\t\t\tupdateChart();\n\t\t\tdrawChart()\n\n\t\t\taddAlert(parsedPayLoad,topicString);\n\t\t\tupdateAlertText();\n\n\t\t\t//only events with a high enough priority will be added to map\n\t\t\t//if(parsedPayLoad.prio_value>10)\n\t\t\t//{\n\t\t\t\taddMarker(parsedPayLoad);\n\t\t\t//}\n\t\t}\n\n\t\tfunction keepAlive()\n\t\t{\n\t\t\tvar msgBody = JSON.stringify('{\"d\":{\"event\":\"keepAlive\"}}');\n\t\t\tvar msgObj = new Messaging.Message(msgBody);\n\t\t\tmsgObj.destinationName = \"iot-1/d/\";\n\t\t\tclient.send(msgObj);\n\t\t}\n\n\n\t\tconsole.log(\"before init alert\");\n\t\tinitAlert();\n\n\t\tsetInterval(function(){keepAlive()},3000);\n\n\t\tconsole.log(\"before connect\");\n\t\tconnect();\n\t</script>\n\n\t<script type=\"text/javascript\">\n\t\tbootstrap_alert = function()\n\t\t{\n\n\t\t}\n\t\tbootstrap_alert.warning = function(message)\n\t\t{\n\t\t\t$('#alert_placeholder').html('<div id = \"alert_placeholder\"><div id=\"myAlert\" class=\"alert alert-danger alert-dismissable\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-hidden=\"true\">&times;</button><span>'+message+'</span></div></div>')\n\t\t}\n\t</script>\n\n\t<script type=\"text/javascript\">\n\t\t$(function()\n\t\t{\n\t\t\t$(\"#myAlert\").bind('closed.bs.alert', function ()\n\t\t\t{\n\t\t\t\tbootstrap_alert.warning('Your text goes here');\n\t\t\t});\n\t\t});\n\t</script>\n</head>\n\n<body>\n\t<div class=\"container\">\n\t\t<div class=\"row clearfix\">\n\t\t\t<div class=\"col-md-12 column\">\n\n\t\t\t\t<nav class=\"navbar navbar-default\" role=\"navigation\">\n\t\t\t\t\t<div class=\"navbar-header\">\n\t\t\t\t\t\t<button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\"#bs-example-navbar-collapse-1\"> <span class=\"sr-only\">Toggle navigation</span><span class=\"icon-bar\"></span><span class=\"icon-bar\"></span><span class=\"icon-bar\"></span></button> <a class=\"navbar-brand\">SCALE Dashboard</a>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\">\n\t\t\t\t\t\t<ul class=\"nav navbar-nav\">\n\t\t\t\t\t\t\t<li class=\"active\">\n\t\t\t\t\t\t\t\t<a href=\"map.html\">Map View</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"default\">\n\t\t\t\t\t\t\t\t<a href=\"list.html\">List View</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class=\"default\">\n\t\t\t\t\t\t\t\t<a href=\"http://scale.ics.uci.edu\"><font color=\"#c00\">SCALE Home</font></a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\n\t\t\t\t\t\t<ul class=\"nav navbar-nav navbar-right\">\n\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default navbar-btn disabled\">Sign Out</button>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</nav>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class =\"row clearfix\">\n\t\t\t<div class = \"col-md-12 column\">\n\t\t\t\t<div class = \"jumbotron\" style=\"background-color:white; padding:0px\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div style =\"margin-left:0px; margin-right:400px; background-color:#cecece; height:175px; width:400px; border-radius:20px; text-align:center\">\n\t\t\t\t\t\t\t<img style = \"margin-top:27px;\" src=\"img/logo.png\" alt=\"SCALE Logo\" height=\"120\">\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<font style = \"color:transparent\">-</font>\n\t\t\t\t\t\t<script src=\"js/highcharts.js\"></script>\n\t\t\t\t\t\t<script src=\"js/modules/exporting.js\"></script>\n\t\t\t\t\t\t<div id=\"chart_div\" style=\"margin-left:425px; margin-top: -220px; width: 325px; height:175px;\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class =\"row clearfix\">\n\t\t\t<div class = \"col-md-12 column\">\n\t\t\t\t<div class = \"jumbotron\" style=\"padding: 30px;\">\n\t\t\t\t\t<div style = \"background-color:#cecece; width:100%; border-radius:20px\" >\n\t\t\t\t\t\t<div style=\"padding: 30px; text-align:center\" class=\"btn-group-horizontal\">\n\t\t\t\t\t\t\t<!--dropdown5-->\n\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default btn-lg dropdown-toggle\" style = \"width:150px\">\n\t\t\t\t\t\t\t\t\tMotion <font size=\"3\" id=\"motionCount\" color=\"#06f\">0</font>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<!-- <ul class=\"dropdown-menu\" role=\"menu\">\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Motion Detected</a></li>\n\t\t\t\t\t\t\t\t\t<li class=\"divider\"></li>\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Inactive</a></li>\n\t\t\t\t\t\t\t\t</ul> -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!--dropdown4-->\n\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default btn-lg dropdown-toggle\" style = \"width:150px\">\n\t\t\t\t\t\t\t\t\tLight <font size=\"3\" id=\"lightCount\" color=\"#06f\">0</font>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<!-- <ul class=\"dropdown-menu\" role=\"menu\">\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Dark Environment</a></li>\n\t\t\t\t\t\t\t\t\t<li class=\"divider\"></li>\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Well Lit Environment</a></li>\n\t\t\t\t\t\t\t\t\t<li class=\"divider\"></li>\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Flash of Light</a></li>\n\t\t\t\t\t\t\t\t</ul> -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!--dropdown1-->\n\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default btn-lg dropdown-toggle\" style = \"width:150px\">\n\t\t\t\t\t\t\t\t\tTemperature <font size=\"3\" id=\"temperatureCount\" color=\"#06f\">0</font>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<!-- <ul class=\"dropdown-menu\" role=\"menu\">\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Cold Temperature</a></li>\n\t\t\t\t\t\t\t\t\t<li class=\"divider\"></li>\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">High Temperature</a></li>\n\t\t\t\t\t\t\t\t\t<li class=\"divider\"></li>\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Potential Fire</a></li>\n\t\t\t\t\t\t\t\t</ul> -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!--dropdown3-->\n\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default btn-lg dropdown-toggle\" style = \"width:150px\">\n\t\t\t\t\t\t\t\t\tGas <font size=\"3\" id=\"gasCount\" color=\"#06f\">0</font> \n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<!-- <ul class=\"dropdown-menu\" role=\"menu\">\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Gas Detected</a></li>\n\t\t\t\t\t\t\t\t\t<li class=\"divider\"></li>\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">CO2 Detected</a></li>\n\t\t\t\t\t\t\t\t\t<li class=\"divider\"></li>\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">i-butane Detected</a></li>\n\t\t\t\t\t\t\t\t\t<li class=\"divider\"></li>\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Gas Leakage</a></li>\n\t\t\t\t\t\t\t\t</ul> -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!--dropdown2-->\n\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default btn-lg dropdown-toggle\" style = \"width:150px\">\n\t\t\t\t\t\t\t\t\tSeismic <font size=\"3\" id=\"seismicCount\" color=\"#06f\">0</font>\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<!-- <ul class=\"dropdown-menu\" role=\"menu\">\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Small Earthquake</a></li>\n\t\t\t\t\t\t\t\t\t<li class=\"divider\"></li>\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Large Earthquake</a></li>\n\t\t\t\t\t\t\t\t\t<li class=\"divider\"></li>\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Small Aftershock</a></li>\n\t\t\t\t\t\t\t\t\t<li class=\"divider\"></li>\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Large Aftershock</a></li>\n\t\t\t\t\t\t\t\t</ul> -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!--dropdown6-->\n\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-default btn-lg dropdown-toggle\" style = \"width:150px;\">\n\t\t\t\t\t\t\t\t\tFlood <font size=\"3\" id=\"floodCount\" color=\"#06f\">0</font>\n\t\t\t\t\t\t\t\t\t<!-- <span class=\"caret\"></span> -->\n\t\t\t\t\t\t\t\t</button>\n\n\t\t\t\t\t\t\t\t<!-- <ul class=\"dropdown-menu\" role=\"menu\">\n\t\t\t\t\t\t\t\t\t<li><a href=\"#\">Flood</a></li>\n\t\t\t\t\t\t\t\t</ul> -->\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!--button group-->\n\n\t\t\t\t\t<div style = \"background-color:#cecece; width:100%; border-radius:20px\">\n\t\t\t\t\t\t<!--green alert-->\n\t\t\t\t\t\t<div style = \"width:100%; margin-top:20px; margin-bottom:0px; padding:30px; padding-bottom:30px\">\n\t\t\t\t\t\t\t<div class=\"btn-group-horizontal\" style=\"margin-bottom:-20px; text-align:center\">\n\t\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t\t<div class=\"alert alert-success alert-dismissible\" role=\"alert\" style=\"width: 200px;\">\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"alert\">\n\t\t\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"sr-only\">Close</span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<font size=\"3\" id=\"alert1\">Alert 1</font>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<!--yellow alert-->\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t\t<div class=\"alert alert-warning alert-dismissible\" role=\"alert\" style=\"width: 200px;\">\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"alert\">\n\t\t\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"sr-only\">Close</span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<font size=\"3\" id=\"alert2\">Alert 2\n\t\t\t\t\t\t\t\t\t\t</font>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<!--red alert-->\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t\t<div  class=\"alert alert-danger alert-dismissible\" role=\"alert\" style=\"width: 200px;\">\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"alert\">\n\t\t\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"sr-only\">Close</span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<font size=\"3\" id=\"alert3\">Alert 3\n\t\t\t\t\t\t\t\t\t\t</font>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t\t<div  class=\"alert alert-danger alert-dismissible\" role=\"alert\" style=\"width: 200px;\">\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"alert\">\n\t\t\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"sr-only\">Close</span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<font size=\"3\" id=\"alert4\">Alert 4\n\t\t\t\t\t\t\t\t\t\t</font>\n\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"btn-group\">\n\t\t\t\t\t\t\t\t\t<div  class=\"alert alert-danger alert-dismissible\" role=\"alert\" style=\"width: 200px;\">\n\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"alert\">\n\t\t\t\t\t\t\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n\t\t\t\t\t\t\t\t\t\t\t<span class=\"sr-only\">Close</span>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<font size=\"3\" id=\"alert5\">Alert 5\n\t\t\t\t\t\t\t\t\t\t</font>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class =\"row clearfix\">\n\t\t\t<div class = \"col-md-12 column\">\n\t\t\t\t<div class=\"jumbotron\" style = \"width:100%; height:1200px; padding:0px; background-color:white\">\n\t\t\t\t\t<div style = \"width:100%; border-radius:20px\">\n\t\t\t\t\t\t<table style=\"margin:auto\">\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th style=\"text-align:center; padding-left:15px; padding-right:15px\"><center><font size=\"3\">Motion</font></center></th>\n\t\t\t\t\t\t\t\t<th style=\"text-align:center; padding-left:15px; padding-right:15px\"><center><font size=\"3\">Light</font></center></th>\n\t\t\t\t\t\t\t\t<th style=\"text-align:center; padding-left:15px; padding-right:15px\"><center><font size=\"3\">Temperature</font></center></th>\n\t\t\t\t\t\t\t\t<th style=\"text-align:center; padding-left:15px; padding-right:15px\"><center><font size=\"3\">Gas</font></center></th>\n\t\t\t\t\t\t\t\t<th style=\"text-align:center; padding-left:15px; padding-right:15px\"><center><font size=\"3\">Seismic</font></center></th>\n\t\t\t\t\t\t\t\t<th style=\"text-align:center; padding-left:15px; padding-right:15px\"><center><font size=\"3\">Flood</font></center></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td><center><input onclick=\"\" type=\"checkbox\"></center></td>\n\t\t\t\t\t\t\t\t<td><center><input onclick=\"\" type=\"checkbox\"></center></td>\n\t\t\t\t\t\t\t\t<td><center><input onclick=\"\" type=\"checkbox\"></center></td>\n\t\t\t\t\t\t\t\t<td><center><input onclick=\"\" type=\"checkbox\"></center></td>\n\t\t\t\t\t\t\t\t<td><center><input onclick=\"\" type=\"checkbox\"></center></td>\n\t\t\t\t\t\t\t\t<td><center><input onclick=\"\" type=\"checkbox\"></center></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td><center><img style = \"height:50px\" src = \"img/movement.png\"/></center></td>\n\t\t\t\t\t\t\t\t<td><center><img style = \"height:50px\" src = \"img/light.png\"/></center></td>\n\t\t\t\t\t\t\t\t<td><center><img style = \"height:50px\" src = \"img/temperature.png\"/></center></td>\n\t\t\t\t\t\t\t\t<td><center><img style = \"height:50px\" src = \"img/gas.png\"/></center></td>\n\t\t\t\t\t\t\t\t<td><center><img style = \"height:50px\" src = \"img/earthquake.png\"/></center></td>\n\t\t\t\t\t\t\t\t<td><center><img style = \"height:50px\" src = \"img/flood.png\"/></center</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- map -->\n\t\t\t\t\t<div id=\"map_canvas\" style=\"margin-top: 15px;\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</body>\n</html>\n", "encoding": "utf-8"}