{"url": "https://www.ics.uci.edu/~eppstein/cgt/mancala-connectivity.html", "content": "<!DOCTYPE html PUBLIC \"-//IETF//DTD HTML 2.0//EN\">\n<html>\n<head>\n<title></title>\n</head>\n<body>\n<hr>\n<pre>\n<b>From:</b>           <a href=\n\"mailto:mathwft@math.canterbury.ac.nz\">mathwft@math.canterbury.ac.nz</a> (Bill Taylor)\n<b>Date:</b>           29 Jul 1997 02:57:37 GMT\n<b>Newsgroups:</b>     rec.games.abstract,sci.math,rec.puzzles\n<b>Subject:</b>        Yann's MANCALA problem - solved!\n</pre>\n\n<hr>\n<pre>\nSome while ago, and again a fortnight ago, David Yann posted a very\ninteresting problem based on the Mancala group of games.\nHere again is his mathematically abstracted variant of the games.\n\n####################################################################\n\nConsider a (finite) circular list of boxes and a (finite) set of\ntokens. At any time the tokens are distributed between the boxes;\na box may contain any number of tokens (including none at all).\n\nA move consists in taking all the tokens from one of the nonempty\nboxes and redistributing them clockwise, one token at a time,\ninto the boxes, starting with the one following the emptied box -\nand without omitting that box.\n\nThe question is: given two distributions A and B of the tokens, is\nthere ALWAYS a series of moves which can bring the game from A to B ?\n\n####################################################################\n\nThis is a fascinating problem, to gamers and mathematicians alike,\nand if you want to give it a try yourself, do not read any further yet!\n\nDavid Yann goes on to note:-\n&gt;&gt;&gt;\nThe apparent, \"practical\" answer is yes: I haven't been able to\ncome up with a counter-example yet, and I strongly doubt there is\nany; on the other hand, I cannot figure any proof of that property\n- except in the obvious subcase in which there are less tokens\nthan boxes. Also, it is very easy to bring all of the tokens\ninto any of the boxes.\n\nOf course that problem is not extraordinarily general or even\nuseful, but it has a world of variants; and even the subproblem\nwith only two boxes is difficult enough, in my opinion.\n&lt;&lt;&lt;\n\nAll of this is very true.\n\n[SPOILER]\nv\nv\nv\nv\n..\n..\n..\n..\n..\n..\n..\n..\n..\n..\n..\n..\n..\n..\n..\n..\nv\nv\n\nI believe I have a complete solution to the problem, which I write\nup informally here.\n\nFirstly - the solution is YES:- it is possible to get from any position\n                                to any other position.\n\nSecondly - I too, like David, tried various ways to get a construcvtive\nsolution, (his second post contains some heroic efforts in this direction),\nbut finally achieved it with some simple-ish graph theory.\n\nThe position-tree is a classic example of a directed graph with both\nmultiple arcs, and loops; (as is quite common with abstract games).\nAnd for that reason alone is a fun scenario for graph theory teachers.\n\nIt is possible to regard positions as being defined only up to\nrotational isomorphism, or as completely distinct.  i.e. regarding\n(1,2,3) and (2,3,1) as the same, or different, respectively. I adopt\nthe former view, though either is quite convenient; the proof is the\nsame either way.\n\nNote that it *is* possible for loops to exist:-  (2,3,1)--&gt;(3,1,2) by\nunloading the 3; and multiple arcs:- (2,2,1)--&gt;(3,2,0) by unloading the\nleft-hand 2, or the 1.  (Taking the sowing direction as left to right).\n\nNow for the proof.\n\n-------------------\n\nFirstly note it is possible to pile up all the tokens into one box;\n(into *any* box in the nonisomorphic treatment).  Just keep emptying\nany loaded boxes *except* your target box - and eventually all will\ncome to rest there.  So  (N,0,0,0,...,0,0)  is a \"universal target\".\n\nNow, we note this crucial phenomenon:-  For any position, there are\nalways the *same number* of arcs in as there are arcs out.\n\n---&gt;\nLook at a \"typical\" position...  say  (4,3,5,4,6).   Clearly there are\n5 arcs out of it.  There are also 5 arcs in:- the 3 box is the only one\nthat could have been unloaded, and it could have had 15,16,17,18 or 19\ntokens in it - depending on where the last token landed.  So 5 different\npositions are all that could have led to this.\n\nIf there are repeated smallest boxes, it is just a little more complex:\nposition (2,4,2,3,6) could have been entered by emptying the first 2,\nwith either 10 or 11 tokens in it; or the 2nd 2, with 10,11 or 12 tokens.\nSimilarly for any number of equal minimum boxes.\n\nIf some boxes are zero, this merely reduces both possibilities.\nPosition (0,4,0,2,7) has only 3 arcs out; but also 3 in, from 1 token\non the first 0-cell, or 1 or 2 on the second.  Similarly for any others.\n\nFinally - we have proceeded as if rotated positions were being counted\nas different, (easiest to do); but if not, it merely divides both\nin-arcs and out-arcs by the same index.  e.g.  (2,2,2,2,2) has 5\nisomorphic out-arcs, only 1 distinct; but also 5 in-arcs (from above),\nwhich must be isomorphic (by symmetry).  Similarly,  (2,4,2,4,2,4)\nhas 6 out-arcs, only 2 roto-distinct; and 6 in-arcs, only 2 distinct.\n&lt;---\n\nSo then - we know that any box, and thus (easily) any group of boxes,\nhas the same number of ins and outs.  Informally, this means there are\nno groups acting as sources or sinks anywhere.  More precisely, look\nat  I = the set of positions inaccessible from the Universal Target\n(N,0,0,0,...,0). Thus the complementary set has all positions accessible\nfrom UT. But I has some exits to co-I (as anything can get to UT), thus\nI must have some *entries* from co-I. But this is impossible, else we\ncould get from UT into I !     So I = empty; and we are done.\n\n-------------------\n\nPhew!  What a mouthful.  But it is (EIIDSSM) a rather elegant proof.\n\nMore interestingly, it is utterly non-constructive.  Of course, any\ntheorem about finitely checkable procedures cannot be non-constructive\nin the *logical* sense, (one can just proceed by exhaustion); but as\nwe know (e.g. the game \"chomp\", or any strategy-stealing argument),\nthere are \"psychologically\" nonconstructive prooofs.\n\nMy guess is that they correspond to solution by non-polynomial methods,\n(e.g. by exhaustion).  If anyone has more to say on that particular\nsubject I'd be pleased to hear it.\n\nAFAIK this is an original proof.\nAnyone else know?     Another little deja news milestone!\n\n------------------\nA few further remarks.\n\nQuestion:- is it possible to obtain either loops or multiple arcs even\n           when regarding rotated positions as distinct? (No, I'm sure.)\n\nObservation:- it is not always possible to find a Hamiltonian directed\n              cycle through the position digraph, but it does always\n              seem to be if there are enough tokens compared to boxes.\n              (But try  e.g. 6 tokens and 2 boxes.)\n\nCan anyone find a result concerning HCs?\n\nCheers,  Bill.\n\n---------------------------------------------------------------------------\n   The sole purpose of the present appears to be to generate the future.\n---------------------------------------------------------------------------\n            Bill Taylor           <a href= \n\"mailto:W.Taylor@math.canterbury.ac.nz\">W.Taylor@math.canterbury.ac.nz</a>\n---------------------------------------------------------------------------\n          Life is a strange attractor in the chaos of the universe.\n---------------------------------------------------------------------------\n</pre>\n\n<hr>\n<pre>\n<b>From:</b>           Const Razinsky &lt;<a href= \n\"mailto:const@cimatron.co.il\">const@cimatron.co.il</a>&gt;\n<b>Date:</b>           Wed, 30 Jul 1997 17:37:53 +0000\n<b>Newsgroups:</b>     rec.games.abstract,sci.math,rec.puzzles\n<b>Subject:</b>        Re: Yann's MANCALA problem - solved!\n</pre>\n\n<hr>\n<pre>\nBill Taylor wrote:\n&gt;&gt; ---&gt;\n&gt; Look at a \"typical\" position...  say  (4,3,5,4,6).   Clearly there are\n&gt; 5 arcs out of it.  There are also 5 arcs in:- the 3 box is the only one\n&gt; that could have been unloaded, and it could have had 15,16,17,18 or 19\n&gt; tokens in it - depending on where the last token landed.  So 5 different\n&gt; positions are all that could have led to this.\n&gt; \n&gt; If there are repeated smallest boxes, it is just a little more complex:\n&gt; position (2,4,2,3,6) could have been entered by emptying the first 2,\n&gt; with either 10 or 11 tokens in it; or the 2nd 2, with 10,11 or 12 tokens.\n&gt; Similarly for any number of equal minimum boxes.\n&gt; \n&gt; If some boxes are zero, this merely reduces both possibilities.\n&gt; Position (0,4,0,2,7) has only 3 arcs out; but also 3 in, from 1 token\n&gt; on the first 0-cell, or 1 or 2 on the second.  Similarly for any others.\n&gt; \n&gt; Finally - we have proceeded as if rotated positions were being counted\n&gt; as different, (easiest to do); but if not, it merely divides both\n&gt; in-arcs and out-arcs by the same index.  e.g.  (2,2,2,2,2) has 5\n&gt; isomorphic out-arcs, only 1 distinct; but also 5 in-arcs (from above),\n&gt; which must be isomorphic (by symmetry).  Similarly,  (2,4,2,4,2,4)\n&gt; has 6 out-arcs, only 2 roto-distinct; and 6 in-arcs, only 2 distinct.\n&gt; &lt;---\n&gt; \n&gt; So then - we know that any box, and thus (easily) any group of boxes,\n&gt; has the same number of ins and outs. \n\nHowever, position (1,1,1) produces three ones :\n(0,2,1)  (1,0,2)  &amp;  (2,1,0) \nbut has six \"in-arcs\"\n(3,0,0) (0,3,0) (0,0,3) (2,0,1) (1,2,0) &amp; (0,1,2).\n-- \nCheers,\n\n Const Razinsky\n Cimatron  Ltd. Israel\n</pre>\n\n<hr>\n<pre>\n<b>From:</b>           <a href= \n\"mailto:dahm@informatik.uni-koblenz.de\">dahm@informatik.uni-koblenz.de</a> (Peter Dahm)\n<b>Date:</b>           30 Jul 1997 15:50:47 GMT\n<b>Newsgroups:</b>     rec.games.abstract,sci.math,rec.puzzles\n<b>Subject:</b>        Re: Yann's MANCALA problem - solved!\n</pre>\n\n<hr>\n<pre>\nIn article &lt;33DF7BF1.469B@cimatron.co.il&gt;,\n    Const Razinsky &lt;<a href=\n\"mailto:const@cimatron.co.il\">const@cimatron.co.il</a>&gt; writes:\n\n&gt;However, position (1,1,1) produces three ones :\n&gt;(0,2,1)  (1,0,2)  &amp;  (2,1,0) \n&gt;but has six \"in-arcs\"\n&gt;(3,0,0) (0,3,0) (0,0,3) (2,0,1) (1,2,0) &amp; (0,1,2).\nThe last produce (0,1,2), (2,0,1), (1,2,0), if you unload the 2.\nBut a more formal proof of indegree = outdegree would be interesting.\n\n-- \nPeter Dahm\nUniversitaet Koblenz-Landau,    e-mail: <a href= \n\"mailto:dahm@informatik.uni-koblenz.de\">dahm@informatik.uni-koblenz.de</a>\nInstitut fuer Softwaretechnik                 voice : +49 261 9119-409\nRheinau 1, D-56075 Koblenz, Germany           fax   : +49 261 9119-499\n\n                 Was wuerde Rudi Altig dazu sagen?\n</pre>\n\n<hr>\n<pre>\n<b>From:</b>           <a href=\n\"mailto:sethb@panix.com\">sethb@panix.com</a> (Seth Breidbart)\n<b>Date:</b>           30 Jul 1997 13:32:28 -0400\n<b>Newsgroups:</b>     rec.games.abstract,sci.math,rec.puzzles\n<b>Subject:</b>        Re: Yann's MANCALA problem - solved!\n</pre>\n\n<hr>\n<pre>\nIn article &lt;5rnnsn$k1c$1@newshost.uni-koblenz.de&gt;,\nPeter Dahm &lt;<a href=\n\"mailto:dahm@informatik.uni-koblenz.de\">dahm@informatik.uni-koblenz.de</a>&gt; wrote:\n&gt;In article &lt;33DF7BF1.469B@cimatron.co.il&gt;,\n&gt;    Const Razinsky &lt;<a href=\n\"mailto:const@cimatron.co.il\">const@cimatron.co.il</a>&gt; writes:\n&gt;\n&gt;&gt;However, position (1,1,1) produces three ones :\n&gt;&gt;(0,2,1)  (1,0,2)  &amp;  (2,1,0) \n&gt;&gt;but has six \"in-arcs\"\n&gt;&gt;(3,0,0) (0,3,0) (0,0,3) (2,0,1) (1,2,0) &amp; (0,1,2).\n&gt;The last produce (0,1,2), (2,0,1), (1,2,0), if you unload the 2.\n&gt;But a more formal proof of indegree = outdegree would be interesting.\n\nOut-degree is the number of non-zero entries.  For in-degree, note\nthat there's precisely one predecessor that drops its last token into\nany non-empty bucket (run the move backwards, picking up tokens as you\ngo and then dropping all the ones you're holding into the next bucket,\nwhich must be empty, and you can't pick up a token from an empty\nbucket so that must be where the move started).\n\nSeth\n</pre>\n\n<hr>\n<pre>\n<b>From:</b>           Don Woods &lt;<a href=\n\"mailto:don@clari.net\">don@clari.net</a>&gt;\n<b>Date:</b>           01 Aug 1997 12:46:17 -0700\n<b>Newsgroups:</b>     rec.games.abstract,sci.math,rec.puzzles\n<b>Subject:</b>        Re: Yann's MANCALA problem - solved!\n</pre>\n\n<hr>\n<pre>\n&gt; In article &lt;33DFD2A4.41C6@mail.lns.cornell.edu&gt;,\n&gt; Elliot Lipeles  &lt;<a href= \n\"mailto:lipeles@mail.lns.cornell.edu\">lipeles@mail.lns.cornell.edu</a>&gt; wrote:\n&gt; &gt;It has already been shown that you can get from any\n&gt; &gt;position to (N,0,0,...,0) using the normal operation.\n&gt; &gt;\n&gt; &gt;You can also get to this position by operating with\n&gt; &gt;the reverse operation: Just keep running the reverse\n&gt; &gt;operation on every space except the first. Since you\n&gt; &gt;everytime you pass over the first space you deposit\n&gt; &gt;one token and you can go until all the space are depleted,\n&gt; &gt;the first space will end up with all the tokens.\n\nThis is bogus.  This is not the \"reverse\" operation.  All you're\ndoing is running the normal operation counterclockwise instead of\nclockwise.\n\nThe reverse operation, as someone else posted, is as follows: start\nat any non-empty space.  Pick up one token from it, then proceed\ncounterclockwise picking up one token from each space until you come\nto a space which (by that time) is empty.  Drop all the collected\ntokens there.\n\nAs the earlier poster noted, this move is unique given the choice of\nstarting space, so it is an elegant way to prove that indegree equals\noutdegree.  (I.e., from any position, the number of normal moves and\nthe number of reverse moves each equals the number of non-empty spaces.)\nBut it is not obvious how to reach (N,0,0,...,0) from an arbitrary\nposition using the reverse operation.\n\nTry making the _normal_ (forward) move from (N,0,0,...,0).  This takes\nyou to position X, which is either (k-1,k,k,...,k,k-1,...,k-1) or\n(k,k,k,...,k), depending on whether N is a multiple of the number of\nspaces.  The ONLY way to reach (N,0,0,...,0) from ANY other position via\nreverse moves, has to get to this \"evenly spread\" position first.  And\nhow to do that seems far from obvious.\n\n    -- Don.\n\n-------------------------------------------------------------------------------\n-- \n-- Don Woods (<a href=\n\"mailto:don@clari.net\">don@clari.net</a>)             ClariNet provides on-line news.\n-- <a href=\n\"http://www.clari.net/~don\">http://www.clari.net/~don</a>                I provide personal opinions.\n--\n</pre>\n\n<hr>\n<pre>\n<b>From:</b>           Elliot Lipeles &lt;<a href= \n\"mailto:lipeles@mail.lns.cornell.edu\">lipeles@mail.lns.cornell.edu</a>&gt;\n<b>Date:</b>           Tue, 05 Aug 1997 19:10:16 -0400\n<b>Newsgroups:</b>     rec.games.abstract,sci.math,rec.puzzles\n<b>Subject:</b>        Re: Yann's MANCALA problem - solved!\n</pre>\n\n<hr>\n<pre>\nBill Taylor wrote:\n&gt; \n&gt; |&gt; You can also get to this position by operating with\n&gt; |&gt; the reverse operation: Just keep running the reverse\n&gt; |&gt; operation on every space except the first. Since you\n&gt; |&gt; everytime you pass over the first space you deposit\n&gt; |&gt; one token and you can go until all the space are depleted,\n&gt; |&gt; the first space will end up with all the tokens.\n&gt; \n&gt; What's all this nonsense?\n\nOkay, Okay \n\nI made a mistake\n\nhere is a real proof that you can go from any state to (N,O,O...0)\nusing the reverse operation\n\nIt has already been shown for the forward operation.\n\n-------------------------------------------------------------\nGiven an arbitrary state consider the set of all states that\nyou can get to via any sequence of reverse operations. This\nset is \"closed\" under the reverse operationm, so the \"in\" degree\nfor the entire set is zero.\n\nout degree set = out degree states - \"out\"'s give elements of the set\nin degree set = in degree states - \"in\"'s give members of the set\n\nNote that every out that gives and element of the set is an in\nthat gives an element of the set and \nout degree states = in degree states\nhas already been seen.\n\nso out degree set = in degree set = 0\n\nSo the out degree of the set is zero and any state can be sent\nto (N,0,0...0) via forward (out) operations so (N,0,0,..,0)\nmust be in the set of states that can be reached by the reverse\noperation.\n----------------------------------------------------------------\n\nThe rest of the proof is the same as the erroneous previous version.\n\nThis of course now hinges on the same details as the original \nproof by another poster and is now longer an constructive proof.\n</pre>\n</body>\n</html>\n\n", "encoding": "ascii"}