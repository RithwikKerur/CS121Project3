{"url": "https://www.ics.uci.edu/~rickl/courses/cs-171/0-ihler-2016-fq/Projects/ConnectK/scripts/compile_java", "content": "#!/bin/bash\nshopt -s extglob\n\n# Usage: compile M03  [or M04, etc.]\n\nmodule load java/1.8.0_20 python/3.5.1 gcc/4.8.2\nmodule load java/1.8.0_20 python/3.5.1 gcc/5.4.0\n\n# First, traverse the desired directory structure & look for directories with src/*.java\n#   clean objects; attempt to compile them; check objects exist (*AI.object); move to bin\n\nstart=$(pwd)\nfor file in Submissions/$1_*/*/*/bin/*AI.class ; do\n  #echo \" ===========================================================\"\n  echo \">>\" $file\n  path=${file%/bin/*}\n  #echo \"  Path \" $path\n  cd \"${path}/src\"\n  rm *AI.class 2>/dev/null\n  javac -cp /scratch/cs171/ConnectK_1.8_timer_enabled.jar *.java\n  if [ $? -ne 0 ]; then\n    gname=${file#*/M0*/}; gname=${gname%%_*}\n    echo $gname \" compile failed!\"\n  else\n    mv *AI.class \"../bin/byAlex.class\"\n  fi\n  echo\n  cd $start\ndone\n      \n# Now, traverse again & find the failures; log their compilations and output to screen for diagnosis\n  \nfor file in Submissions/$1_*/*/*/bin/*AI.class ; do\n  path=${file%/bin/*}\n  if [ ! -e \"${path}/bin/byAlex.class\" ]; then\n    echo \"=============================================================\"\n    echo \">>\" $file\n    #cd \"${path}/src\"\n    #g++ -I. -static-libstdc++ -static @(*.cpp|*.c|*.cc|*.cxx) -o byAlex > compile.log 2>&1\n    ##cat compile.log \n    printf \"\\n\\n\"\n    #cd $start\n  fi\ndone\n\n  \n\n", "encoding": "ascii"}