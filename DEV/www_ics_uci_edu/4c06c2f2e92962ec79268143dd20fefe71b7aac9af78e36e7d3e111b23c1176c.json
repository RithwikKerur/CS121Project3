{"url": "https://www.ics.uci.edu/~majumder/VC/211HW3/vlfeat/doc/api/homkermap.html", "content": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n   <html xmlns=\"http://www.w3.org/1999/xhtml\">\n <head>\n  <!-- IE Standards Mode -->\n  <meta content=\"IE=edge\" http-equiv=\"X-UA-Compatible\"></meta>\n  <!-- Favicon -->\n  <link href=\"../images/vl_blue.ico\" type=\"image/x-icon\" rel=\"icon\"></link>\n  <link href=\"../images/vl_blue.ico\" type=\"image/x-icon\" rel=\"shortcut icon\"></link>\n  <!-- Page title -->\n  <title>VLFeat - Documentation > C API</title>\n  <!-- Stylesheets -->\n  <link href=\"../vlfeat.css\" type=\"text/css\" rel=\"stylesheet\"></link>\n  <link href=\"../pygmentize.css\" type=\"text/css\" rel=\"stylesheet\"></link>\n  <style xml:space=\"preserve\">\n    /* fixes a conflict between Pygmentize and MathJax */\n    .MathJax .mo, .MathJax .mi {color: inherit ! important}\n  </style>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"doxygen.css\"></link>\n  <!-- Scripts-->\n  <script type=\"text/javascript\" src=\"jquery.js\"></script>\n<script type=\"text/javascript\" src=\"dynsections.js\"></script>\n  <!-- MathJax -->\n  <script xml:space=\"preserve\" type=\"text/x-mathjax-config\">\n    MathJax.Hub.Config({\n    tex2jax: {\n      inlineMath: [ ['$','$'], ['\\\\(','\\\\)'] ],\n      processEscapes: true,\n    },\n    TeX: {\n      Macros: {\n        balpha: '\\\\boldsymbol{\\\\alpha}',\n        bc: '\\\\mathbf{c}',\n        be: '\\\\mathbf{e}',\n        bg: '\\\\mathbf{g}',\n        bq: '\\\\mathbf{q}',\n        bu: '\\\\mathbf{u}',\n        bv: '\\\\mathbf{v}',\n        bw: '\\\\mathbf{w}',\n        bx: '\\\\mathbf{x}',\n        by: '\\\\mathbf{y}',\n        bz: '\\\\mathbf{z}',\n        bsigma: '\\\\mathbf{\\\\sigma}',\n        sign: '\\\\operatorname{sign}',\n        diag: '\\\\operatorname{diag}',\n        real: '\\\\mathbb{R}',\n      },\n      equationNumbers: { autoNumber: 'AMS' }\n      }\n    });\n  </script>\n  <script src=\"http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML\" xml:space=\"preserve\" type=\"text/javascript\"></script>\n  <!-- Google Custom Search -->\n  <script xml:space=\"preserve\">\n    (function() {\n    var cx = '003215582122030917471:oq23albfeam';\n    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;\n    gcse.src = (document.location.protocol == 'https' ? 'https:' : 'http:') +\n    '//www.google.com/cse/cse.js?cx=' + cx;\n    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);\n    })();\n  </script>\n  <!-- Google Analytics -->\n  <script xml:space=\"preserve\" type=\"text/javascript\">\n    var _gaq = _gaq || [];\n    _gaq.push(['_setAccount', 'UA-4936091-2']);\n    _gaq.push(['_trackPageview']);\n    (function() {\n    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\n    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\n    })();\n  </script>\n </head>\n <!-- Body Start -->\n <body>\n  <div id=\"header-section\">\n    <div id=\"header\">\n      <!-- Google CSE Search Box -->\n      <div class=\"searchbox\">\n        <gcse:searchbox-only autoCompleteMaxCompletions=\"5\" autoCompleteMatchType=\"any\" resultsUrl=\"http://www.vlfeat.org/search.html\"></gcse:searchbox-only>\n      </div>\n      <h1 id=\"id-16\"><a shape=\"rect\" href=\"../index.html\" class=\"plain\"><span id=\"vlfeat\">VLFeat</span><span id=\"dotorg\">.org</span></a></h1>\n    </div>\n    <div id=\"sidebar\"> <!-- Navigation Start -->\n      <ul>\n<li><a href=\"../index.html\">Home</a>\n<ul>\n<li><a href=\"../about.html\">About</a>\n</li>\n<li><a href=\"../license.html\">License</a>\n</li>\n</ul></li>\n<li><a href=\"../download.html\">Download</a>\n<ul>\n<li><a href=\"../install-matlab.html\">Using from MATLAB</a>\n</li>\n<li><a href=\"../install-octave.html\">Using from Octave</a>\n</li>\n<li><a href=\"../install-shell.html\">Using from the command line</a>\n</li>\n<li><a href=\"../install-c.html\">Using from C</a>\n<ul>\n<li><a href=\"../xcode.html\">Xcode</a>\n</li>\n<li><a href=\"../vsexpress.html\">Visual C++</a>\n</li>\n<li><a href=\"../gcc.html\">g++</a>\n</li>\n</ul></li>\n<li><a href=\"../compiling.html\">Compiling</a>\n<ul>\n<li><a href=\"../compiling-unix.html\">Compiling on UNIX-like platforms</a>\n</li>\n<li><a href=\"../compiling-windows.html\">Compiling on Windows</a>\n</li>\n</ul></li>\n</ul></li>\n<li><a href=\"../overview/tut.html\">Tutorials</a>\n<ul>\n<li><a href=\"../overview/frame.html\">Local feature frames</a>\n</li>\n<li><a href=\"../overview/covdet.html\">Covariant feature detectors</a>\n</li>\n<li><a href=\"../overview/hog.html\">HOG features</a>\n</li>\n<li><a href=\"../overview/sift.html\">SIFT detector and descriptor</a>\n</li>\n<li><a href=\"../overview/dsift.html\">Dense SIFT</a>\n</li>\n<li><a href=\"../overview/liop.html\">LIOP local descriptor</a>\n</li>\n<li><a href=\"../overview/mser.html\">MSER feature detector</a>\n</li>\n<li><a href=\"../overview/imdisttf.html\">Distance transform</a>\n</li>\n<li><a href=\"../overview/encodings.html\">Fisher Vector and VLAD</a>\n</li>\n<li><a href=\"../overview/gmm.html\">Gaussian Mixture Models</a>\n</li>\n<li><a href=\"../overview/kmeans.html\">K-means clustering</a>\n</li>\n<li><a href=\"../overview/aib.html\">Agglomerative Infromation Bottleneck</a>\n</li>\n<li><a href=\"../overview/quickshift.html\">Quick shift superpixels</a>\n</li>\n<li><a href=\"../overview/slic.html\">SLIC superpixels</a>\n</li>\n<li><a href=\"../overview/svm.html#tut.svm\">Support Vector Machines (SVMs)</a>\n</li>\n<li><a href=\"../overview/kdtree.html\">KD-trees and forests</a>\n</li>\n<li><a href=\"../overview/plots-rank.html\">Plotting AP and ROC curves</a>\n</li>\n<li><a href=\"../overview/utils.html\">Miscellaneous utilities</a>\n</li>\n<li><a href=\"../overview/ikm.html\">Integer K-means</a>\n</li>\n<li><a href=\"../overview/hikm.html\">Hierarchical integer k-means</a>\n</li>\n</ul></li>\n<li><a href=\"../applications/apps.html\">Applications</a>\n</li>\n<li class='active'><a href=\"../doc.html\">Documentation</a>\n<ul>\n<li><a href=\"../matlab/matlab.html\">MATLAB API</a>\n</li>\n<li class='active' class='activeLeaf'><a href=\"index.html\">C API</a>\n</li>\n<li><a href=\"../man/man.html\">Man pages</a>\n</li>\n</ul></li>\n</ul>\n    </div> <!-- sidebar -->\n  </div>\n  <div id=\"headbanner-section\">\n    <div id=\"headbanner\">\n      <span class='page'><a href=\"../doc.html\">Documentation</a></span><span class='separator'>></span><span class='page'><a href=\"index.html\">C API</a></span>\n    </div>\n  </div>\n  <div id=\"content-section\">\n    <div id=\"content-wrapper\">\n      <div id=\"content\">\n      <!-- <pagestyle href=\"%pathto:root;api/tabs.css\"/> -->\n      <div class=\"doxygen\">\n<div id=\"top\">\n<div id=\"top\">\n<!-- Generated by Doxygen 1.8.7 -->\n  <div id=\"navrow1\" class=\"tabs\">\n    <ul class=\"tablist\">\n      <li><a href=\"index.html\"><span>Main&#160;Page</span></a></li>\n      <li class=\"current\"><a href=\"pages.html\"><span>Related&#160;Pages</span></a></li>\n      <li><a href=\"annotated.html\"><span>Data&#160;Structures</span></a></li>\n      <li><a href=\"files.html\"><span>Files</span></a></li>\n    </ul>\n  </div>\n<div id=\"nav-path\" class=\"navpath\">\n  <ul>\n<li class=\"navelem\"><a class=\"el\" href=\"index.html\">Vision Lab Features Library (VLFeat)</a></li>  </ul>\n</div>\n</div><!-- top -->\n<div class=\"header\">\n  <div class=\"headertitle\">\n<div class=\"title\">Homogeneous kernel map </div>  </div>\n</div><!--header-->\n<div class=\"contents\">\n<div class=\"toc\"><h3>Table of Contents</h3>\n<ul><li class=\"level1\"><a href=\"#homkermap-starting\">Getting started</a></li>\n<li class=\"level1\"><a href=\"#homkermap-fundamentals\">Fundamentals</a><ul><li class=\"level2\"><a href=\"#homkermap-overview-negative\">Extension to the negative reals</a></li>\n<li class=\"level2\"><a href=\"#homkermap-overview-homogeneity\">Homogeneity degree</a></li>\n<li class=\"level2\"><a href=\"#homkermap-overview-window\">Windowing and period</a></li>\n</ul>\n</li>\n<li class=\"level1\"><a href=\"#homkermap-details\">Implementation details</a></li>\n</ul>\n</div>\n<div class=\"textblock\"><dl class=\"section author\"><dt>Author</dt><dd>Andrea Vedaldi</dd></dl>\n<p><a class=\"el\" href=\"homkermap_8h.html\">homkermap.h</a> implements the homogeneous kernel maps introduced in <a class=\"el\" href=\"citelist.html#CITEREF_vedaldi10efficient\">[30]</a> ,<a class=\"el\" href=\"citelist.html#CITEREF_vedaldi12efficient\">[31]</a> . Such maps are efficient linear representations of popular kernels such as the intersection, \\(\\chi^2\\), and Jensen-Shannon ones.</p>\n<h1><a class=\"anchor\" id=\"homkermap-starting\"></a>\nGetting started</h1>\n<p>The homogeneous kernel map is implemented as an object of type <a class=\"el\" href=\"homkermap_8h.html#a5606496b3524c531aef85d63e1f7d0d9\" title=\"Homogeneous kernel map object. \">VlHomogeneousKernelMap</a>. To use thois object, first create an instance by using <a class=\"el\" href=\"homkermap_8c.html#a87e86a2981550ae60f565575c32966ea\" title=\"Create a new homgeneous kernel map. \">vl_homogeneouskernelmap_new</a>, then use <a class=\"el\" href=\"homkermap_8h.html#aa46c3f8cfdf0f1334727c27c13e77608\" title=\"Evaluate map. \">vl_homogeneouskernelmap_evaluate_d</a> or <a class=\"el\" href=\"homkermap_8h.html#a2ea4628d7a00b9543112fc4dd2d8f380\">vl_homogeneouskernelmap_evaluate_f</a> (depdening on whether the data is <code>double</code> or <code>float</code>) to compute the feature map \\( \\Psi(x) \\). When done, dispose of the object by calling <a class=\"el\" href=\"homkermap_8c.html#a9a059f792833cb10e62f5f476f99f0da\" title=\"Delete an object instance. \">vl_homogeneouskernelmap_delete</a>.</p>\n<div class=\"fragment\"><div class=\"line\"><span class=\"keywordtype\">double</span> gamma = 1.0 ;</div>\n<div class=\"line\"><span class=\"keywordtype\">int</span> order = 1 ;</div>\n<div class=\"line\"><span class=\"keywordtype\">double</span> period = -1 ; <span class=\"comment\">// use default</span></div>\n<div class=\"line\"><span class=\"keywordtype\">double</span> psi [3] ;</div>\n<div class=\"line\"><a class=\"code\" href=\"host_8h.html#a0ee26101458c663510d620e3ee7e2555\">vl_size</a> psiStride = 1 ;</div>\n<div class=\"line\"><span class=\"keywordtype\">double</span> x = 0.5 ;</div>\n<div class=\"line\"><a class=\"code\" href=\"homkermap_8h.html#a5606496b3524c531aef85d63e1f7d0d9\">VlHomogeneousKernelMap</a> * hom = <a class=\"code\" href=\"homkermap_8c.html#a87e86a2981550ae60f565575c32966ea\">vl_homogeneouskernelmap_new</a>(</div>\n<div class=\"line\">  <a class=\"code\" href=\"homkermap_8h.html#a13074dd7edec5d8c86dde5da80e8d8d8a0ddb0dafd4c63088336d983b944ac5df\">VlHomogeneousKernelChi2</a>, gamma, order, period,</div>\n<div class=\"line\">  <a class=\"code\" href=\"homkermap_8h.html#a35a05da3e1eb781a6fa997ec9be69a62a83070b8b6be773c61bc3f19fc4583053\">VlHomogeneousKernelMapWindowRectangular</a>) ;</div>\n<div class=\"line\"><a class=\"code\" href=\"homkermap_8h.html#aa46c3f8cfdf0f1334727c27c13e77608\">vl_homogeneouskernelmap_evaluate_d</a>(hom, psi, psiStride, x) ;</div>\n<div class=\"line\"><a class=\"code\" href=\"homkermap_8c.html#a9a059f792833cb10e62f5f476f99f0da\">vl_homogeneouskernelmap_delete</a>(x) ;</div>\n</div><!-- fragment --><p>The constructor <a class=\"el\" href=\"homkermap_8c.html#a87e86a2981550ae60f565575c32966ea\" title=\"Create a new homgeneous kernel map. \">vl_homogeneouskernelmap_new</a> takes the kernel type <code>kernel</code> (see <a class=\"el\" href=\"homkermap_8h.html#a13074dd7edec5d8c86dde5da80e8d8d8\" title=\"Type of kernel. \">VlHomogeneousKernelType</a>), the homogeneity order <code>gamma</code> (use one for the standard \\(1\\)-homogeneous kernels), the approximation order <code>order</code> (usually order one is enough), the period <em>period</em> (use a negative value to use the default period), and a window type <code>window</code> (use <a class=\"el\" href=\"homkermap_8h.html#a35a05da3e1eb781a6fa997ec9be69a62a83070b8b6be773c61bc3f19fc4583053\">VlHomogeneousKernelMapWindowRectangular</a> if unsure). The approximation order trades off the quality and dimensionality of the approximation. The resulting feature map \\( \\Psi(x) \\), computed by <a class=\"el\" href=\"homkermap_8h.html#aa46c3f8cfdf0f1334727c27c13e77608\" title=\"Evaluate map. \">vl_homogeneouskernelmap_evaluate_d</a> or <a class=\"el\" href=\"homkermap_8h.html#a2ea4628d7a00b9543112fc4dd2d8f380\">vl_homogeneouskernelmap_evaluate_f</a> , is <code>2*order+1</code> dimensional.</p>\n<p>The code pre-computes the map \\( \\Psi(x) \\) for efficient evaluation. The table spans values of \\( x \\) in the range \\([2^{-20}, 2^{8}) \\). In particular, values smaller than \\( 2^{-20} \\) are treated as zeroes (which results in a null feature).</p>\n<h1><a class=\"anchor\" id=\"homkermap-fundamentals\"></a>\nFundamentals</h1>\n<p>The <em>homogeneous kernel map</em> is a finite dimensional linear approximation of homogeneous kernels, including the intersection, \\(\\chi^2\\), and Jensen-Shannon kernels. These kernels are frequently used in computer vision applications because they are particular suited to data in the format of histograms, which includes many common visual descriptors.</p>\n<p>Let \\(x,y \\in \\mathbb{R}_+\\) be non-negative scalars and let \\(k(x,y) \\in \\mathbb{R}\\) be an homogeneous kernel such as the \\(\\chi^2\\) and or the intersection ones:</p>\n<p class=\"formulaDsp\">\n\\[ k_{\\mathrm{inters}}(x,y) = \\min\\{x, y\\}, \\quad k_{\\chi^2}(x,y) = 2 \\frac{(x - y)^2}{x+y}. \\]\n</p>\n<p>For vectorial data \\( \\mathbf{x},\\mathbf{y} \\in \\mathbb{R}_+^d \\), the homogeneous kernels is defined as an <em>additive combination</em> of scalar kernels \\(K(\\mathbf{x},\\mathbf{y}) = \\sum_{i=1}^d k(x_i,y_i)\\).</p>\n<p>The <em>homogeneous kernel map</em> of order \\(n\\) is a vector function \\(\\Psi(x) \\in \\mathbb{R}^{2n+1}\\) such that, for any choice of \\(x, y \\in \\mathbb{R}_+\\), the following approximation holds:</p>\n<p class=\"formulaDsp\">\n\\[ k(x,y) \\approx \\langle \\Psi(x), \\Psi(y) \\rangle. \\]\n</p>\n<p>Given the feature map for the scalar case, the corresponding feature map \\(\\Psi(\\mathbf{x})\\) for the vectorial case is obtained by stacking \\([\\Psi(x_1), \\dots, \\Psi(x_n)]\\). Note that the stacked feature \\(\\Psi(\\mathbf{x})\\) has dimension \\(d(2n+1)\\).</p>\n<p>Using linear analysis tools (e.g. a linear support vector machine) on top of dataset that has been encoded by the homogeneous kernel map is therefore approximately equivalent to using a method based on the corresponding non-linear kernel.</p>\n<h2><a class=\"anchor\" id=\"homkermap-overview-negative\"></a>\nExtension to the negative reals</h2>\n<p>Any positive (semi-)definite kernel \\(k(x,y)\\) defined on the non-negative reals \\(x,y \\in \\mathbb{R}_+\\) can be extended to the entire real line by using the definition:</p>\n<p class=\"formulaDsp\">\n\\[ k_\\pm(x,y) = \\operatorname{sign}(x) \\operatorname{sign}(y) k(|x|,|y|). \\]\n</p>\n<p>The homogeneous kernel map implements this extension by defining \\(\\Psi_\\pm(x) = \\operatorname{sign}(x) \\Psi(|x|)\\). Note that other extensions are possible, such as</p>\n<p class=\"formulaDsp\">\n\\[ k_\\pm(x,y) = H(xy) \\operatorname{sign}(y) k(|x|,|y|) \\]\n</p>\n<p>where \\(H\\) is the Heaviside function, but may result in higher dimensional feature maps.</p>\n<h2><a class=\"anchor\" id=\"homkermap-overview-homogeneity\"></a>\nHomogeneity degree</h2>\n<p>Any (1-)homogeneous kernel \\(k_1(x,y)\\) can be extended to a so called \\(\\gamma\\)-homgeneous kernel \\(k_\\gamma(x,y)\\) by the definition</p>\n<p class=\"formulaDsp\">\n\\[ k_\\gamma(x,y) = (xy)^{\\frac{\\gamma}{2}} \\frac{k_1(x,y)}{\\sqrt{xy}} \\]\n</p>\n<p>Smaller values of \\(\\gamma\\) enhance the kernel non-linearity and are sometimes beneficial in applications (see <a class=\"el\" href=\"citelist.html#CITEREF_vedaldi10efficient\">[30]</a> ,<a class=\"el\" href=\"citelist.html#CITEREF_vedaldi12efficient\">[31]</a> for details).</p>\n<h2><a class=\"anchor\" id=\"homkermap-overview-window\"></a>\nWindowing and period</h2>\n<p>This section discusses aspects of the homogeneous kernel map which are more technical and may be skipped. The homogeneous kernel map approximation is based on periodizing the kernel; given the kernel signature</p>\n<p class=\"formulaDsp\">\n\\[ \\mathcal{K}(\\lambda) = k(e^{\\frac{\\lambda}{2}}, e^{-\\frac{\\lambda}{2}}) \\]\n</p>\n<p>the homogeneous kernel map is a feature map for the windowed and periodized kernel whose signature is given by</p>\n<p class=\"formulaDsp\">\n\\[ \\hat{\\mathcal{K}}(\\lambda) = \\sum_{i=-\\infty}^{+\\infty} \\mathcal{K}(\\lambda + k \\Lambda) W(\\lambda + k \\Lambda) \\]\n</p>\n<p>where \\(W(\\lambda)\\) is a windowing function and \\(\\Lambda\\) is the period. This implementation of the homogeneous kernel map supports the use of a <em>uniform window</em> ( \\( W(\\lambda) = 1 \\)) or of a <em>rectangular window</em> ( \\( W(\\lambda) = \\operatorname{rect}(\\lambda/\\Lambda) \\)). Note that \\( \\lambda = \\log(y/x) \\) is equal to the logarithmic ratio of the arguments of the kernel. Empirically, the rectangular window seems to have a slight edge in applications.</p>\n<h1><a class=\"anchor\" id=\"homkermap-details\"></a>\nImplementation details</h1>\n<p>This implementation uses the expressions given in <a class=\"el\" href=\"citelist.html#CITEREF_vedaldi10efficient\">[30]</a> ,<a class=\"el\" href=\"citelist.html#CITEREF_vedaldi11efficient\">vedaldi11efficient</a> to compute in closed form the maps \\(\\Psi(x)\\) for the supported kernel types. For efficiency reasons, it precomputes \\(\\Psi(x)\\) for a large range of values of the argument when the homogeneous kernel map object is created.</p>\n<p>The internal table stores \\(\\Psi(x) \\in \\mathbb{R}^{2n+1}\\) by sampling \\(x\\geq 0\\). This uses the internal decomposition of IEEE floating point representations (<code>float</code> and <code>double</code>) in mantissa and exponent: </p><pre>\n  x = mantissa * (2**exponent),\n  minExponent &lt;= exponent &lt;= maxExponent,\n  1 &lt;= matnissa &lt; 2.\n</pre><p> Each octave is further sampled in <code>numSubdivisions</code> sublevels.</p>\n<p>When the map \\(\\Psi(x)\\) is evaluated, <code>x</code> is decomposed again into exponent and mantissa to index the table. The output is obtained by bilinear interpolation from the appropriate table entries. </p>\n</div></div><!-- contents -->\n        <!-- Doc Here -->\n      </div>\n      </div>\n      <div class=\"clear\">&nbsp;</div>\n    </div>\n  </div> <!-- content-section -->\n  <div id=\"footer-section\">\n    <div id=\"footer\">\n      &copy; 2007-13 The authors of VLFeat\n    </div> <!-- footer -->\n  </div> <!-- footer section -->\n </body>\n <!-- Body ends -->\n</html>\n", "encoding": "ascii"}