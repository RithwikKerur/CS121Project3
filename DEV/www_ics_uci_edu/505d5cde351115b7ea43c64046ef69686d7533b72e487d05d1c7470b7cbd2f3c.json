{"url": "https://www.ics.uci.edu/~majumder/VC/211HW3/vlfeat/make/bin.mak", "content": "# file: bin.mak\n# description: Build VLFeat command line utilities\n# author: Andrea Vedaldi\n\n# Copyright (C) 2007-12 Andrea Vedaldi and Brian Fulkerson.\n# All rights reserved.\n#\n# This file is part of the VLFeat library and is made available under\n# the terms of the BSD license (see the COPYING file).\n\nall: bin-all\nclean: bin-clean\narchclean: bin-archclean\ndistclean: bin-distclean\ninfo: bin-info\n\n# --------------------------------------------------------------------\n#                                                        Configuration\n# --------------------------------------------------------------------\n\nBIN_CFLAGS = $(STD_CFLAGS) -I$(VLDIR)\nBIN_CFLAGS += $(if $(DISABLE_THREADS),,-pthread)\nBIN_CFLAGS += $(if $(DISABLE_OPENMP),,-fopenmp)\n\nBIN_LDFLAGS = $(STD_LDFLAGS) -L$(BINDIR) -lvl -lm\nBIN_LDFLAGS += $(if $(DISABLE_THREADS),,-lpthread)\nBIN_LDFLAGS += $(if $(DISABLE_OPENMP),,-fopenmp)\n\n# Mac OS X Intel 32\nifeq ($(ARCH),maci)\nendif\n\n# Mac OS X Intel 64\nifeq ($(ARCH),maci64)\nendif\n\n# Linux-32\nifeq ($(ARCH),glnx86)\nBIN_LDFLAGS += -Wl,--rpath,\\$$ORIGIN/\nendif\n\n# Linux-64\nifeq ($(ARCH),glnxa64)\nBIN_LDFLAGS += -Wl,--rpath,\\$$ORIGIN/\nendif\n\n# --------------------------------------------------------------------\n#                                                                Build\n# --------------------------------------------------------------------\n\n# On Mac OS X the library install_name is prefixed with @loader_path/.\n# At run time this causes the loader to search for a local copy of the\n# library for any binary which is linked against it. The install_name\n# can be modified later by install_name_tool.\n\nbin_src := $(wildcard $(VLDIR)/src/*.c)\nbin_tgt := $(addprefix $(BINDIR)/, $(patsubst %.c,%,$(notdir $(bin_src))))\nbin_dep := $(addsuffix .d, $(bin_tgt))\n\ndeps += $(bin_dep)\narch_bins += $(bin_tgt)\ncomm_bins +=\n\n.PHONY: bin-all, bin-info\n.PHONY: bin-clean, bin-archclean, bin-distclean\nno_dep_targets += bin-dir bin-clean bin-archclean bin-distclean\nno_dep_targets += bin-info\n\nbin-all: $(dll-dir) $(bin_tgt)\n\n# BIN_LDFLAGS includes the libraries to link to and must be\n# specified after the object \"$<\" that uses them. If not, stricter\n# linkers (e.g. --as-needed option with the GNU toolchain)\n# will break as they will not include the dependencies. See\n# also http://wiki.debian.org/ToolChain/DSOLinking\n\n$(BINDIR)/% : $(VLDIR)/src/%.c $(dll_tgt)\n\t$(call C,CC) $(BIN_CFLAGS) \"$<\" $(BIN_LDFLAGS) -o \"$@\"\n\n$(BINDIR)/%.d : $(VLDIR)/src/%.c $(dll-dir)\n\t$(call C,CC) $(BIN_CFLAGS) -M -MT  \\\n\t       '$(BINDIR)/$* $(BINDIR)/$*.d' \\\n\t       \"$<\" -MF \"$@\"\n\nbin-clean:\n\trm -f $(bin_dep)\n\nbin-archclean: bin-clean\n\nbin-distclean:\n\nbin-info:\n\t$(call echo-title,Command line utilities)\n\t$(call dump-var,bin_src)\n\t$(call dump-var,bin_tgt)\n\t$(call dump-var,bin_dep)\n\t$(call echo-var,BIN_CFLAGS)\n\t$(call echo-var,BIN_LDFLAGS)\n\t@echo\n\n# Local variables:\n# mode: Makefile\n# End:\n", "encoding": "ascii"}