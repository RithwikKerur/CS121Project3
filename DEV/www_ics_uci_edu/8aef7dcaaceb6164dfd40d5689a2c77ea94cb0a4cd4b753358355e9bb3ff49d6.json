{"url": "https://www.ics.uci.edu/~dechter/courses/ics-275a/winter-2016/code/msq.mzn", "content": "% magic square problem\n\ninclude \"alldifferent.mzn\";\n\nint: n = 3;\n\narray[1..n,1..n] of var 1..(n*n): square;\n\n%int: sum_val = n*(n*n+1) div 2;\nvar 1..(n*n+(n*n-1)+(n*n)-2) : sum_val;\n\nconstraint\nalldifferent(r,c in 1..n) (square[r,c])\n/\\\nforall (c in 1..n) (sum (r in 1..n) (square[r,c]) = sum_val)\n/\\\nforall (r in 1..n) (sum (c in 1..n) (square[r,c]) = sum_val)\n/\\\nsum (i in 1..n) (square[i,i]) = sum_val\n/\\\nsum (i in 1..n) (square[i,n+1-i]) = sum_val;\n\nsolve satisfy;\n\noutput [\"Magic constant: \", show(sum_val), \"\\n\"] ++\n[\n  show(square[r,c]) ++ \"\\t\" ++\n  if c=n then \"\\n\" else \" \" endif\n  | r,c in 1..n\n];", "encoding": "ascii"}