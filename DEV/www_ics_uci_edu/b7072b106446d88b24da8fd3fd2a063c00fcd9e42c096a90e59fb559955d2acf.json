{"url": "https://www.ics.uci.edu/~dechter/courses/ics-275a/fall-99/slides/node100.html", "content": "<!DOCTYPE HTML PUBLIC \"-//W3O//DTD W3 HTML 2.0//EN\">\r\n<!Converted with LaTeX2HTML 95.1 (Fri Jan 20 1995) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds >\r\n<HEAD>\r\n<TITLE> The Module Interface</TITLE>\r\n</HEAD>\r\n<BODY>\r\n<meta name=\"description\" value=\" The Module Interface\">\r\n<meta name=\"keywords\" value=\"umsroot\">\r\n<meta name=\"resource-type\" value=\"document\">\r\n<meta name=\"distribution\" value=\"global\">\r\n<P>\r\n <BR> <HR><A NAME=tex2html3458 HREF=\"node101.html\"><IMG ALIGN=BOTTOM ALT=\"next\" SRC=\"http://www.ecrc.de/eclipse/new_icons//next_motif.gif\"></A>   <A NAME=tex2html3456 HREF=\"node99.html\"><IMG ALIGN=BOTTOM ALT=\"up\" SRC=\"http://www.ecrc.de/eclipse/new_icons//up_motif.gif\"></A>   <A NAME=tex2html3452 HREF=\"node99.html\"><IMG ALIGN=BOTTOM ALT=\"previous\" SRC=\"http://www.ecrc.de/eclipse/new_icons//previous_motif.gif\"></A>      <A NAME=tex2html3460 HREF=\"node321.html\"><IMG ALIGN=BOTTOM ALT=\"index\" SRC=\"http://www.ecrc.de/eclipse/new_icons//index_motif.gif\"></A>   <BR>\r\n<B> Next:</B> <A NAME=tex2html3459 HREF=\"node101.html\"> Creating and Erasing </A>\r\n<B>Up:</B> <A NAME=tex2html3457 HREF=\"node99.html\"> Modules and Source </A>\r\n<B> Previous:</B> <A NAME=tex2html3453 HREF=\"node99.html\"> Modules and Source </A>\r\n<BR> <HR> <P>\r\n<H2><A NAME=SECTION00841000000000000000> The Module Interface</A></H2>\r\n<P>\r\nThe module interface is a set of goals and procedure definitions\r\nwhich are made available to other modules.\r\nMoreover, the module interface may contain the definition of the syntax\r\nwhich is needed to read its body part.\r\nThe notion of the module interface serves several purposes:\r\n<UL><LI> It specifies which items are to be shared with other modules.\r\n<P>\r\n<LI> It makes possible to share modular items that cannot be\r\ndirectly exported and imported.\r\n<P>\r\n<LI> It specifies the part of the module, which has to be compiled\r\nand executed even if the module is only processed by source-level\r\ntools.\r\nFor instance, if the module body contains terms with an associated\r\nmacro, the corresponding macro transformation predicate\r\nhas to be compiled even if the module body is only being read in.\r\n</UL>\r\n<P>\r\nIf the module is used by another module via the predicate\r\nuse_module/1, all queries that appear in the module interface\r\npart will be executed in the other module, except for\r\nexport/1 and global/1 predicates.\r\nTherefore, declarations of local operators, macros, records etc.\r\nwill be executed in the caller module and these items\r\nwill become available there.\r\nThe macro transformation predicates must be exported to be\r\nvisible in the using module.\r\nThe export/1 queries in the module interface\r\nare conceptually replaced by <b> import_from/2</b> and thus\r\nthe exported predicates are imported in the caller module.\r\n\r\n<P>\r\nPredicate definitions which appear in the module interface\r\nwill not be repeated when the module is used;\r\nif they have to be accessible in another module, they\r\nshould be exported instead.\r\n<P>\r\nHere is an sample module that can serve as a guideline of which\r\ndeclarations to place where:\r\n<blockquote> \r\n<PRE>:- module_interface(mod).\r\n\r\n% syntax directives for this and for importing modules\r\n:- op(300, xfx, &gt;&gt;&gt;).\r\n:- set_chtab(0'$, lower_case).\r\n:- define_macro((|)/2, trans_bar/2, []).\r\n\r\n% libraries to use here and in the importing modules\r\n:- use_module(library(cio)).\r\n\r\n% predicates to import here and in importing modules\r\n:- import current_predicate_body/2 from sepia_kernel\r\n\r\n% predicates defined globally by this module\r\n:- global g/1.\r\n\r\n% predicates exported from this module\r\n:- export p/1, t/1, e/1.\r\n:- export trans_bar/2.      % needed for the macro above\r\n\r\n% type declarations for exported tools and externals\r\n:- tool(t/1).\r\n:- external(e/1).\r\n\r\n% definition of macro transformation predicates\r\ntrans_bar(no_macro_expansion('|'(X,Y)), (X;Y)).\r\n\r\n:- begin_module(mod).        % the module body\r\n\r\n% syntax directives for this module only\r\n:- op(300, xfx, &lt;&lt;&lt;).\r\n\r\n% predicates to import only here\r\n:- import setof_body/4 from sepia_kernel.\r\n\r\n% special type predicate definitions\r\n:- tool(t/1, t_body/2).\r\n:- external(e/1, my_c_function).\r\n\r\n% normal predicate definitions\r\ng(hello).\r\np(world).\r\n</PRE>\r\n</blockquote>\r\n<P>\r\nWhen calling <b> use_module(mod)</b>, all queries in the interface\r\nwill be executed and the macro transformation correctly defined.\r\nThe module interface may also contains goals not directly related\r\nto the definition module, like e.g. the <b> import from</b>\r\nin the above example.\r\n<P>\r\nThe module body can also contain declaration of local modular items,\r\nhowever they remain local in the definition module.\r\nThe definition of the module body starts with the\r\nbegin_module/1 directive and it can be used only\r\nif the module already exists, either created by <b> create_module/1</b>,\r\ncompile/2 or by defining the module interface.\r\nThere may be several <b> begin_module/1</b> directives for the\r\nsame module. When they are compiled, their contents is <i> added</i>\r\nto the module body.\r\n<P>\r\n<BR> <HR><A NAME=tex2html3458 HREF=\"node101.html\"><IMG ALIGN=BOTTOM ALT=\"next\" SRC=\"http://www.ecrc.de/eclipse/new_icons//next_motif.gif\"></A>   <A NAME=tex2html3456 HREF=\"node99.html\"><IMG ALIGN=BOTTOM ALT=\"up\" SRC=\"http://www.ecrc.de/eclipse/new_icons//up_motif.gif\"></A>   <A NAME=tex2html3452 HREF=\"node99.html\"><IMG ALIGN=BOTTOM ALT=\"previous\" SRC=\"http://www.ecrc.de/eclipse/new_icons//previous_motif.gif\"></A>      <A NAME=tex2html3460 HREF=\"node321.html\"><IMG ALIGN=BOTTOM ALT=\"index\" SRC=\"http://www.ecrc.de/eclipse/new_icons//index_motif.gif\"></A>   <BR>\r\n<B> Next:</B> <A NAME=tex2html3459 HREF=\"node101.html\"> Creating and Erasing </A>\r\n<B>Up:</B> <A NAME=tex2html3457 HREF=\"node99.html\"> Modules and Source </A>\r\n<B> Previous:</B> <A NAME=tex2html3453 HREF=\"node99.html\"> Modules and Source </A>\r\n<BR> <HR> <P>\r\n<BR> <HR>\r\n<P><ADDRESS>\r\n<I>Micha Meier <BR>\r\nMon Mar  4 12:11:45 MET 1996</I>\r\n</ADDRESS>\r\n</BODY>\r\n", "encoding": "ascii"}