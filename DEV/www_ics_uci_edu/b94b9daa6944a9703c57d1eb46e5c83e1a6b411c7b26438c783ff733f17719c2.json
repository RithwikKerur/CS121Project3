{"url": "https://www.ics.uci.edu/~ardalan/courses/os/pintos/pintos_13.html#SEC173", "content": "<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"\n                      \"http://www.w3.org/TR/html40/loose.dtd\">\n<HTML>\n<!-- Created on September, 4 2018 by texi2html 1.66 -->\n<!--\nWritten by: Lionel Cons <Lionel.Cons@cern.ch> (original author)\n            Karl Berry  <karl@freefriends.org>\n            Olaf Bachmann <obachman@mathematik.uni-kl.de>\n            and many others.\nMaintained by: Many creative people <dev@texi2html.cvshome.org>\nSend bugs and suggestions to <users@texi2html.cvshome.org>\n\n-->\n<HEAD>\n<TITLE>Pintos Projects: Installing Pintos</TITLE>\n\n<META NAME=\"description\" CONTENT=\"Pintos Projects: Installing Pintos\">\n<META NAME=\"keywords\" CONTENT=\"Pintos Projects: Installing Pintos\">\n<META NAME=\"resource-type\" CONTENT=\"document\">\n<META NAME=\"distribution\" CONTENT=\"global\">\n<META NAME=\"Generator\" CONTENT=\"texi2html 1.66\">\n<LINK REL=\"stylesheet\" HREF=\"pintos.css\">\n</HEAD>\n\n<BODY >\n\n<A NAME=\"SEC173\"></A>\n<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>\n<TR><TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[<A HREF=\"pintos_12.html#SEC168\"> &lt;&lt; </A>]</TD>\n<TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[<A HREF=\"pintos_13.html#SEC174\"> &gt;&gt; </A>]</TD>\n<TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\"> &nbsp; <TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\"> &nbsp; <TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\"> &nbsp; <TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\"> &nbsp; <TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\"> &nbsp; <TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[<A HREF=\"pintos.html#SEC_Top\">Top</A>]</TD>\n<TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[<A HREF=\"pintos.html#SEC_Contents\">Contents</A>]</TD>\n<TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[Index]</TD>\n<TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[<A HREF=\"pintos_abt.html#SEC_About\"> ? </A>]</TD>\n</TR></TABLE>\n\n<HR SIZE=2>\n<H1> G. Installing Pintos </H1>\n<!--docid::SEC173::-->\n<P>\n\nThis chapter explains how to install a Pintos development environment on\nyour own machine.  If you are using a Pintos development environment\nthat has been set up by someone else, you do not need to read this\nchapter or follow these instructions.\n</P>\n<P>\n\nThe Pintos development environment is targeted at Unix-like systems.  It\nhas been most extensively tested on GNU/Linux, in particular the Debian\nand Ubuntu distributions, and Solaris.  It is not designed to install\nunder any form of Windows.\n</P>\n<P>\n\nPrerequisites for installing a Pintos development environment include\nthe following, on top of standard Unix utilities:\n</P>\n<P>\n\n<UL>\n<LI>\nRequired: <A HREF=\"http://gcc.gnu.org/\">GCC</A>.  Version 4.0 or later is\npreferred.  If the host machine has an 80<VAR>x</VAR>86 processor, then \nGCC should be available as <CODE>gcc</CODE>;\notherwise, an 80<VAR>x</VAR>86 cross-compiler should be available as\n<CODE>i386-elf-gcc</CODE>.  We provide a <A HREF=\"https://cs.jhu.edu/~huang/cs318/fall18/project/setup.html\">setup guide</A>\nand a script (<Q><TT>src/misc/toolchain-build.sh</TT></Q>) for installing GCC, binutils, and GDB.\n<P>\n\n</P>\n<LI>\nRequired: <A HREF=\"http://www.gnu.org/software/binutils/\">GNU binutils</A>.\nPintos uses <CODE>addr2line</CODE>, <CODE>ar</CODE>, <CODE>ld</CODE>,\n<CODE>objcopy</CODE>, and <CODE>ranlib</CODE>.  If the host machine is not an\n80<VAR>x</VAR>86, versions targeting 80<VAR>x</VAR>86 should be available with an\n<Q><SAMP>i386-elf-</SAMP></Q> prefix.\n<P>\n\n</P>\n<LI>\nRequired: <A HREF=\"http://www.perl.org\">Perl</A>.  Version 5.8.0 or later is\npreferred.  Version 5.6.1 or later should work.\n<P>\n\n</P>\n<LI>\nRequired: <A HREF=\"http://www.gnu.org/software/make/\">GNU make</A>, version\n3.80 or later.\n<P>\n\n</P>\n<LI>\nRecommended: <A HREF=\"http://fabrice.bellard.free.fr/qemu/\">QEMU</A>, version\n0.11.0 or later.  If QEMU is not available, Bochs can be used, but its\nslowness is frustrating.\n<P>\n\n</P>\n<LI>\nRecommended: <A HREF=\"http://www.gnu.org/software/gdb/\">GDB</A>.  GDB is\nhelpful in debugging (see section <A HREF=\"pintos_11.html#SEC161\">E.5 GDB</A>).  If the host machine is not an\n80<VAR>x</VAR>86, a version of GDB targeting 80<VAR>x</VAR>86 should be available\nas <Q><SAMP>i386-elf-gdb</SAMP></Q>.\n<P>\n\n</P>\n<LI>\nRecommended: <A HREF=\"http://www.x.org/\">X</A>.  Being able to use an X server\nmakes the virtual machine feel more like a physical machine, but it is\nnot strictly necessary.\n<P>\n\n</P>\n<LI>\nOptional: <A HREF=\"http://www.gnu.org/software/texinfo/\">Texinfo</A>, version\n4.5 or later.  Texinfo is required to build the PDF version of the\ndocumentation.\n<P>\n\n</P>\n<LI>\nOptional: <A HREF=\"http://www.tug.org/\">TeX</A>.  Also required to build\nthe PDF version of the documentation.\n<P>\n\n</P>\n<LI>\nOptional: <A HREF=\"http://www.vmware.com/\">VMware Player</A>.  This is a\nthird platform that can also be used to test Pintos.\n</UL>\n<P>\n\nOnce these prerequisites are available, follow these instructions to\ninstall Pintos:\n</P>\n<P>\n\n<OL>\n<LI>\nInstall <A HREF=\"http://bochs.sourceforge.net/\">Bochs</A>, version 2.6.2, as\ndescribed below (see section <A HREF=\"pintos_13.html#SEC174\">G.1 Building Bochs for Pintos</A>).\n<P>\n\n</P>\n<LI>\nInstall scripts from <Q><TT>src/utils</TT></Q>.  Copy <Q><TT>backtrace</TT></Q>,\n<Q><TT>pintos</TT></Q>, <Q><TT>pintos-gdb</TT></Q>, <Q><TT>pintos-mkdisk</TT></Q>,\n<Q><TT>pintos-set-cmdline</TT></Q>, and <Q><TT>Pintos.pm</TT></Q> into the default\n<CODE>PATH</CODE>.\n<P>\n\n</P>\n<LI>\nInstall <Q><TT>src/misc/gdb-macros</TT></Q> in a public location.  Then use a\ntext editor to edit the installed copy of <Q><TT>pintos-gdb</TT></Q>, changing\nthe definition of <CODE>GDBMACROS</CODE> to point to where you installed\n<Q><TT>gdb-macros</TT></Q>.  Test the installation by running\n<CODE>pintos-gdb</CODE> without any arguments.  If it does not complain\nabout missing <Q><TT>gdb-macros</TT></Q>, it is installed correctly.\n<P>\n\n</P>\n<LI>\nCompile the remaining Pintos utilities by typing <CODE>make</CODE> in\n<Q><TT>src/utils</TT></Q>.  Install <Q><TT>squish-pty</TT></Q>, <Q><TT>squish-unix</TT></Q> and\n<Q><TT>setitimer-helper</TT></Q> somewhere in <CODE>PATH</CODE>.\n<P>\n\n</P>\n<LI>\nPintos should now be ready for use.  If you have the Pintos reference\nsolutions, which are provided only to faculty and their teaching\nassistants, then you may test your installation by running <CODE>make\ncheck</CODE> in the top-level <Q><TT>tests</TT></Q> directory.  The tests take between\n20 minutes and 1 hour to run, depending on the speed of your hardware.\n<P>\n\n</P>\n<LI>\nOptional: Build the documentation, by running <CODE>make dist</CODE> in the\ntop-level <Q><TT>doc</TT></Q> directory.  This creates a <Q><TT>WWW</TT></Q> subdirectory\nwithin <Q><TT>doc</TT></Q> that contains HTML and PDF versions of the\ndocumentation, plus the design document templates and various hardware\nspecifications referenced by the documentation.  Building the PDF\nversion of the manual requires Texinfo and TeX (see above).  You may\ninstall <Q><TT>WWW</TT></Q> wherever you find most useful.\n<P>\n\nThe <Q><TT>doc</TT></Q> directory is not included in the <Q><TT>.tar.gz</TT></Q>\ndistributed for Pintos.  It is in the Pintos CVS tree available via\n<CODE>:pserver:anonymous@footstool.stanford.edu:/var/lib/cvs</CODE>, in the\n<CODE>pintos</CODE> module.  The CVS tree is <EM>not</EM> the authoritative\nsource for Stanford course materials, which should be obtained from the\ncourse website.\n</OL>\n<P>\n\n<A NAME=\"Building Bochs for Pintos\"></A>\n<HR SIZE=\"6\">\n<A NAME=\"SEC174\"></A>\n<H2> G.1 Building Bochs for Pintos </H2>\n<!--docid::SEC174::-->\n<P>\n\nUpstream Bochs has bugs and warts that should be fixed when used with\nPintos.  Thus, Bochs should be installed manually for use with Pintos,\ninstead of using the packaged version of Bochs included with an\noperating system distribution.\n</P>\n<P>\n\nTwo different Bochs binaries should be installed.  One, named simply\n<CODE>bochs</CODE>, should have the GDB stub enabled, by passing\n<Q><SAMP>--enable-gdb-stub</SAMP></Q> to the Bochs <CODE>configure</CODE> script.  The\nother, named <CODE>bochs-dbg</CODE>, should have the internal debugger\nenabled, by passing <Q><SAMP>--enable-debugger</SAMP></Q> to <CODE>configure</CODE>.\n(The <CODE>pintos</CODE> script selects a binary based on the options\npassed to it.)  In each case, the X, terminal, and &quot;no GUI&quot; interfaces\nshould be configured, by passing <Q><SAMP>--with-x --with-x11 --with-term\n--with-nogui</SAMP></Q> to <CODE>configure</CODE>.\n</P>\n<P>\n\nThis version of Pintos is designed for use with Bochs 2.6.2.  A number\nof patches for this version of Bochs are included in <Q><TT>src/misc</TT></Q>:\n</P>\n<P>\n\n</P>\n<DL COMPACT>\n<DT><Q><TT>bochs-2.6.2-jitter-plus-segv.patch</TT></Q>\n<DD><P>\n\nAdds the &quot;jitter&quot; feature, in which timer interrupts are delivered at\nrandom intervals (see section <A HREF=\"pintos_1.html#SEC6\">1.1.4 Debugging versus Testing</A>).\n</P>\n<P>\n\n</P>\n<DT><Q><TT>bochs-2.6.2-xrandr-pkgconfig.patch</TT></Q>\n<DD><P>\n\nFix configure flag for x11 xrandr.\n</P>\n<P>\n\n</P>\n<DT><Q><TT>bochs-2.6.2-banner-stderr.patch</TT></Q>\n<DD><P>\n\nUse stderr to print the Bochs banner information.\n</P>\n<P>\n\n</P>\n<DT><Q><TT>bochs-2.6.2-block-device-check.patch</TT></Q>\n<DD><P>\n\nUpdate block device check.\n</P>\n<P>\n\n</DL>\n<P>\n\nTo apply all the patches, <CODE>cd</CODE> into the Bochs directory, then\ntype:\n<TABLE><tr><td>&nbsp;</td><td class=example><pre>patch -p1 &lt; $PINTOSDIR/src/misc/bochs-2.6.2-jitter-plus-segv.patch\npatch -p1 &lt; $PINTOSDIR/src/misc/bochs-2.6.2-xrandr-pkgconfig.patch\npatch -p1 &lt; $PINTOSDIR/src/misc/bochs-2.6.2-banner-stderr.patch\npatch -p1 &lt; $PINTOSDIR/src/misc/bochs-2.6.2-block-device-check.patch\n</pre></td></tr></table>You will have to supply the proper <CODE>$PINTOSDIR</CODE>, of course.  You can\nuse <CODE>patch</CODE>'s <Q><SAMP>--dry-run</SAMP></Q> option if you want to test\nwhether the patches would apply cleanly before trying to apply them.\n<P>\n\nSample commands to build and install Bochs for Pintos are supplied in\n<Q><TT>src/misc/bochs-2.6.2-build.sh</TT></Q>.\n<A NAME=\"Bibliography\"></A>\n<HR SIZE=\"6\">\n<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>\n<TR><TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[<A HREF=\"pintos_13.html#SEC173\"> &lt;&lt; </A>]</TD>\n<TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[<A HREF=\"pintos_14.html#SEC175\"> &gt;&gt; </A>]</TD>\n<TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\"> &nbsp; <TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\"> &nbsp; <TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\"> &nbsp; <TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\"> &nbsp; <TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\"> &nbsp; <TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[<A HREF=\"pintos.html#SEC_Top\">Top</A>]</TD>\n<TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[<A HREF=\"pintos.html#SEC_Contents\">Contents</A>]</TD>\n<TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[Index]</TD>\n<TD VALIGN=\"MIDDLE\" ALIGN=\"LEFT\">[<A HREF=\"pintos_abt.html#SEC_About\"> ? </A>]</TD>\n</TR></TABLE>\n<BR>\n<FONT SIZE=\"-1\">\nThis document was generated\nby <I>Ryan Huang</I> on <I>September, 4 2018</I>\nusing <A HREF=\"http://texi2html.cvshome.org\"><I>texi2html</I></A>\n</FONT>\n\n</BODY>\n</HTML>\n", "encoding": "ascii"}