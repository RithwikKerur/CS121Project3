{"url": "https://www.ics.uci.edu/~rickl/courses/cs-171/0-ihler-2016-fq/Projects/ConnectK/scripts/test_io", "content": "#!/bin/bash\n\nmodule load java/1.8.0_20 python/3.5.1 gcc/5.4.0\n\n# usage: \n# remove the log, run a \"does it move\" test on milestone 5, & log aggregate results to M05.io.log:\n#    rm ati/M05.io.log; ati/test_io M05 | tee ati/M05.io.log\n#\n# script will also write individual group logs to \"log/teamname.M05_io.log\"\n\n# \"do anything\" test:\n#cfg0=\"-nogui -g:0 -h:9 -w:7 -k:1 -t:5000 -b:30000\"   ## doesn't work; connectk bug todo\ncfg0=\"-nogui -g:0 -h:9 -w:7 -k:2 -t:5000 -b:30000\"\n#JAR=\"ConnectK_1.8.jar\"   # old, no timer version\nJAR=\"ConnectK_nolog.jar\"        # ATI fixes\n\necho \"Processing \" ${1} \" : \"\necho \"team, language, moves?, error\"\n\nfor dir in Submissions/${1}_*/* ; do\n  found=''\n  gname=${dir#*/M0*/}; gname=${gname%%_*} # extract groupname from extracted paths\n  log=\"log/${gname}.${1}_io.log\"          # name logfile: log/myteam.M03_io.log for IO check on milestone 3 submit\n  for ai in \"$dir\"/*/src/*AI.py ; do     # find all properly placed Python AI files\n    [ -f \"$ai\" ] || continue\n    gname=${dir#*/M0*/}; gname=${gname%%_*}\n    echo -n ${gname} \",  python, \"\n    echo -n \"  moves? \"\n    #python3 $ai < boards/ttt0.txt 2>&1| grep -e ReturningThe || printf \"\\n\"\n    java -jar $JAR $cfg0 \"py:${ai}\" py:ati/src/TestRandomAI.py  2>&1| tee $log | grep -e Winner -e Exception -e Killed |tr '\\n' ' ' || printf \"\\n\"\n    found=1\n  done\n  for ai in \"$dir\"/*/bin/*AI.class ; do # find all properly placed & compiled Java AI files\n    [ -f \"$ai\" ] || continue\n    gname=${dir#*/M0*/}; gname=${gname%%_*}\n    echo -n ${gname} \", java, \"\n    echo -n \"  moves? \"\n    java -jar $JAR $cfg0 \"${ai%.*}\" py:ati/src/TestRandomAI.py  2>&1| tee $log | grep -e Winner -e Exception -e Killed |tr '\\n' ' ' || printf \"\\n\"\n    found=1\n  done\n  #for ai in $dir/*/bin/*AI ; do        # find all properly placed & compiled C++ AI files\n  for ai in \"$dir\"/*/bin/*AJ ; do       #  or, my recompilation of the same\n    [ -f \"$ai\" ] || continue\n    gname=${dir#*/M0*/}; gname=${gname%%_*}\n    echo -n ${gname} \", cpp, \"\n    echo -n \" moves? \"\n    #$ai < boards/0.txt 2>&1| grep -e ReturningThe || printf \"\\n\"   # trivial non-interactive IO check\n    java -jar $JAR $cfg0 \"cpp:${ai}\" py:ati/src/TestRandomAI.py  2>&1| tee $log | grep -e Winner -e Exception -e Killed |tr '\\n' ' ' || printf \"\\n\"\n    found=1\n  done\n  if [ ! $found ] ; then \n    gname=${dir#*/M0*/}; gname=${gname%%_*}\n    echo $gname \", missing, --, --\" ; \n  fi\n  echo\n  echo \"=======================================================================================\"\n  echo\ndone\n\n", "encoding": "ascii"}