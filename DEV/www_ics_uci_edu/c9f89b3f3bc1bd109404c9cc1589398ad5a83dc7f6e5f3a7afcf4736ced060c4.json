{"url": "https://www.ics.uci.edu/~rohit/IEEE-L7-SMTP.html", "content": "<HTML>\n<HEAD>\n  <LINK rel=\"stylesheet\" type=\"text/css\" href=\"http://www.w3.org/StyleSheets/Core/Steely\">\n<TITLE>The Spec's in the Mail</TITLE>\n<META NAME=\"Version\" CONTENT=\"8.0.4915\">\n<META NAME=\"Date\" CONTENT=\"1/20/98\">\n</HEAD>\n<BODY TEXT=\"#000000\" LINK=\"#0000ff\" BGCOLOR=\"#ffffff\">\n\n<H1>The Spec's in the Mail</H1> <ADDRESS>Rohit Khare // September 1,\n1998</ADDRESS> <P><HR></P> </TT><H3>&quot;It's made of\npeople!&quot;</H3> <P>While the surface intent of the ARPANET was\nserious experimentation with computer-to-computer communication, the\nsecret ingredient in its success was the same as in <I>Soylent\nGreen</I>: people. Electronic mail (ne&eacute; 'netmail') and,\nlater, news were the twin killer apps that motivated many institutions\nto join regional networks, and later, to internetwork them. Human\ncollaboration turned out to be more compelling than such digital\ndreams as an automated Data Reconfiguration Service (RFC 194) or\nunified binary encoding (RFC 31) or a programmable Network Standard\nTranslator (RFC 5).</P>\n\n<P>Peter Salus' oral history, <I>Casting the Net</I> (Addison-Wesley, 1995) goes so far as to deem network e-mail &quot;the application that hadn't been thought of.&quot; Just because chit-chat was an afterthought to the Real Work of timesharing and file transfer and distributed processing doesn't mean modern protocol designers can skim past it, though. E-mail is the &quot;missing link&quot; in the evolutionary lineage from interactive control protocols like Telnet and FTP to modern message-transfer systems like HTTP and NNTP. And since ontogeny recapitulates phylogeny in this case, application-layer designers can reflect upon how the mail-relay infrastructure to route text and multimedia &quot;packets&quot; rediscovered classic IP-layer solutions to fragmentation, congestion, error propagation, security, and other challenges.</P>\n<P>This installment of <I>Seventh Heaven</I> focuses on the coevolution of the Internet Text Message (RFC 822) format and the Simple Mail Transfer Protocol (SMTP, RFC 821), from its roots as a printer-spooling convention piggybacked on File Transfer Protocol (FTP) through the development of the Multipurpose Internet Mail Extensions (MIME) up to the latest drafts of the Detailed Revision/Update of Message Standards (DRUMS) working group.</P>\n</TT><H3>Babel, Tower of: <I>see</I> 'Mail Box Protocol'</H3>\n<P>Virtually every multiuser computer installation has had a user-user messaging and/or paging facility, right back to the original maliboxes in the Compatible Time Sharing System (CTSS) of the early 60's. The operative metaphor for wide-area text messaging already existed, too: public Telex service promised (relatively) low-latency guaranteed delivery around the world (or so I'm told, having grown up in the Fax Age -- I've never seen a telegram or telex in real life!). Electronic mail across the ARPANET, like terminal emulation and file transfer before it, was merely a simple matter of virtualizing the diversity of hosts, terminals, printers, and user identification schemes out there.</P>\n<P>In that spirit, Richard Watson's modest proposal for a &quot;Mail Box Protocol&quot; (RFC 196) is best understood as a remote, deferred printer service. Inspired by primitive TELNET, it added one control code selects the 7-bit mailbox number; 0 is reserved for the &quot;system printer,&quot; with its own control codes for character set (ASCII, EBCDIC, or 8-bit stream), page length (66 lines or infinite) and width (72 characters or max). Other mailboxes' formats were undefined, since he noted &quot;it is useful to have more than one receiving mail box, each to be associated with a different process.&quot;</P>\n<P>The only recognizable user identifier is an optional burst page: &quot;This address string is to contain the sender's name and address, and the receiver's name and address formatted in some reasonable, easy-to-read form for a clerk to read and distribute.&quot; RFC 278's later revisions strengthened it to a requirement: &quot;At the head of the message or document sent there is to be two copies of an initial address string each terminated by a form feed... make one readable from a fan fold paper stack without effort.&quot;</P>\n<P>RFC 278 reconstructed e-mail as an application of file transfer. It reserves a top-level MAIL directory, containing files for each user and the PRINTER. Messages were delivered using Append With Create (command 5, before the advent of text protocols). It required end-to-end connectivity: one connected directly to the target machine to send mail. Addressing was centralized, with the Network Information Center (NIC) maintaining identifiers and group mailboxes to burst RFCs and operation memos to each ARPANET site -- and they liked it that way: their oNLine System (NLS) could store and search every piece of netmail.</P>\n<P>Even though e-mail in 1971 lacked effective abstractions for addressing, distribution, and content -- the hallmarks of a TP (transfer protocol) -- the future was visible. RFC 224 commented that the &quot;printer&quot; model was already obsolete. Alex McKenzie predicted that &quot;a message destined for a Terminal IMP user would be shipped to the site of the 'rented' mailbox according to protocol and stored there.  A terminal IMP user could then periodically log in to that site (under TELNET protocol) and examine the contents of the mailbox&quot;</P>\n<P>Throughout the Seventies, a flurry of mail systems tinkered around the edges: reserving &quot;secure&quot; ports, decentralizing addresses around the '@' fulcrum, avoiding junk mail, and creating new message headings. RFC 808's survey of 36 mailers circa January 1979 noted &quot;most of the mail systems were not formal projects (in the sense of explicitly sponsored research), but things that 'just happened'.&quot; Real change would have to wait until the transition from NCP to TCP in the early Eighties: as the October 1980 plan (RFC 773) recalled, &quot;In the ARPANET, electronic messages are transported via special procedures of the File Transfer Protocol: MAIL and MLFL.  The former method sends electronic messages via the FTP Telnet command channel while the latter achieves this by actual file transfer.&quot;</P>\n<P>Once the prospect of <I>inter</I>network e-mail was raised, the real work began: fresh solutions to each of the three aspects of a Message Transfer Protocol: Addressing, Distribution, and Content -- culminating in RFCs 974, 821, and 822, respectively. </P>\n</TT><H3>Header-People</H3>\n<P>E-mail's line-printer origins still constrain its content model thirty years later. The key to understanding the arcana and fuzziness of e-mail format wars is an unspoken assumption that the most primitive user interface to mail is a still a printout -- and thus has to make sense to a human.</P>\n<P>Header fields are our basic building block: simultaneously human- and machine-readable, they appear in a clump at the beginning of a memo, followed by a single blank line. And helpfully suggestive names like &quot;Date:&quot; and &quot;From:,&quot; are ripe for misinterpretation, igniting jihads of all sorts. The header-people discussion list from this era -- probably the first e-mail mediated virtual community -- reveals this tendency in spades (@@URL of archive@@).  </P>\n<P>New headers require new grammars, usually assembled from the suite of parsing rules in RFC822, and now IETF's official Augmented Bakus-Naur Form notation (RFC 2234). Those already specify how to fold headers across multiple lines (80-column printers strike again!), escape reserved characters, and basic values like Message-ID.</P>\n<P>The struggle for interoperabilty in the real world requires accomodating buggy variants thereof, too. The maxim &quot;Be conservative in what you generate and liberal in what you accept&quot; arose in this context -- but within limits. Liberalism lets bad specifications live on (like 822's 2-digit years), and worse yet, fast-and-loose implementations that force other upstanding members of the mail relay community to clean up their messes. </P>\n<P>Such flexibility is essential to e-mail's evolvability: even the most basic parsers can still grok the latest whiz-bang video mail because of MIME's judicious use of headers, 7-bit clean bodies, and line-length limits. It introduced the notion of content type and message parts, allowing more sophisticated systems to look at the same message and extract a structured tree of resources, and to understand how to present each resource. </P>\n<P>As intended, most new email applications need only define new content-types for encryption, digital signatures, Electronic Data Interchange (EDI), or Web page delivery. Internet Media Types are registered in a two-level hierarchy that implies interchangeability under each primary type (e.g. text/*, image/*, video/*). Political control of this namespace has been contentious around the edges, especially for proprietary types. Ironically, the Web's fateful adoption of the same will ensure its survival, but that's a tale for another column... </P>\n<B><P>&nbsp;</P>\n</B></TT><H3>If you have to call it 'Simple'...</H3>\n<P>IP packets can drop with impunity, but email never should. Reliable delivery requires clients to retry delivery until positive acknowledgement, and server to ensure stable storage of the message before acknowledgement -- leaving a race condition if the connection drops in between leading to duplicate delivery (RFC 1047). Clients will also keep retrying delivery to a machine without email service, like a DNS server (RFC 1846). Message length shouldn't be restricted by the protocol, but if there's a constrained server in the path, there has to be an entire size-discovery method (RFC 1653). All of these nits with reliable end-to-end delivery across the Internet -- including queuing for intermittently connected hosts -- still pale by comparison to the challenges of gatewaying mail to other network architectures (X.400 mappings are standardized in RFCs 2156-7).</P>\n<P>By the time of the Great Transition to TCP, e-mail had grown into a series of hacks on top of FTP. Naturally, the first cut at a Mail Transfer Protocol (MTP) mimicked those very commands: &quot;MAIL TO: &lt;&gt; FROM: &lt;&gt;&quot;, with optional support for additional recipients, to be listed before or after the mail body. Simplification actually separated out more states: SMTP commands for creating a new mail message, verifying addresses and expanding lists, adding recipients, then sending the body -- and each with their own reply codes, affording much more accurate debugging.</P>\n<P>A decade later, ESMTP was deemed the new standard, with its EHLO greeting that advertised available extensions. New functionality could be registered under a keyword and could add new parameters to existing commands. Its maxim was: &quot;protocols with few options tend towards ubiquity, whilst protocols with many options tend towards obscurity.&quot; Extensions standardized to date provide important functionality: transmitting large and 8-bit bodies (RFC 1830), limiting message size (RFC 1870), requesting delivery status notification (RFC 1891), initiating a destination's queued mail delivery (RFC 1985), using more specific reply codes (RFC 2034), and pipelining commands (RFC 2157). </P>\n<P>&nbsp;</P>\n</TT><I><H3>Poste Restante</H3>\n</I><P>The Great Transition also required e-mail addressing to adapt to the newfangled Domain Naming System (DNS). The Internet had grown well past the point that mail relays could directly connect to destination servers; intranets (had the term existed) had also grown too large to host users' mail at individual hosts. Instead of requiring senders to compute increasingly complex source routes, the new Mail eXchanger resource record contained the recipient's decision. Any host in the DNS table could specify an alternate machine responsible for all its incoming mail. Conversely, a single relay could aggregate mail for several networks. New kinds of relays emerged, too: mailing list servers that accepted a message and burst it out to a long list, providing their own load-balancing, routing, and queue management. </P>\n<P>The new world of mail began to look a lot like the very old: the notion of <I>poste restante</I>, delivered to a regional depot (such as the downtown post office or American Express branch) for a traveler to rendezvous with. While SMTP connections came in from other Mail Transfer Agents (MTAs), nomadic Mail User Agents (MUAs) used protocols like PCMAIL or Post Office Protocol (POP) and now Interactive Message Access Protocol (IMAP) to download and manage their mailboxes. Two-phase delivery interrupts servers instantly with inbound mail, but waits for users to poll for updates.</P>\n</TT><H3>Mail Packets</H3>\n<P>IP exchanges packets between network interfaces; FTP exchanges files between hosts; and SMTP exchanges messages between mailboxes. The critical difference is that while we can quibble over the differences between communicating with a host or one of its interfaces on the connected Internet, mailboxes come from an entirely different, logical set of endpoints. John Quarterman dubbed the wider world of e-mail exchanging computers 'The Matrix,' in the spirit of William Gibsons's original cyberpunk coinage. E-mail transfers reach out to systems well beyond the reach of IP, and do so at the sender's bidding.</P>\n<P>Its strategies for addressing (users and groups), distribution (hierarchical aggregation), and content (MIME) give SMTP wide reach and applicability. It may once have been built atop FTP, but now we can use mail to access FTP archives, read news groups, browse web sites, play chess, and more.</P>\n<P>Upon reflection, mail messages are just the same as IP packets. Seven layers up the stack, we recursively discover the same challenges as we began with. Disparate notions of data transfer bridged by judicious enveloping; gateways which can fragment and reassemble messages, and improbable flexibility from text messages to bulk data transfer to real-time multimedia and more. The same problems (and solutions) arise, too: routing loops (and Time-To-Live bounds), asymmetric routes (and source-routed mailboxes), transit size limits (and message/partial fragmentation), rate limiting (and SMTP implementations' queue throttling), end-to-end vs. hop-by-hop trust (and key exchange between users and servers, respectively), and resource rationing (and cost-based pricing). </P>\n<P>For one, a lot of the claims made for Active Networking -- with its programmable packets (&quot;capsules&quot;) executing within routers start making a lot more sense as programmable messages evaluated at relays... </P>\n<P>@@</P>\n<P>Next issue: NNTP and IRC.</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P></TT>\n<TABLE BORDER CELLSPACING=1 CELLPADDING=5 WIDTH=545>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<B><P>RFC</B></TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<B><P>Date</B></TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<B><P>Title and Comments</B></TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>196</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>20 Jul 1971</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Mail Box Protocol</I><BR>\nDefined a remote &quot;printer&quot;; cosmetic user address on burst pages</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>224</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>14 Sep 1971</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Comments on Mailbox Protocol</I><BR>\nTerminal IMP users need two-phase delivery from central mailboxes </TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>278</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>17 Nov 1971</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Revision of the Mail Box Protocol</I><BR>\nMailbox files using FTP append-with-create and print formatting</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>561</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>5 Sep 1973</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Standardizing Network Mail Headers</I><BR>\nIntroduced From:, Subject:, and Date: (with two-digit years!)</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>644</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>22 Jul 1974</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>On The Problem Of Signature Authentication For Network Mail<BR>\n</I>Reserved fixed port numbers for &quot;authentic&quot; mail service</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>706</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>8 Nov 1975</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>On the Junk Mail Problem<BR>\n</I>Postel proposed IMPs should track offending hosts -- appeared 20 years later as the MAPS Realtime Black Hole List (</TT><A HREF=\"http://maps.vix.com/rbl\">http://maps.vix.com/rbl</TT></A>)</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>720</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>5 Aug 1976</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Address Specification Syntax for Network Mail</I><BR>\nARPANET outgrew &quot;real&quot; names; added group aliases and sub-boxes</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>772<BR>\n780</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>Sept 1980<BR>\nMay 1981</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Mail Transfer Protocol</I> (MTP)<BR>\nNew mail relay system based on FTP MAIL; part of NCP-&gt;TCP transition</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>821<BR>\nSTD 10</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>Aug 1982</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Simple Mail Transfer Protocol</I> (SMTP)<BR>\nMAIL FROM, RCPT TO, and DATA; as well as interactive SEND</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>822<BR>\nSTD 11</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>Aug 1982</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Standard for the Format of ARPA Internet Text Messages</I><BR>\nGrammar for headings and field-value types (revised as ABNF, 2234)</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>974<BR>\nSTD 14</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>Jan 1986</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Mail Routing and the Domain System</I><BR>\nDefines the Mail eXchanger resource so mail relays serve many hosts</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>984</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>May 1986</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>PCMAIL: A Distributed Mail System for Personal Computers</I><BR>\nClients manage mail at a server; prototyped w/Unified Stream Protocol</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>1113-5<BR>\n1421-4</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>Aug 1989<BR>\nFeb 1993</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Privacy-Enhanced Mail</I><BR>\nNew headers for public-key certificates; encryption req'd signature</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>1521-2<BR>\n2045-9<BR>\n</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>Sep 1993<BR>\nNov 1996<BR>\n</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Multipurpose Internet Mail Extensions</I><BR>\nNot just multimedia &amp; charsets! Revised into five Parts: body formats, media types, internationalized headers, registration, and testing</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>1847-8</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>Oct 1995</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Security Multiparts </I>&amp;<I> MIME Object Security Services</I><BR>\nDefined Signed and Encrypted parts; uses any key pair or secret</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>1869<BR>\nSTD 10</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>6 Nov 1995</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>SMTP Service Extensions </I> (ESMTP)<BR>\nDefined the EHLO+keyword+parameters negotiation framework</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>1891-4</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>Jan 1996</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Delivery Status Notifications</I>,<I> Multipart/Report</I>, <I>Enhanced Status Codes</I><BR>\nSuite for automated verification and debugging undeliverable mail </TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>1939<BR>\n918</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>May 1996<BR>\nOct 1984</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Post Office Protocol -- Version 3<BR>\n</I>Clients pull mail; limited ability to preview headers and flush store</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>2060-1<BR>\n1730</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>Dec 1996<BR>\nDec 1994</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Interactive Message Access Protocol -- Version 4rev1<BR>\n</I>Clients manipulate mail folders at the server; shared folders, too</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>2110</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>Mar 1997</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>MIME E-mail Encapsulation of Aggregate Documents, such as HTML</I><BR>\nRelated parts can be bound together, preserving internal URI rules</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>2142<BR>\n763</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>May 1997<BR>\nMay 1980</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>Mailbox Names for Common Roles, Services, and Functions</I><BR>\nCommon business, operations, services, mailing lists, and domain boxes</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>2298</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>Mar 1998</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>An Extensible Message Format for Message Disposition Notifications<BR>\n</I>Indicates that mail has been read/processed, beyond merely delivered</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>2368</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>July 1998</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>The mailto URL scheme</I><BR>\nEncodes recipient as well as optional headers or body</TT></TD>\n</TR>\n<TR><TD WIDTH=\"11%\" VALIGN=\"TOP\">\n<P>2369</TT></TD>\n<TD WIDTH=\"15%\" VALIGN=\"TOP\">\n<P>July 1998</TT></TD>\n<TD WIDTH=\"74%\" VALIGN=\"TOP\">\n<I><P>URLs as Meta-Syntax for Core Mail List Commands ...</I><BR>\nList-Help, -(Un)Subscribe, -Post, and -Archive headers with mailto:</TT></TD>\n</TR>\n</TABLE>\n\n<H4>Table 1: Milestones in the fossil record of e-mail: protocols, message formats, security, and operations</H4>\n<P>&nbsp;</P>\n<P>&nbsp;</P></TT>\n<TABLE BORDER CELLSPACING=1 CELLPADDING=5 WIDTH=522>\n<TR><TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<B><P>Type</B></TT></TD>\n<TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<B><P>Heading</B></TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<B><P>Interpretation</B></TT></TD>\n</TR>\n<TR><TD WIDTH=\"10%\" VALIGN=\"TOP\" ROWSPAN=2>\n<P>Memo</TT></TD>\n<TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><DL>\n<DT>Date</DT>\n</DL></TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Creation time. Originally used 2-digit year; many forms in use</TT></TD>\n</TR>\n<TR><TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Subject<BR>\nKeywords<BR>\nComments</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Originally </TT><TT>Title</TT>; replies use Latin <I>res</I>, &quot;in the matter of&quot;<BR>\nThe other two fell into disuse in Mail; popular for News</TT></TD>\n</TR>\n<TR><TD WIDTH=\"10%\" VALIGN=\"TOP\" ROWSPAN=3>\n<P>Origin</TT></TD>\n<TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>From</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Originally </TT><TT>Author</TT>. Putative creator of the message</TT></TD>\n</TR>\n<TR><TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Sender</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Actual sender, from the </TT><TT>MAIL</TT> command. Used to delegate.</TT></TD>\n</TR>\n<TR><TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Reply-To</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Followup address. But is it the sender alone, a group, a list? </TT></TD>\n</TR>\n<TR><TD WIDTH=\"10%\" VALIGN=\"TOP\" ROWSPAN=2>\n<P>Dest</TT></TD>\n<TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>To, Cc</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Original and &quot;carbon copy&quot; recipients; at least one req'd</TT></TD>\n</TR>\n<TR><TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Bcc</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Blind CC; post separate copies to hide such recipients</TT></TD>\n</TR>\n<TR><TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<P>Fwd</TT></TD>\n<TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Resent-*</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Redistribution envelope when prefixed to above headings</TT></TD>\n</TR>\n<TR><TD WIDTH=\"10%\" VALIGN=\"TOP\" ROWSPAN=2>\n<P>Trace</TT></TD>\n<TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Received</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Each mail relay logs when received, from whom, and protocol</TT></TD>\n</TR>\n<TR><TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Return-Path</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Accumulated a reverse delivery pathway; deprecated.</TT></TD>\n</TR>\n<TR><TD WIDTH=\"10%\" VALIGN=\"TOP\" ROWSPAN=2>\n<P>Refs</TT></TD>\n<TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Message-ID</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Uniquely identifies the entire text+headers (except trace)</TT></TD>\n</TR>\n<TR><TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>In-Reply-To<BR>\nReferences</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Can specify addresses and message-IDs this refers to; used to track topics and threads of conversation.</TT></TD>\n</TR>\n<TR><TD WIDTH=\"10%\" VALIGN=\"TOP\" ROWSPAN=3>\n<P>MIME</TT></TD>\n<TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Content-Type</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Internet Media Type (with parameters) of the part's body</TT></TD>\n</TR>\n<TR><TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Content-ID</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Uniquely identifies each body part; </TT><TT>-MD5</TT> uses hash function</TT></TD>\n</TR>\n<TR><TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Content-Transfer-Encoding</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<DL>\n<DT>Protection against 7-bit, linewidth-limited mail infrastructure. Quoted-printable for text, Base64 for arbitrary 8-bit streams.<BR>\nActual character sets/languages are indicated elsewhere.</DT>\n</DL></TD>\n</TR>\n<TR><TD WIDTH=\"10%\" VALIGN=\"TOP\" ROWSPAN=2>\n<P>MHTML<BR>\nHTTP</P>\n<P>&nbsp;</TT></TD>\n<TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Content-Location</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>The URL of the resource that generated the entity represented in a body part.</TT></TD>\n</TR>\n<TR><TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>Content-Base</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Relative URLs within a part are evaluated against this path</TT></TD>\n</TR>\n<TR><TD WIDTH=\"10%\" VALIGN=\"TOP\" ROWSPAN=2>\n<P>PEM<BR>\nMOSS</TT></TD>\n<TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>MIC-Info</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Sender's Message Integrity Code (e.g. digital signature)</TT></TD>\n</TR>\n<TR><TD WIDTH=\"22%\" VALIGN=\"TOP\">\n<TT><P>DEK-Info</TT></TD>\n<TD WIDTH=\"68%\" VALIGN=\"TOP\">\n<P>Each recipient's Data Encryption Key to unlock the body</TT></TD>\n</TR>\n</TABLE>\n\n<H4>Table 2: A selection of standardized e-mail Message Headings.</H4>\n<P>&nbsp;</P>\n<P>&nbsp;</P></TT>\n<TABLE BORDER CELLSPACING=1 CELLPADDING=5 WIDTH=497>\n<TR><TD WIDTH=\"4%\" VALIGN=\"BOTTOM\">\n<B><P>MTP</B></TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"BOTTOM\">\n<B><P>SMTP</B></TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"BOTTOM\">\n<B><P>ESMTP</B></TT></TD>\n<TD WIDTH=\"10%\" VALIGN=\"BOTTOM\">\n<B><FONT FACE=\"Trebuchet MS\"><P>CMND</B></TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"BOTTOM\">\n<B><P>Explanation</B></TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>-</TT></TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><DL>\n<DT>HELO</DT>\n</DL></TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<P>Required greeting exchanges domain name and software version</TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>EHLO</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<P>Extended response enumerates site's supported Service Extensions</TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>-</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>MRSQ</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<P>Negotiates whether to list (R)ecipients or (T)ext first; from FTP mail</TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>MAIL</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<TT><P>FROM: &lt;&gt;</TT>; MTP can add </TT><TT>TO: &lt;&gt;</TT> and go straight to </TT><TT>DATA</TT> mode</TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>-</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>MRCP</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<TT><P>TO: &lt;&gt;</TT> for each recipient; appears either before or after</TT><TT> MAIL</TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>RCPT</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<TT><P>TO: &lt;&gt;</TT> for each recipient; must appear before </TT><TT>DATA</TT> command</TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>DATA</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<DL>\n<DT>Transmit message in NVT (Telnet) format until <TT>&lt;CRLF&gt;.&lt;CRLF&gt;</DT>\n</DL></TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>-</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>SEND</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<P>Deliver instantly to logged-in user, and/or mail (</TT><TT>SAML</TT>, </TT><TT>SOML</TT>) </TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>RSET</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<P>Clear address and message buffers (implicit in </TT><TT>HELO</TT> and </TT><TT>ELHO</TT>)</TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>-</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>+</TT></TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>VRFY</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<TT><P>&lt;user&gt;</TT> exists locally. Now required, though raises privacy risk</TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>-</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>-</TT></TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>EXPN</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<TT><P>&lt;alias&gt;</TT> lists members. Now recommended, given privacy risk</TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>-</TT></TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>TURN</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<P>Swap roles and delivery any queued mail for &quot;client&quot;; spoofing risk </TT></TD>\n</TR>\n<TR><TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">&nbsp;</TD>\n<TD WIDTH=\"4%\" VALIGN=\"TOP\">\n<P>-</TT></TD>\n<TD WIDTH=\"10%\" VALIGN=\"TOP\">\n<TT><P>ETRN</TT></TD>\n<TD WIDTH=\"78%\" VALIGN=\"TOP\">\n<P>Asks server to initiate reverse connection to process queued mail</TT></TD>\n</TR>\n</TABLE>\n\n<H4>Table 3: Required (+) and optional (-) commands in MTP, SMTP, and ESMTP.</H4>\n<P>&nbsp;</P>\n<P>&nbsp;</P>\n<P>&nbsp;</P></TT></BODY>\n</HTML>\n", "encoding": "ascii"}