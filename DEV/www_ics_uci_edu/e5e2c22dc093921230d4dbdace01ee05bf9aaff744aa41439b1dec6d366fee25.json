{"url": "https://www.ics.uci.edu/~dechter/courses/ics-275a/fall-99/slides/node212.html", "content": "<!DOCTYPE HTML PUBLIC \"-//W3O//DTD W3 HTML 2.0//EN\">\r\n<!Converted with LaTeX2HTML 95.1 (Fri Jan 20 1995) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds >\r\n<HEAD>\r\n<TITLE> Datagram Connection on a Single Machine</TITLE>\r\n</HEAD>\r\n<BODY>\r\n<meta name=\"description\" value=\" Datagram Connection on a Single Machine\">\r\n<meta name=\"keywords\" value=\"umsroot\">\r\n<meta name=\"resource-type\" value=\"document\">\r\n<meta name=\"distribution\" value=\"global\">\r\n<P>\r\n <BR> <HR><A NAME=tex2html4787 HREF=\"node213.html\"><IMG ALIGN=BOTTOM ALT=\"next\" SRC=\"http://www.ecrc.de/eclipse/new_icons//next_motif.gif\"></A>   <A NAME=tex2html4785 HREF=\"node209.html\"><IMG ALIGN=BOTTOM ALT=\"up\" SRC=\"http://www.ecrc.de/eclipse/new_icons//up_motif.gif\"></A>   <A NAME=tex2html4779 HREF=\"node211.html\"><IMG ALIGN=BOTTOM ALT=\"previous\" SRC=\"http://www.ecrc.de/eclipse/new_icons//previous_motif.gif\"></A>      <A NAME=tex2html4789 HREF=\"node321.html\"><IMG ALIGN=BOTTOM ALT=\"index\" SRC=\"http://www.ecrc.de/eclipse/new_icons//index_motif.gif\"></A>   <BR>\r\n<B> Next:</B> <A NAME=tex2html4788 HREF=\"node213.html\"> Stream Connection Between </A>\r\n<B>Up:</B> <A NAME=tex2html4786 HREF=\"node209.html\"> Interprocess Communication</A>\r\n<B> Previous:</B> <A NAME=tex2html4780 HREF=\"node211.html\"> Stream Connection on </A>\r\n<BR> <HR> <P>\r\n<H1><A NAME=SECTION001830000000000000000> Datagram Connection on a Single Machine</A></H1>\r\n<P>\r\nThe datagram connection is based on packets sent from one process to another,\r\nsimilar to usual LAN's, e.g. the Ethernet.\r\nThe communication protocol does not guarantee that the message\r\nwill always be delivered, but normally it will be.\r\nEvery packet represents a message which is read separately\r\nat the system level, however at the Prolog level the packet\r\nboundaries are not visible<A NAME=tex2html690 HREF=\"footnode.html#3103\"><IMG ALIGN=BOTTOM ALT=\"gif\" SRC=\"http://www.ecrc.de/eclipse/new_icons//foot_motif.gif\"></A>.\r\nThe difference to stream communication is that\r\nthere is no obligatory connection between the server and the client.\r\nFirst the socket has to be created, and then the process which wants\r\nto read from the it binds the socket to a name.\r\nAny other process can then connect directly to this socket\r\nusing the <b> connect/2</b> predicate and send data there.\r\nThis connection can be temporary, and after writing the message\r\nto the socket the process can connect it to another socket,\r\nor just disconnect it by calling <b> connect(Socket, 0)</b>.\r\n<P>\r\nSuch datagram connection works only in one direction, namely\r\nfrom the process that called <b> connect/2</b> to the process that called\r\n<b> bind/2</b>, however the connection in the other direction\r\ncan be established in the same way:\r\n<blockquote> <PRE>server:\r\n    % Make a named socket and read two terms from it\r\n    [eclipse 10]: socket(unix, datagram, s), bind(s, '/tmp/sock').\r\n\r\n    yes.\r\n    [eclipse 11]: read(s, X), read(s, Y).\r\n\r\nprocess1:\r\n    % Connect a socket to the server and write one term\r\n    [eclipse 32]: socket(unix, datagram, s), connect(s, '/tmp/sock').\r\n\r\n    yes.\r\n    [eclipse 33]: printf(s, &quot;%w. %b&quot;, message(process1)).\r\n\r\nprocess2:\r\n    % Connect a named socket to the server and write another term\r\n    [eclipse 15]: socket(unix, datagram, s), connect(s, '/tmp/sock'),\r\n        bind(s, '/tmp/socka').\r\n\r\n    yes.\r\n    [eclipse 16]: printf(s, &quot;%w. %b&quot;, message(process2)).\r\n\r\n    yes.\r\n    % And now disconnect the output socket from the server\r\n    [eclipse 17]: connect(s, 0).\r\n\r\n    yes.\r\n\r\nserver:\r\n    % Now the server can read the two terms\r\n    X = message(process1)\r\n    Y = message(process2)\r\n    yes.\r\n    % and it writes one term to the second process on the same socket\r\n    [eclipse 12]: connect(s, '/tmp/socka'),\r\n        printf(s, &quot;%w. %b&quot;, message(server)).\r\n\r\nprocess2:\r\n    % \r\n    [eclipse 18]: read(s, Msg).\r\n\r\n    Msg = message(server)\r\n    yes.\r\n</PRE>\r\n</blockquote><BR> <HR><A NAME=tex2html4787 HREF=\"node213.html\"><IMG ALIGN=BOTTOM ALT=\"next\" SRC=\"http://www.ecrc.de/eclipse/new_icons//next_motif.gif\"></A>   <A NAME=tex2html4785 HREF=\"node209.html\"><IMG ALIGN=BOTTOM ALT=\"up\" SRC=\"http://www.ecrc.de/eclipse/new_icons//up_motif.gif\"></A>   <A NAME=tex2html4779 HREF=\"node211.html\"><IMG ALIGN=BOTTOM ALT=\"previous\" SRC=\"http://www.ecrc.de/eclipse/new_icons//previous_motif.gif\"></A>      <A NAME=tex2html4789 HREF=\"node321.html\"><IMG ALIGN=BOTTOM ALT=\"index\" SRC=\"http://www.ecrc.de/eclipse/new_icons//index_motif.gif\"></A>   <BR>\r\n<B> Next:</B> <A NAME=tex2html4788 HREF=\"node213.html\"> Stream Connection Between </A>\r\n<B>Up:</B> <A NAME=tex2html4786 HREF=\"node209.html\"> Interprocess Communication</A>\r\n<B> Previous:</B> <A NAME=tex2html4780 HREF=\"node211.html\"> Stream Connection on </A>\r\n<BR> <HR> <P>\r\n<BR> <HR>\r\n<P><ADDRESS>\r\n<I>Micha Meier <BR>\r\nMon Mar  4 12:11:45 MET 1996</I>\r\n</ADDRESS>\r\n</BODY>\r\n", "encoding": "ascii"}