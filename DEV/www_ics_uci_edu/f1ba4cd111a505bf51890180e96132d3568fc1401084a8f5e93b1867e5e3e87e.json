{"url": "https://www.ics.uci.edu/~magda/Courses/ics167/chatroom_demo/client/", "content": "<!doctype html>\r\n<html>\r\n<head>\r\n\t<meta charset='UTF-8' />\r\n\t<style>\r\n\t\tinput, textarea {border:1px solid #CCC;margin:0px;padding:0px}\r\n\r\n        #ip {line-height:20px}\r\n        #port {line-height:20px}\r\n\t\t#body {max-width:800px;margin:auto}\r\n\t\t#log {width:100%;height:400px}\r\n\t\t#message {width:100%;line-height:20px}\r\n\t</style>\r\n\t<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\"></script>\r\n\t<script src=\"fancywebsocket.js\"></script>\r\n\t<script>\r\n\t\tvar Server;\r\n\r\n\t\tfunction log( text ) {\r\n\t\t\t$log = $('#log');\r\n\t\t\t//Add text to log\r\n\t\t\t$log.append(($log.val()?\"\\n\":'')+text);\r\n\t\t\t//Autoscroll\r\n\t\t\t$log[0].scrollTop = $log[0].scrollHeight - $log[0].clientHeight;\r\n\t\t}\r\n\r\n\t\tfunction send( text ) {\r\n\t\t\tServer.send( 'message', text );\r\n\t\t}\r\n\r\n        function connect(){\r\n            log('Connecting...');\r\n\t\t\tServer = new FancyWebSocket('ws://' + document.getElementById('ip').value + ':' + document.getElementById('port').value);\r\n\r\n\t\t\t$('#message').keypress(function(e) {\r\n\t\t\t\tif ( e.keyCode == 13 && this.value ) {\r\n\t\t\t\t\tlog( 'You: ' + this.value );\r\n\t\t\t\t\tsend( this.value );\r\n\r\n\t\t\t\t\t$(this).val('');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t//Let the user know we're connected\r\n\t\t\tServer.bind('open', function() {\r\n                document.getElementById(\"cntBtn\").disabled = true;\r\n\t\t\t\tlog( \"Connected.\" );\r\n\t\t\t});\r\n\r\n\t\t\t//OH NOES! Disconnection occurred.\r\n\t\t\tServer.bind('close', function( data ) {\r\n                document.getElementById(\"cntBtn\").disabled = false;\r\n\t\t\t\tlog( \"Disconnected.\" );\r\n\t\t\t});\r\n\r\n\t\t\t//Log any messages sent from server\r\n\t\t\tServer.bind('message', function( payload ) {\r\n\t\t\t\tlog( payload );\r\n\t\t\t});\r\n\r\n\t\t\tServer.connect();\r\n        }\r\n\r\n\t</script>\r\n</head>\r\n\r\n<body>\r\n\t<div id='body'>\r\n        Server ip: <input type='text' id='ip' name='ip'>\r\n        Server port: <input type='text' id='port' name='port'>\r\n        <button type=\"button\" id='cntBtn' onclick=\"connect();\">Connect</button>\r\n\t\t<textarea id='log' name='log' readonly='readonly'></textarea><br/>\r\n\t\t<input type='text' id='message' name='message' />\r\n\t</div>\r\n</body>\r\n\r\n</html>\r\n", "encoding": "ascii"}