{"url": "https://www.ics.uci.edu/~eppstein/junkyard/euler/all.html", "content": "<html><head>\n<title>Euler's Formula</title>\n</head><body>\n<h1><a href=\"http://www.ics.uci.edu/~eppstein/junkyard/\"><img src=\"../junkyard.gif\" align=center width=\"545\" height=\"45\" alt=\"The Geometry Junkyard\" border=0></a></h1>\n<hr>\n<h1>Proof 1: Interdigitating Trees\n</h1>\n\n<p>For any connected embedded planar graph G define the <i>dual graph</i> G* by\ndrawing a vertex in the middle of each face of G,\nand connecting the vertices from two adjacent faces by a curve e* through\ntheir shared edge e.  Note that G**=G.\nAny cycle in G disconnects G* by the Jordan curve theorem.\nAny acyclic subgraph F of G is a forest and does not disconnect G*\n(you can get from any face to any other face by detouring around\ntrees in F).  So connectedness and acyclicity are dual to each other.\nThis duality forms the basis of the following proof:</p>\n\n<blockquote>\nChoose any spanning tree T in G; this is by definition a connected\nacyclic subgraph.  The dual edges of its complement, (G-T)*,\nform an acyclic connected subgraph of G* which is therefore also\na spanning tree.\nThe two trees together have (V-1)+(F-1) edges.\n</blockquote>\n\n<p>This is my favorite proof, and is the one I use when teaching graph theory.\n<a href=\"refs.html#Som\">Sommerville</a> attributes it to <a href=\"refs.html#VS\">Von Staudt</a>.\nIt fits in well with other topics of planar duality such as the fact that\nevery planar graph with all faces even is bipartite (by duality from Euler tours).\nSeveral other proofs of the Euler formula have two versions, one\nin the original graph and one in its dual, but this proof is self-dual\nas is the Euler formula itself.</p>\n\n<p align=center><img src=\"interdig.gif\"></p>\n\n<p>The idea of decomposing a graph into interdigitating trees has proven\nuseful in a number of algorithms, including work of myself and others on\n<a href=\"http://www.ics.uci.edu/~eppstein/pubs/p-eittwy.html\">dynamic\nminimum spanning trees</a> as well as work of Goodrich and Tamassia\non point location.  It also has obvious connections to power-ground\nrouting in VLSI design and to watershed analysis.</p>\n<H1>\nProof 2: Induction on Faces\n</H1>\n\nWe can prove the formula for all connected planar graphs, by\ninduction on the number of faces of G.\n\n<BLOCKQUOTE>\nIf G has only one face, it is acyclic\n(by the Jordan curve theorem) and connected, so it is a tree\nand E=V-1.  Otherwise, choose an edge <I>e</I> connecting two\ndifferent faces of G, and remove it; <I>e</I> can then only appear once in the\nboundary of each face, so the graph remains connected -- any path\ninvolving <I>e</I> can be replaced by a path around the other side of one of\nthe two faces.  This removal decreases both the number of faces and\nedges by one, and the result then holds by induction.\n</BLOCKQUOTE>\n\nThis proof commonly appears in graph theory textbooks\n(for instance <a href=\"refs.html#BonMur\">Bondy and Murty</a>)\nbut is my least favorite: it is to my mind unnecessarily complicated\nand inelegant; the full justification for some of the steps seems to be\njust as much work as all of the first proof.\nIt doesn't generalize very well,\nand there are some critical details that textbook authors often omit.\n<H1>\nProof 3: Induction on Vertices\n</H1>\n\nThis argument is the planar dual to the proof by\ninduction on faces.\n\n<BLOCKQUOTE>\nIf G has only one vertex, each edge is a Jordan curve,\nso there are E+1 faces and F+V-E=(E+1)+1-E=2.\nOtherwise, choose an edge <I>e</I> connecting two\ndifferent vertices of G, and contract it.  This decreases both the\nnumber of vertices and\nedges by one, and the result then holds by induction.\n</BLOCKQUOTE>\n<H1>\nProof 4: Induction on Edges\n</H1>\n\nBy combining the two previous proofs we get an induction\nwith a much simpler base case.\n\n<BLOCKQUOTE>\nIf the connected planar graph G has no edges, it is an isolated vertex\nand V+F-E=1+1-0=2.  Otherwise, choose any edge <I>e</I>.  If <I>e</I>\nconnects two vertices,\ncontract it, reducing V and E by one.  Otherwise, it is a Jordan curve\nand separates two faces; remove it and reduce F and E by one.\nIn either case the result follows by induction.\n</BLOCKQUOTE>\n\nThis is the proof used by <a href=\"refs.html#vLW\">van Lint and Wilson</a>.\nOther variants are possible -- if <I>e</I> connects two vertices and\nseparates two faces,\nwe may choose in various ways whether to delete or contract <I>e</I>.\n<H1>\nProof 5: Divide and Conquer\n</H1>\n\nThis proof was sent to me by Alex Bogomolny, who found it in a Russian\ntranslation (1958) of the 7th edition of\n<a href=\"refs.html#Had\">J. Hadamard's Elementary Geometry</a> (vol 2).  It\nis closely related to the proof by\n<a href=\"ear.html\">ear decomposition</a>.\n\n<BLOCKQUOTE>\nThe proof is by induction on the number of faces.  First of all, you\nremove one face and prove the formula V-E+F=1 for open polyhedral\nsurfaces. For a single face the formula obviously holds. Assume the\nformula holds for a smaller than F number of faces and consider a\nsurface with number of faces equal to F. Pick two vertices on the\nboundary (left by the removed face) of the surface and connect them by a\nchain of internal edges. (The existence of such a chain follows by a\nform of the Jordan curve theorem.) Now cut along this chain. You get two\nsurfaces for which the formula V-E+F=1 holds.  For the first let it be\nV1-E1+F1=1 and for the second V2-E2+F2=1.  Assume the chain contains L\nedges hence (L+1) vertices.  It then follows that E1+E2=E+L and\nV1+V2=V+L+1. Of course F1+F2=F.  Summing (algebraically) up gives the\ndesired result.\n</BLOCKQUOTE>\n\nOne can also use a dual version of the proof, in which an open disk\n(initially formed by removing a vertex from the polyhedron) is\ndecomposed by finding alternating sequences of edges and faces.\n<H1>\nProof 6: Electrical Charge\n</H1>\n\nThis proof is due to <a href=\"refs.html#Thu\">Thurston</a>.\nHe writes:\n<BLOCKQUOTE>\nArrange the polyhedron in space so that no edge is horizontal -- in\nparticular, so there is exactly one uppermost vertex U and lowermost\nvertex L.\n<P>\nPut a unit + charge at each vertex, a unit - charge at the center of\neach edge, and a unit + charge in the middle of each face.  We will show\nthat the charges all cancel except for those at L and at U.  To do this,\nwe displace all the vertex and edge charges into a neighboring face, and\nthen group together all the charges in each face.  The direction of\nmovement is determined by the rule that each charge moves horizontally,\ncounterclockwise as viewed from above.\n<P>\n<CENTER>\n<img src=\"charges.gif\">\n</CENTER>\n<P>\nIn this way, each face receives the net charge from an open interval\nalong its boundary.  This open interval is decomposed into edges and\nvertices, which alternate.  Since the first and last are edges, there is\na surplus of one -; therefore, the total charge in each face is zero.\nAll that is left is +2, for L and for U.\n</BLOCKQUOTE>\n\nThurston goes on to generalize this idea to a proof that the\n<a href=\"http://www.math.hmc.edu/funfacts/ffiles/10001.4-7.shtml\">Euler characteristic</a>\nis an invariant of any triangulated differentiable manifold.\n<H1>\nProof 7: Dual Electrical Charge\n</H1>\n\nRather than grouping charges in faces of the graph, we can give a dual argument\nthat groups charges at vertices.  This proof works best with the convex\nplanar embedding of the graph of a polyhedron.\n<BLOCKQUOTE>\nRotate the graph if necessary so that no edge is vertical.\nAs in the previous proof,\nput a unit + charge at each vertex, a unit - charge at the center of\neach edge, and a unit + charge in the middle of each face.\nWe will show that all but two + charges cancel.\nTo do this, displace the charge on each edge to its right endpoint;\ndisplace the charge on each face (except the outer face) to its rightmost vertex.\nEach vertex (except the leftmost vertex)\nreceives the charges from an alternating sequence of edges and faces,\ncancelling its initial charge.  The only remaining uncancelled charges\nare one + charge on the outer face and one + charge on the leftmost vertex.\n</BLOCKQUOTE>\n<CENTER>\n<img src=\"dualcharge.gif\">\n</CENTER>\n<H1>\nProof 8: Sum of Angles\n</H1>\n\nThis proof uses the fact that the planar graph formed by the polyhedron\ncan be embedded so all edges form straight line segments.\n\n<BLOCKQUOTE>\nSum up the angles in each face of a straight line drawing of the graph\n(including the outer face); the sum of angles in a <I>k</I>-gon is\n(<I>k</I>-2)pi, and each edge contributes to two faces, so the total sum\nis (2E-2F)pi.\n<P>\nNow let's count the same angles the other way.\nEach interior vertex is surrounded by triangles and contributes a total\nangle of 2 pi to the sum.\nThe vertices on the outside face contribute 2(pi - theta(v)).\nwhere theta denotes the exterior angle of the polygon.\nThe total exterior angle of any polygon is 2 pi,\nso the total angle is 2 pi V - 4 pi.\n<P>\nCombining these two formulas and dividing through by 2 pi,\nwe see that V - 2 = E - F, or equivalently V-E+F=2.\n</BLOCKQUOTE>\n\nThis is the method used by Descartes in 1630.\n<a href=\"refs.html#Som\">Sommerville</a> attributes this proof to\n<a href=\"refs.html#Lhu\">Lhuilier</a> and\n<a href=\"refs.html#Ste\">Steiner</a>.\n<a href=\"refs.html#HilPed\">Hilton and Pederson</a> use angles in a similar way\nto relate the Euler characteristic of a polyhedral surface\nto its <I>total angular defect</I>.\n<H1>\nProof 9: Spherical Angles\n</H1>\n\nThe proof by sums of angles works more cleanly in terms of spherical triangulations,\nlargely because in this formulation there is no distinguished \"outside face\"\nto cause complications in the proof.\n<P>\nWe need the following basic fact from spherical trigonometry:\nif we normalize the surface area of a sphere to 4 pi,\nand look at any triangle defined by great circle arcs on the sphere,\nthe sum of the three interior angles is pi+a where a (the <I>excess</I>\nof the triangle, is equal to the surface area of the triangle.\n(E.g. see <a href=\"refs.html#Wells\">Wells</a>, p. 238).\n\n<BLOCKQUOTE>\nTo translate our question on polyhedra to one of spherical geometry,\nfirst triangulate the polyhedron; each new edge increases E and F by one each,\nso V-E+F is left unchanged.  Now perform a similar\nlight-shining experiment to the one described on the <A\nHREF=\"index.html\">index page</a>:\nplace a light source at an interior point of the polyhedron,\nand place a spherical screen outside the polyhedron\nhaving the light source as its centerpoint.\nThe shadows cast on the screen by the polyhedron edges will form\na spherical triangulation.  Since every edge is on two triangles\nand every triangle has three edges, 2E=3F.\n<P>\nWe now add up the angles of all the triangles; by the spherical trigonometry described above, the sum is (4+F) pi.  Adding the same angles another way, in terms of the vertices, gives a total of 2 V pi.  Since these two sums measure the same set of angles,\nF=2V-4 and combining this with the other equation 2E=3F yields the result.\n</BLOCKQUOTE>\n\n<a href=\"refs.html#Som\">Sommerville</a> attributes this proof to\n<a href=\"refs.html#Leg\">Legendre</a>.\nBecause of its connections with\n<a href=\"http://www.ics.uci.edu/~eppstein/junkyard/topo.html\">geometric\ntopology</a>, this is the proof used by\n<a href=\"refs.html#Weeks\">Weeks</a>,\nwho also gives an elegant proof of the spherical angle-area relationship\nbased on inclusion-exclusion of great-circular double wedges.\n<P>\nThe relation A*k = 2 pi (V-E+F)\non a surface of constant curvature k such as the sphere\nis a form of the Gauss-Bonnet formula from differential geometry.\n<H1>\nProof 10: Pick's Theorem\n</H1>\n\n\nWe have translated our\n<a href=\"angle.html\">sum-of-angles proof</a> to \n<a href=\"sphere.html\">spherical trigonometry</a>, in the process\nobtaining formulas in terms of sums of areas of faces.\nNow we examine similar formulas for sums of areas in planar geometry,\nfollowing a suggestion of\n<a href=\"refs.html#Wells\">Wells</a>.\n\n<P>\nThe basic tool here is <a href=\"http://www.mcs.drexel.edu/~crorres/Archimedes/Stomachion/Pick.html\">Pick's Theorem</a>:\nin any polygon P drawn so that it's vertices are on points (x,y)\nwhere x and y are both integers, the area of P can be expressed\nas N + B/2 - 1, where N is the number of integer interior points, \nand B is the number of integer points on the edges and vertices of P.\nThis can be proven in a number of ways, for instance by choosing\na horizontal line L passing below the polygon and partitioning the polygon's area\ninto the sum of signed areas of trapezoids from L\nto each edge.  These proofs do not require Euler's formula so there is\nno danger of circular reasoning.\n\n<BLOCKQUOTE>\nFirst draw the planar graph corresponding to the polygon, with straight\nline segment edges.  It is possible to choose a sufficiently small\nradius r, such that if we move each vertex somewhere within a circle of\nthat radius centered on its original location, the resulting graph will\nremain planar; scale the graph so that r=1.\nThen move every vertex to the nearest integer vertex; the result is an\nequivalent planar graph drawn in the grid.\n<P>\nThe outer face of the graph is covered exactly once by the remaining faces,\nso the sum of the areas of the remaining faces should equal the area of\nthe outer faces.  This sum of areas is, by Pick's Theorem,\nI+X+B/2+S/2-(F-1), where I is the number of points interior to one of the faces,\nX is the number of points on an interior edge (each of which counts 1/2\nin each of two faces), S is the sum (over all vertices) of the number of\ninterior faces the vertex belongs to, and the (F-1) term comes from\nadding the -1 term in each of F-1 applications of Pick's theorem.\n<P>\nA vertex interior to the graph contributes a term to S equal to its degree,\nwhereas a vertex on the outer face contributes only its degree minus one.\nTherefore S=2E-K where K is the number of vertices on the outer face.\nFurther, by Pick's Theorem, the area of the outer face is\n(I+X+V-K)+(B+K)/2-1.\nCombining the two equations S=2E-K and\nI+X+B/2+S/2-(F-1)=(I+X+V-K)+(B+K)/2-1 yields the result.\n</BLOCKQUOTE>\n\n<P>Unfortunately <a href=\"/~eppstein/junkyard/pick3d.html\">Pick's theorem\ndoes not generalize</a> to higher dimensions, so this approach seems\nunlikely to work for proving higher-dimensional forms of Euler's formula.\n<H1>\nProof 11: Ear Decomposition\n</H1>\n\nA graph is <I>two-edge-connected</I> if removing any edge leaves a connected subgraph.\nTwo-edge-connectivity is equivalent to the existence of an <I>ear decomposition</I>:\na partition of the edges of the graph into a sequence of <I>ears</I>\n(simple paths and cycles), with the first ear being a single vertex; the\nstart and\nend of each successive ear should be vertices occurring in previous\nears, but all\nother vertices in an ear should be new.  Such a decomposition can be\nfound one ear at a time: start each ear by any unused edge <I>e</I> from an\nalready-explored vertex, and continue by a shortest path back to another\nalready-explored vertex (such a path must exist because <I>e</I> cannot\ndisconnect the graph).\n<P>\nWe can use such a decomposition in a proof of the Euler formula for polyhedra:\n<BLOCKQUOTE>\nThe graph G of a polyhedron is two-edge-connected, since if we remove an edge e\nwe can still connect its endpoints by a path around the other side of one of the\ntwo faces of G containing e.\n<P>\nFind an ear decomposition of G, and consider the process of forming G by\nadding ears one at a time starting\nfrom a single vertex.  Initially there is one vertex, one face, and no edges.\nEach new ear forms a path connecting two vertices on the boundary of a face,\nsplitting the face in two; the path has one more edge than it has vertices.\nSo if the ear has <I>k</I> edges, its addition increases V by\n<I>k</I>-1, E by <I>k</I>, and F by 1,\nand the result follows by induction on the number of ears.\n</BLOCKQUOTE>\nEar decompositions have been especially useful in the design of parallel algorithms,\nsince they are easier to find in parallel than are other structural decompositions\nof graphs such as depth first search trees.\nFor an example of this see my work on\n<a href=\"http://www.ics.uci.edu/~eppstein/pubs/p-serpar.html\">recognizing\nseries parallel graphs</a>.\n<H1>\nProof 12: Shelling\n</H1>\n\n<a href=\"refs.html#Z\">Ziegler</a>\ninterprets a polyhedron or polytope as a complex of polyhedral\nfaces of varying dimensions.  He lets <I>f<sub>i</sub></I> denote the number\nof faces of dimension i, so <I>f</I><sub>0</sub>=V,\n<I>f</I><sub>1</sub>=E, and <I>f</I><sub>2</sub>=F,\nbut he also adds faces of dimension <I>d</I> (the whole polytope)\nand -1 (the empty face); <I>f</I><sub>-1</sub>=<I>f<sub>d</sub></I>=1.\n\nZiegler\ndefines a <I>shelling</I> of a complex of polyhedral faces\nto be a linear ordering on the maximal-dimension faces (<I>facets</I>)\nsuch that, if the facets are of dimension at least one,\nthe ordering satisfies the following properties:\n<OL>\n<LI>The boundary of the first facet F<sub>0</sub> has a shelling.\n<LI>The intersection of each facet F<sub><I>j</I></sub> (<I>j</I> > 0) with the\nunion of previous\nfacets is nonempty and forms the prefix of a shelling of F<sub><I>j</I></sub>.\n</OL>\n\nEvery convex polytope has a shelling found by traveling in a straight line\nfrom some point near one face of the polyhedron, and ordering the faces\nby the sequence of points at which the line crosses the plane of a face\nand the face becomes visible.  (The line must be imagined to pass\n\"to infinity and beyond\" through to the other side of the polyhedron.)\nThe intersection of a facet F<sub><I>j</I></sub> with previous facets\ncan be found\ngeometrically as the portion of the boundary of the facet\nvisible from the intersection point of the viewing line with the plane\nof the facet; this shows that the lower-dimensional shelling required by\nproperty 2 is of the same geometric type.\n\nZiegler then proves that any polytope\nhas Euler characteristic\nX(P)=Sum(-1<sup><I>i</I></sup> <I>f<sub>i</sub></I>)=0,\nby an induction on dimension and shelling length:\n<BLOCKQUOTE>\nThe base case, in which f<sub>-1</sub>=f<sub>0</sub>=1, is clear.\nNow if P is a <I>d</I>-polytope with shelling order\nF<sub>1</sub>,F<sub>2</sub>,... then we have\nmore precisely that\nX(F<sub>1</sub> u F<sub>2</sub> u ... u F<sub><I>j</I></sub>)\nis 0 for <I>j</I> &lt; <I>f</I><sub><I>d</I>-1</sub>\nand 1 for <I>j</I> = <I>f</I><sub><I>d</I>-1</sub>\nwhich follows by induction on <I>j</I>, \nsince the facets we add in are (<I>d</I>-1)-polytopes, the Euler\ncharacteristic is additive, and the intersection of F<sub><I>j</I></sub> with\nprevious facets is a shellable part of, but (for <I>j</I> &lt;\n<I>f</I><sub><I>d</I>-1</sub>)\nnot the whole boundary of\nF<sub><I>j</I></sub> (Ziegler shows that this last observation is true\nin general, but it is evident geometrically for the\nshelling defined above).\n</BLOCKQUOTE>\nRemoving the two \"extra\" faces <I>f</I><sub>-1</sub> and\n<I>f</I><sub>3</sub> from this sum\ngives us the usual Euler formula.\n<H1>\nProof 13: Triangle Removal\n</H1>\n\nThis proof is really just a variation on <a href=\"shell.html\">shelling</a>,\nbut is included here for its historical significance: it was\nused by Cauchy, and was examined at length by <A\nHREF=\"refs.html#Lak\">Lakatos</a>.\n\n<BLOCKQUOTE>\nBegin with a convex planar drawing of the polyhedron's edges.\nIf there is a non-triangular face, add a diagonal to a face,\ndividing it in two and adding one to the numbers of edges and faces;\nthe result then follows by induction.\n<P>\nSo suppose we have any planar graph with all interior faces\ntriangular, with at least two such faces, and with the further property\nthat one can get from any interior point to any other\nby a path that avoids the boundary of the graph's outer face.\n(The triangulation of the convex drawing of our polyhedron clearly\nsatisfies these properties.)\nThen there are always at least two triangles having edges on this boundary,\nsuch that the removal of either one leaves a single triangle or a\nsmaller graph of the same type;\nthis can be proved by an induction on the number of triangles,\nfor if some boundary triangle disconnects the interior points,\nthe two disconnected components on its two non-boundary edges\nmust either be single triangles\n(which are removable) or have (by induction)\ntwo removable boundary triangles, at least one of which\nwill be removable in the overall graph.\n<P>\nSo remove boundary triangles one by one; at each step we remove\neither one edge and one face, or two edges, a face, and a vertex.\nIn all cases V-E+F remains unchanged.  Eventually we reach\na graph formed by a single triangle at which point\nV-E+F=3-3+2=2.\n</BLOCKQUOTE>\n\nThe case analysis occurring in higher dimensional\nversions of this proof is closely related to Radon's theorem\nthat any <I>d</I>+2 points can be partitioned into two\nsubsets with intersecting convex hulls,\nand to \"flipping\" based algorithms for constructing\nDelaunay triangulations and convex hulls.\n<H1>\nProof 14: Noah's Ark\n</H1>\n\nPortions of this proof are from <a href=\"refs.html#BisGol\">Bishop and\nGoldberg</a>.\n\n<BLOCKQUOTE>\nDefine a height function on the surface of the polyhedron as follows:\nChoose arbitrary heights for each vertex.\nIn each edge, choose a height for one interior point greater\nthan that of the two endpoints, and interpolate the remainder\nof the edge linearly between the chosen point and the endpoints.\nIn each face, choose a height for one interior point, greater\nthan all heights on its boundary; interpolate the heights in the rest\nof the face linearly on line segments from the chosen point to the boundary.\nThe result is a continuous function with V+F+E critical points:\nV local minima at the vertices, E saddles at the chosen points of edges,\nand F local maxima at chosen points of faces.\n<P>\nNow view the surface as an initially bone dry earth on which there is\nabout to fall a deluge which ultimately covers the highest peak.  We\ncount the number of lakes and connected land masses formed and destroyed\nin this rainstorm to obtain the result.\n<P>\nFor each local minimum there will be one lake formed.\nFor each saddle there will either be two lakes joined or a single lake\ndoubling back on itself and disconnecting one land mass from another\n(let J and D denote the number of times these events happen respectively).\nFor each peak a land mass will be eliminated.\nInitially there is one land mass, and in the final sitation there is one global lake.\nThus we have 1+D-F=0 and 0+V-J=1.\nCombining these two equations with the fact that D+J=E yields the result.\n</BLOCKQUOTE>\n\nOne can either view the rainfall as (unnaturally) causing the global water levels\nto always be at the same height, so that two lakes reach a saddle at the same time;\nor one can take a more realistic viewpoint and say that the rainfall may\nvary arbitrarily over the globe, but when one lake reaches a saddle the water will\nspill over it (and the lake will not rise) until the lake on the other\nside of the saddle reaches the same height.\n<P>\nThis proof is close to self-dual, the biggest asymmetry being in the\ndefinition of the height function.\nAs usual, the Jordan curve theorem is involved, in the fact that a lake\ndoubling back on itself creates an island. The principle of classifying the singular points (peaks, saddles, and valleys) for a height function defined on a surface is the main idea behind Morse theory, but this proof dates back much earlier than Morse, to an 1863 publication of M&ouml;bius.\n<H1>\nProof 15: Binary Homology\n</H1>\n\nPortions of the following proof are described by\n<a href=\"refs.html#Lak\">Lakatos</a> (who credits it to Poincar&eacute;)\nhowever Lakatos omits any detailed justification for the properties \nof the map b defined below, instead treating them as axioms\n(so the theorem he ends up proving is that\nthat Euler's formula is true of any polyhedron satisfying these axioms,\nbut he doesn't prove that this is true of convex polyhedra).\n<P>\nLike the <a href=\"shell.html\">shelling</a> proof,\nthis proof\ninterprets a polyhedron or polytope as a complex of polyhedral\nfaces of varying dimensions, with <I>f<sub>i</sub></I> denoting the number\nof faces of dimension i.  And like that proof,\nwe add two \"extra\" cells, one for the whole polytope\nand one for the \"empty face\", so <I>f</I><sub>-1</sub>=<I>f<sub>d</sub></I>=1.\n<P>\nWe interpret the subsets of faces of dimension <I>i</I>\nas a vector space over the two-element field GF(2),\nwith vector addition being performed by symmetric difference\nof subsets (also known as exclusive or).\nIn this way we get <I>d</I>+1 vector spaces V<sub><I>i</I></sub>,\nwith dimensions equal to <I>f<sub>i</sub></I>.\nThe sets of faces of the polytope can be interpreted as forming\nbases for these vector spaces.\n<P>\nThese spaces also come equipped with a linear mapping b taking\neach space V<sub><I>i</I></sub> to the next lower dimensional space,\ndefined on each face to be the set of its facets.\nWhen v is a sum of faces, b(v) is the sum of the corresponding\nsets of facets.\n(The empty face has no facets, and a vertex is defined\nto have the empty face as its only facet.)\nThis mapping has two very important properties:\n<OL>\n<LI>Boundaries have no boundaries.  In other words,\nfor any vector v, b(b(v))=0.\nIf v is a basis vector, corresponding to a single face of the polytope,\nthis is true because any <I>ridge</I> (face two dimensions lower than <I>v</I>)\nforms the boundary between two facets of <I>v</I>, and is therefore\ncancelled out in the calculation of b(b(v)).\nIn the special case of the empty face, b(v)=0 already and for any linear\nmap b(0)=0.  In the special case of a vertex, b(v) is the empty face\nand again b(b(v))=0.\nThe result follows as well for vectors other than the bases\nby linearity.\n<P>\n<LI>Any vector without a boundary is itself a boundary.\nIn other words, for any vector v, if b(v)=0, then v=b(w) for some w.\nIf v=0 then we can choose w=0 as well; for nonzero v\nwe prove this by analyzing the vectors of each dimension separately.\nIf v is in V<sub>-1</sub>, it must be the empty face itself\nand is the boundary of some vertex.\nIf v is in V<sub>0</sub>, it must consist of an even number of vertices\nfor b(v) to be zero.  These vertices can be paired up\nand connected by paths; then w can be taken to be the vector sum of\nthese paths.\nIf v is in V<sub>1</sub>, it forms a set of edges meeting an even number of\ntimes at each vertex; these edges can be grouped into Jordan curves\nand w can be taken to be the vector sum of regions bounded by these curves.\nIf v is in V<sub>2</sub>, it must be the whole set of facets of the polyhedron,\nsince we can find a path on the polyhedron boundary from any facet to\nany other facet (avoiding vertices), and none of the edges\ncrossed by this path can be in b(v).\nSo we can take w to be the single cell corresponding to the whole polyhedron.\nFinally, if v is a nonzero vector in V<sub>3</sub>, b(v) cannot be zero.\n</OL>\n<P>\nWith these preliminaries out of the way we are ready to\nbegin the proof that\nSum(-1<sup><I>i</I></sup> <I>f<sub>i</sub></I>)=0.\n<BLOCKQUOTE>\nLet B<sub><I>i</I></sub> denote the subspace of V<sub><I>i</I></sub> consisting\nof those vectors for which b(v)=0.\nThen the map b takes V<sub><I>i</I></sub> to B<sub><I>i</I>-1</sub>.\nWhenever we have a linear map of vector spaces,\nwe can use it to decompose the original space into\nits <I>nullspace</I> (the set of vectors mapped to zero,\nhere B<sub><I>i</I></sub>) and its orthogonal complement,\nwhich is mapped one-to-one onto the image of the map.\nThis tells us that\ndim(V<sub><I>i</I></sub>)=dim(B<sub><I>i</I></sub>)+dim(B<sub><I>i</I>-1</sub>).\nPlugging this expansion into the sum we are trying to evaluate\ngives\n<BLOCKQUOTE>\nSum(-1<sup><I>i</I></sup> <I>f<sub>i</sub></I>)\n\n= Sum(-1<sup><I>i</I></sup> (dim(B<sub><I>i</I></sub>) +\ndim(B<sub><I>i</I>-1</sub>)))\n</BLOCKQUOTE>\nwhich equals zero, because each term B<sub><I>i</I></sub>\nappears twice with opposite signs.\n</BLOCKQUOTE>\nCancelling the two extra parameters <I>f</I><sub>-1</sub> and\n<I>f</I><sub>3</sub> from\nthe sum gives the usual Euler formula.\nI suspect there is a more direct, dimensionless way of proving\nthat boundaryless vectors are themselves boundaries, but I don't see it\nand Lakatos doesn't describe it.\n<P>\n<I>Homology theory</I>, one of the foundation stones of\nalgebraic topology, is devoted to defining similar vector spaces and\nunderstanding\nthe extent to which the key equation\ndim(V<sub><I>i</I></sub>)=dim(B<sub><I>i</I></sub>)+dim(B<sub><I>i</I>-1</sub>)\nfails to be true in other topological spaces.\n<H1>\nProof 16: Binary Space Partition\n</H1>\n\n<P>A <a href=\"http://reality.sgi.com/bspfaq/\">binary space partition</a>\nis a data structure commonly used for computer\ngraphics and other geometric searching problems.  It's formed by cutting\nspace by a hyperplane, then recursively partitioning each of the two\nresulting halfspaces.  The result is a hierarchical decomposition of\nspace into convex cells.</P>\n\n<P>In 1974, <a href=\"refs.html#Tv\">Helge Tverberg</a> showed that, given\nany convex polytope K, one can find a binary space partition that decomposes\nK into simplices.  This is obvious for two dimensional polytopes (just\nrepeatedly cut along polygon diagonals); the general proof proceeds by\ninduction on dimension and number of faces:</P>\n\n<BLOCKQUOTE>\nWe assume K is not a simplex or we would already be done.\n\n<P>If K has a vertex P incident to more than d facets, then (by induction on dimension) we can partition K by hyperplanes through P into smaller polytopes\neach of which has exactly d facets incident to P.\nThe number of facets not incident to P in each of these polytopes\nis at most the same as in K, so each smaller polytope has fewer facets than K.\nBy induction on number of facets, we can recursively partition the smaller polytopes into simplices.\n\n<P>On the other hand suppose that each vertex of K has only d incident facets.\nLet P be a vertex of K that is not adjacent to some two facets F1 and F2\n(we can find P, F1, and F2 by induction on dimension if K has a non-simplicial facet; if all facets of K are simplices, let F1 and F2 be two adjacent facets and P be any vertex other than the d+1 vertices shared by F1 and F2).\nLet L be the hyperline contained in the hyperplanes through F1 and F2,\nand cut K by a hyperplane through P and L.\nThen each of the two pieces avoids one of the facets Fi, but has a new facet\non the cut plane, so its number of facets is not increased.\nOne can show that each piece either has more than d facets at P\n(in which case we can apply the previous case), or avoids an additional\nfacet of K (in which case we can apply induction on the number of\nfacets), so either way we can partition each piece recursively.\n</BLOCKQUOTE>\n\nThe number of cuts in this partition may be exponential in the number of facets,\nbut this seems unavoidable due to examples like the hypercube which have few facets but require many cuts.\n\n<P>Tverberg then proves that the Euler characteristic X(K)\n(as defined more precisely for the\n<a href=\"shell.html\">shelling proof</a>) is always zero,\nby induction on dimension and on the number of cuts in the binary space\npartition:\n\n<BLOCKQUOTE>\nIf K is a simplex, the number of faces of any dimension is\ncounted by a binomial coefficient, and the identity X(K)=0\nis just the application of the binomial theorem to\nthe evaluation of (1+x)<sup>d</sup> at x&nbsp;=&nbsp;-1.\n\n<P>Otherwise, let the top level cut of the\nbinary space partition split K into\ntwo polytopes K1 and K2.  Let K3 be the convex hull of\nthe set of vertices of K that are contained in the cutting hyperplane,\nand let K4 be the intersection of K with the cutting hyperplane.\nThen we have the formula\n\n<DIV ALIGN=CENTER>\nX(K) = X(K1) + X(K2) + 2 X(K3) - 3 X(K4),\n</DIV>\n\n<P>since each face of K is either contained in the cutting hyperplane\n(contributing to all four terms X(Ki)), split by the cutting hyperplane\n(forming a face of one lower dimension in K1, K2, and K4, and\ncontributing a negated term to each of these three polytopes' Euler\ncharacteristics), or is contained in one of the two halfspaces (and\ncontributes only to X(K1) or X(K2)).\n\n<P>K1 and K2 have smaller binary space partitions, and K3 and K4 have lower dimension, so by induction all have zero Euler characteristic.\nTherefore, X(K) is also zero.\n</BLOCKQUOTE>\n<H1>\nProof 17: Valuations\n</H1>\n\n<P>This proof comes from\n<a href=\"refs.html#KR\">Klain and Rota</a>,\nwho develop it as part of a more general theory of\ninvariant measures on Euclidean spaces.\nThanks also to Robin Chapman for helping explain it to me.\n\n<P>Let U<sup>d</sup> be the vector space of functions from <b>R</b><sup>d</sup>\nto <b>R</b>, and V<sup>d</sup> be the subspace of U<sup>d</sup>\ngenerated by characteristic functions of compact convex sets\nin <b>R</b><sup>d</sup>.\nWe define a function &chi;<sub>d</sub> that maps V<sup>d</sup> to real numbers,\nas follows:\n<UL>\n<LI>If d=1, for any function f in V<sup>d</sup>, let\n<br><br>\n<div align=center>\nD&nbsp;f(x)&nbsp;=&nbsp;f(x)&nbsp;-&nbsp;lim<sub>y->x<sup>+</sup></sub>f(y),\n<br><br>\n&chi;<sub>1</sub>(f) = sum D&nbsp;f(x)\n</div>\n<br><br>\n(Note that this sum always has only a finite number of nonzero terms.)\n<br><br>\n<LI>If d>1, partition the coordinates of <b>R</b><sup>d</sup> into sets\nof d-1 and 1 coordinate:\n<br><br>\n<div align=center>\n<b>R</b><sup>d</sup>&nbsp;=&nbsp;<b>R</b><sup>d-1</sup>&nbsp;&times;&nbsp;<b>R</b>.\n</div>\n<br>Thus we can represent any point in <b>R</b><sup>d</sup> as a pair\n(x,z) where x in <b>R</b><sup>d-1</sup> and z in <b>R</b>.\nFor any function f in V<sup>d</sup>,\nand any z in <b>R</b>, let f<sub>z</sub> denote the restriction of f to\na (d-1)-dimensional cross-section:\nf<sub>z</sub>(x)&nbsp;=&nbsp;f(x,z),\nso f<sub>z</sub> is a function in V<sup>d-1</sup>.\nWe then define\n<br><br>\n<div align=center>\n&chi;<sub>d</sub>(f)&nbsp;=&nbsp;sum&nbsp;D&nbsp;&chi;<sub>d-1</sub>(f<sub>z</sub>).\n</div>\n</UL>\nBecause D and Sum are linear operators, &chi; is a linear function from V\nto <b>R</b>.  It can also be shown by a simple induction on dimension\nthat, if f is the characteristic function of a compact convex set K,\nthen &chi;(f)&nbsp;=&nbsp;1: By induction, &chi;(f<sub>z</sub>) is the\ncharacteristic function of a closed interval, from which it is clear\nfrom the definition that sum&nbsp;D&nbsp;&chi;(f<sub>z</sub>) is&nbsp;1.\nThus also (since V has the characteristic\nfunctions of convex compact sets as its basis) &chi; is well defined\nindependently of the choice of coordinates for <b>R</b><sup>d</sup>.\n\n<P>If\ng is the characteristic function of the relative interior of a polytope\nK, it is in V<sup>d</sup> (by inclusion-exclusion of lower-dimensional\nfaces) and a similar induction shows that\n&chi;(g)&nbsp;=&nbsp;(-1)<sup>m</sup>, where m is the dimension of K:\nBecause of the independence of &chi; from the coordinate system, we can assume m=d.  Each cross-section of K is itself a polytope, so by induction\n&chi;(g<sub>z</sub>) is (-1)<sup>m-1</sup> times the characteristic function of an open interval, and the effect of the sum and D operators is to multiply by another factor of&nbsp;-1.\n\n<P>Now we let K be a convex polytope, and evaluate &chi; on its characteristic function in two different ways, by partitioning K into the disjoint union of the relative interiors of its faces.  By linearity of &chi;, the sum of its values on these relative interiors must be the same as its value on all of K, that is,\n<br><br>\n<div align=center>\n1&nbsp;=&nbsp;sum (-1)^m\n</div>\n<br>\nwhere the sum is over the set of faces of K (including K itself).\nGrouping the faces by their dimensions, we get a form of Euler's formula:\n<br><br>\n<div align=center>\n1&nbsp;=&nbsp;sum&nbsp;(-1)<sup>i</sup>&nbsp;f<sub>i</sub>\n</div>\n<br>\nwhere the sum runs from i=1 to the dimension of K.\n<H1>\nProof 18: Hyperplane Arrangements\n</H1>\n\n<P>This proof comes from <a href=\"refs.html#Law\">a 1997 paper by Jim Lawrence</a>.  It applies to convex polytopes in <b>R</b><sup>d</sup>,\nand resembles in some ways the <a href=\"val.html\">valuation proof</a>.\n\n<P>If A is a finite set of hyperplanes in <b>R</b><sup>d</sup>,\nit partitions <b>R</b><sup>d</sup> into <i>faces</i>, sets of points\nthat are all contained within the same set of hyperplanes, and that are on the same side of all hyperplanes that do not contain them.  Lawrence defines an A-polyhedron to be any union of faces, and he defines a function &chi;\nfrom A-polyhedra to integers, where if f is a face then &chi;(f)=(-1)<sup>dim&nbsp;f</sup>, and if P is an A-polyhedron composed of faces f<sub>i</sub>\nthen &chi;(P)=sum &chi;(f<sub>i</sub>).\n\n<P>It is not difficult to see that &chi; has the same value for P in an\narrangement A for which P is an A-polytope; for, adding any superfluous\nhyperplane to the arrangement merely splits some faces into two\nsame-dimension faces and one face of one lesser dimension, which does\nnot change the total value of &chi; for those faces, and removing any\nhyerplane merely reverses this process.  Consequentially, if P is any\nnonempty intersection of finitely many open halfspaces then\n&chi(P)=(-1)<sup>dim&nbsp;P</sup>, for A can be assumed to be the arrangement\nof boundary hyperplanes of the halfspaces defining P, for which P is a face.\nIn particular, from the intersection of zero halfspaces we obtain\n&chi;(<b>R</b><sup>d</sup>)=(-1)<sup>d</sup>. Also, it is obvious from the construction that the value of &chi;\non a disjoint union of polyhedra is simply the sums of its values on the individual polyhedra making up the union.\n\n<P>We can now calculate the Euler characteristic of a closed\nd-dimensional convex polyhedron P, by embedding P on a hyperplane missing the\norigin in <b>R</b><sup>d+1</sup>, forming the infinite cone C of\npositive scalar multiples of points in P, and computing X(P)=&chi;(C).  This\nvaluation (when viewed in terms of the arrangement of hyperplanes\nthrough the facets of this cone) includes a term of the form\n(-1)<sup>k</sup> for every k-dimensional face of P,\nincluding 1 for the empty face (corresponding to the apex of the cone),\n-1 for the vertices (rays forming edges of the cone, which are\n1-dimensional faces of the arrangement), etc.\n\n<P>By additivity,\n\n<P ALIGN=CENTER>\nX(P) = &chi;(<b>R</b><sup>d+1</sup>) - &chi;(<b>R</b><sup>d+1</sup>\\C)\n= (-1)<sup>d+1</sup> - &chi;(union H<sub>i</sub>),\n</P>\n\n<P>where H<sub>i</sub> is the open halfspace bounded by the i'th hyperplane\non the side of that hyperplane away from C.\nWe already know the value of the first of these two terms,\nand the second can be calculated by inclusion-exclusion as\n\n<P ALIGN=CENTER>\n-sum<sub>S subset [1,n]</sub> (-1)<sup>|S|</sup>&chi;(intersection<sub>i in S</sub> H_i)\n</P>\n\n<P>summed over all nonempty subsets of the halfspaces H<sub>i</sub>.\nBut all such subsets have nonempty intersection (they contain the cone complementary to C) and are open convex polyhedra, so we can simplify the sum above to\n\n<P ALIGN=CENTER>\n-sum<sub>i=1</sub><sup>n</sup> (-1)<sup>i</sup> (n choose i) (-1)<sup>d+1</sup>\n= (-1)<sup>d+1</sup>,\n</P>\n\n<P>which exactly cancels the &chi;(<b>R</b><sup>d+1</sup>) term\nleaving X(C)=0.\n<H1>\nProof 19: Integer-Point Enumeration\n</H1>\n\n<P>If we are given some shape S in the plane, let\np<sub>S</sub>(n) denote the number of points with integer coordinates\nin a copy of S scaled by the positive integer factor n.  We can compute a formula for p(n) in many simple cases:\n\n<ul>\n<li>If S is a single integer point, then p<sub>S</sub>(n)&nbsp;=&nbsp;1\n<li>If S is an open line segment with integer endpoints,\ncontaining k integer points, then p<sub>S</sub>(n)&nbsp;=&nbsp;(k+1)n&nbsp;-&nbsp;1.\nIf it's a closed line segment, then p<sub>S</sub>(n)&nbsp;=&nbsp;(k-1)n&nbsp;+&nbsp;1.\n<li>If S is the interior of a polygon with integer vertices, area A, and k\nboundary points, then by <a href=\"pick.html\">Pick's theorem</a>\np<sub>S</sub>(n)&nbsp;=&nbsp;An<sup>2</sup>&nbsp;-&nbsp;(k/2)n&nbsp;+&nbsp;1.\nIf instead S is the closure of such a polygon, then instead we get\np<sub>S</sub>(n)&nbsp;=&nbsp;An<sup>2</sup>&nbsp;+&nbsp;(k/2)n&nbsp;+&nbsp;1.\n</ul>\n\n<P>Note that in all these cases p is a polynomial, with degree equal to the dimension of S, and abs(p(0))&nbsp;=&nbsp;1.\n\n<P>Now, as in <a href=\"pick.html\">the other proof via Pick's theorem</a>,\nwe draw our planar graph with integer coordinates in the plane.\nWe can calculate the number of integer points covered by scaled copies\nof our drawing in two ways: one as p<sub>S</sub>(n) for the closed\npolygon bounded by the drawing's outer face, and one as the sum of\np<sub>S</sub>(n) over all other vertices, open edges, and interiors of\ninterior faces of the drawing.\n\n<P>That is,\n<DIV ALIGN=CENTER>\nsum<sub>v in V</sub> p<sub>v</sub>(n) +\nsum<sub>e in E</sub> p<sub>int(e)</sub>(n) +\nsum<sub>f in F</sub> p<sub>int(f)</sub>(n)\n=\np<sub>cl(outer face)</sub>(n) + \np<sub>int(outer face)</sub>(n).\n</DIV>\n\n<P>(The term on the right hand side for the interior of the outer face\nis included to cancel that face from the sum on the left hand side,\nsince we really wanted to sum only the interior faces of the drawing\nbut the sum as written includes all faces.)\n\n<P>Evaluating these polynomials at n=0 doesn't change this equality:\n<DIV ALIGN=CENTER>\nsum<sub>v in V</sub> p<sub>v</sub>(0) +\nsum<sub>e in E</sub> p<sub>int(e)</sub>(0) +\nsum<sub>f in F</sub> p<sub>int(f)</sub>(0)\n=\np<sub>cl(outer face)</sub>(0) + \np<sub>int(outer face)</sub>(0).\n</DIV>\n\n<P>But the left hand side of this equality has +1 for each vertex and\nface of the graph, and -1 for each edge, while the right hand side is 2,\nso Euler's formula follows.\n\n<P>The Ehrhart-Macdonald Theorem lets us conclude that abs(p(0))=1 for\nhigher-dimensional relatively open convex polytopes, allowing this proof\nto be generalized to any convex polytope in <b>R</b><sup>d</sup> with\ninteger or rational vertex coordinates (<a href=\"refs.html#BecRob\">Beck\nand Robins</a>, Theorem 5.2).  All polyhedra in <b>R</b><sup>3</sup> can\nbe realized with integer coordinates but this is not true for all higher\ndimensional polytopes.\n<H1>\nProof 20: Euler tours\n</H1>\n\n<p>Given the similarity of names between an Euler tour (a closed walk in a\ngraph that visits every edge exactly once) and Euler's formula, it is\nsurprising that a strong connection between the two came so recently.\nThe proof below is based on a relation between repetitions and face\ncounts in Eulerian planar graphs observed by Red Burton, a version of the <a href=\"http://en.wikipedia.org/wiki/Graffiti_(program)\">Graffiti</a> software\nsystem for making conjectures in graph theory.</p>\n\n<p>A planar graph G has an Euler tour if and only if the degree of every\nvertex in G is even. Given such a tour, let R denote the number of times\nthe tour reaches a vertex that has already been seen earlier in the\ntour. For instance, this repetition count would equal one for a graph in\nthe form of a single cycle: only the starting vertex is repeated. As Red\nBurton observed, it is always the case that\nF&nbsp;=&nbsp;R+&nbsp;1. For, if one draws the edges of the graph in the\norder given by the tour, then the drawing starts out with one face, and\nevery repeated vertex closes off one more face. But we also have\nR&nbsp;=&nbsp;E&nbsp;&minus;&nbsp;V&nbsp;+&nbsp;1, because there are\nE&nbsp;+&nbsp;1 vertices visited in the tour from start to end, of which\nV are not repetitions. Putting these two equations for R together and\neliminating R gives\nEuler's formula, but only for Eulerian graphs.</p>\n\n<p>Now, given an arbitrary planar graph G, draw two\nparallel copies of each edge, separated by a thin two-sided face. This\nmodification doesn't change the value of the formula\nV&nbsp;&minus;&nbsp;E&nbsp;+&nbsp;F for graph G, because it adds the\nsame quantity (E) to both the number of edges and the number of faces,\nwhich cancel each other in the formula. But the new graph is Eulerian,\nso the repetition count argument for Eulerian graphs applies to it, and\nshows that in it E&nbsp;&minus;&nbsp;V&nbsp;+&nbsp;F&nbsp=&nbsp;2.\nThe same must be true in the original graph.</p>\n\n<p>The idea of proving Euler's formula by transforming an arbitrary\nplanar graph to make it\nEulerian was found by University of Houston chemical engineering\nsophomore Stephanie Mathew, under the supervision of Siemion Fajtlowicz,\nwho used this idea to find the above proof. Fajtlowicz also supplies two\ndifferent variants of the proof, in which one repeatedly connects pairs\nof odd vertices either by an arc in the plane that avoids all the\nexisting vertices or by by doubling paths in the given graph. Both of\nthese alternative versions of the Euler tour proof use the fact that\nevery graph has an even number of odd vertices, which was proven by\nEuler.</p>\n\n<P><HR><P>\n<a href=\"/~eppstein/junkyard/euler/\">Proofs of Euler's Formula</a>.<BR>\nFrom the <a href=\"/~eppstein/junkyard/\">Geometry Junkyard</a>,\ncomputational\nand recreational geometry pointers.<BR>\n<a href=\"http://www.ics.uci.edu/~eppstein/\">David Eppstein</a>,\n<a href=\"http://www.ics.uci.edu/~theory/\">Theory Group</a>,\n<a href=\"http://www.ics.uci.edu/\">ICS</a>,\n<a href=\"http://www.uci.edu/\">UC Irvine</a>.<P>\n<SMALL>Semi-automatically\n<a href=\"http://www.ics.uci.edu/~eppstein/pubs/filter.html\">filtered</a>\nfrom a common source file.\nLast update: <!--#flastmod file=\"euler.ff\" -->.</SMALL>\n", "encoding": "ascii"}